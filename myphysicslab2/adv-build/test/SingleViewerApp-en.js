(/*Copyright_2016_Erik_Neumann_All_Rights_Reserved_www.myphysicslab.com*/function(){'use strict';var g,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ba;if("function"==typeof Object.setPrototypeOf)ba=Object.setPrototypeOf;else{var ca;a:{var da={M:!0},ea={};try{ea.__proto__=da;ca=ea.M;break a}catch(a){}ca=!1}ba=ca?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var fa=ba;
function p(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(fa)fa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Cd=b.prototype}var ha=this;function t(a){return void 0!==a}function x(a){return"string"==typeof a}function y(a){return"number"==typeof a}function ia(){}
function ja(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ka(a){return"array"==ja(a)}function la(a){var b=ja(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ma(a){return"function"==ja(a)}function na(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var oa="closure_uid_"+(1E9*Math.random()>>>0),qa=0;function ra(a,b,c){return a.call.apply(a.bind,arguments)}
function sa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function z(a,b,c){z=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ra:sa;return z.apply(null,arguments)}var ta=Date.now||function(){return+new Date};
function ua(a,b){a=a.split(".");var c=ha;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&t(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}}function va(a,b){function c(){}c.prototype=b.prototype;a.Cd=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Sf=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};var wa=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(x(a))return x(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},C=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};
function xa(a,b){var c=a.length,d=x(a)?a.split(""):a;for(--c;0<=c;--c)c in d&&b.call(void 0,d[c],c,a)}
var ya=Array.prototype.filter?function(a,b,c){return Array.prototype.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,h=x(a)?a.split(""):a,k=0;k<d;k++)if(k in h){var l=h[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=x(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c){return Array.prototype.reduce.call(a,
b,c)}:function(a,b,c){var d=c;C(a,function(c,f){d=b.call(void 0,d,c,f,a)});return d};function Ba(a,b){var c=0;C(a,function(a,e,f){b.call(void 0,a,e,f)&&++c},void 0);return c}function Ca(a,b){b=Da(a,b,void 0);return 0>b?null:x(a)?a.charAt(b):a[b]}function Da(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function E(a,b){return 0<=wa(a,b)}function Ea(a){if(!ka(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}
function Fa(a,b){b=wa(a,b);var c;(c=0<=b)&&Ga(a,b);return c}function Ga(a,b){return 1==Array.prototype.splice.call(a,b,1).length}function Ha(a,b,c){var d=0;xa(a,function(e,f){b.call(c,e,f,a)&&Ga(a,f)&&d++})}function Ia(a){return Array.prototype.concat.apply([],arguments)}function Ja(a){return Array.prototype.concat.apply([],arguments)}function Ka(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function La(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(la(d)){var e=a.length||0,f=d.length||0;a.length=e+f;for(var h=0;h<f;h++)a[e+h]=d[h]}else a.push(d)}}function Ma(a,b,c,d){Array.prototype.splice.apply(a,Na(arguments,1))}function Na(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Oa(a,b){a.sort(b||Pa)}
function Qa(a,b){for(var c=Array(a.length),d=0;d<a.length;d++)c[d]={index:d,value:a[d]};var e=b||Pa;Oa(c,function(a,b){return e(a.value,b.value)||a.index-b.index});for(d=0;d<a.length;d++)a[d]=c[d].value}function Ra(a,b){if(!la(a)||!la(b)||a.length!=b.length)return!1;for(var c=a.length,d=Sa,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function Pa(a,b){return a>b?1:a<b?-1:0}function Sa(a,b){return a===b}function Ta(a){for(var b=[],c=0;c<a;c++)b[c]=-1;return b};var Ua=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function Va(a,b){return a<b?-1:a>b?1:0};var Wa;a:{var Ya=ha.navigator;if(Ya){var Za=Ya.userAgent;if(Za){Wa=Za;break a}}Wa=""};function $a(a){$a[" "](a);return a}$a[" "]=ia;function ab(a,b){var c=bb;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var cb=-1!=Wa.indexOf("Opera"),db=-1!=Wa.indexOf("Trident")||-1!=Wa.indexOf("MSIE"),eb=-1!=Wa.indexOf("Edge"),gb=-1!=Wa.indexOf("Gecko")&&!(-1!=Wa.toLowerCase().indexOf("webkit")&&-1==Wa.indexOf("Edge"))&&!(-1!=Wa.indexOf("Trident")||-1!=Wa.indexOf("MSIE"))&&-1==Wa.indexOf("Edge"),hb=-1!=Wa.toLowerCase().indexOf("webkit")&&-1==Wa.indexOf("Edge");function ib(){var a=ha.document;return a?a.documentMode:void 0}var jb;
a:{var kb="",lb=function(){var a=Wa;if(gb)return/rv:([^\);]+)(\)|;)/.exec(a);if(eb)return/Edge\/([\d\.]+)/.exec(a);if(db)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(hb)return/WebKit\/(\S+)/.exec(a);if(cb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();lb&&(kb=lb?lb[1]:"");if(db){var mb=ib();if(null!=mb&&mb>parseFloat(kb)){jb=String(mb);break a}}jb=kb}var bb={};
function nb(a){return ab(a,function(){for(var b=0,c=Ua(String(jb)).split("."),d=Ua(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",k=d[f]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==h[0].length&&0==k[0].length)break;b=Va(0==h[1].length?0:parseInt(h[1],10),0==k[1].length?0:parseInt(k[1],10))||Va(0==h[2].length,0==k[2].length)||Va(h[2],k[2]);h=h[3];k=k[3]}while(0==b)}return 0<=b})}var ob;var pb=ha.document;
ob=pb&&db?ib()||("CSS1Compat"==pb.compatMode?parseInt(jb,10):5):void 0;var qb;(qb=!db)||(qb=9<=Number(ob));var rb=qb,sb=db&&!nb("9"),tb=function(){if(!ha.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});ha.addEventListener("test",ia,b);ha.removeEventListener("test",ia,b);return a}();function ub(a,b){this.type=a;this.c=this.target=b}ub.prototype.b=function(){};function vb(a,b){ub.call(this,a?a.type:"");this.relatedTarget=this.c=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.a=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.f=null;if(a){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.c=b;if(b=a.relatedTarget){if(gb){a:{try{$a(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==
c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;null===d?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.a=a.keyCode||0;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=
a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType=x(a.pointerType)?a.pointerType:wb[a.pointerType]||"";this.f=a;a.defaultPrevented&&this.b()}}va(vb,ub);var wb={2:"touch",3:"pen",4:"mouse"};vb.prototype.b=function(){vb.Cd.b.call(this);var a=this.f;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,sb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var xb="closure_listenable_"+(1E6*Math.random()|0),yb=0;function zb(a,b,c,d,e){this.listener=a;this.a=null;this.src=b;this.type=c;this.capture=!!d;this.c=e;this.key=++yb;this.kb=this.b=!1}function Ab(a){a.kb=!0;a.listener=null;a.a=null;a.src=null;a.c=null};function Bb(a){this.src=a;this.a={};this.b=0}Bb.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var h=Cb(a,b,d,e);-1<h?(b=a[h],c||(b.b=!1)):(b=new zb(b,this.src,f,!!d,e),b.b=c,a.push(b));return b};Bb.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.a))return!1;var e=this.a[a];b=Cb(e,b,c,d);return-1<b?(Ab(e[b]),Ga(e,b),0==e.length&&(delete this.a[a],this.b--),!0):!1};
function Db(a,b){var c=b.type;c in a.a&&Fa(a.a[c],b)&&(Ab(b),0==a.a[c].length&&(delete a.a[c],a.b--))}function Cb(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.kb&&f.listener==b&&f.capture==!!c&&f.c==d)return e}return-1};var Eb="closure_lm_"+(1E6*Math.random()|0),Fb={},Gb=0;function F(a,b,c,d,e){if(d&&d.once)Hb(a,b,c,d,e);else if(ka(b))for(var f=0;f<b.length;f++)F(a,b[f],c,d,e);else c=Ib(c),a&&a[xb]?a.a.add(String(b),c,!1,na(d)?!!d.capture:!!d,e):Jb(a,b,c,!1,d,e)}
function Jb(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var h=na(e)?!!e.capture:!!e,k=Kb(a);k||(a[Eb]=k=new Bb(a));c=k.add(b,c,d,h,f);if(!c.a){d=Lb();c.a=d;d.src=a;d.listener=c;if(a.addEventListener)tb||(e=h),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(Mb(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");Gb++}}
function Lb(){var a=Nb,b=rb?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function Hb(a,b,c,d,e){if(ka(b))for(var f=0;f<b.length;f++)Hb(a,b[f],c,d,e);else c=Ib(c),a&&a[xb]?a.a.add(String(b),c,!0,na(d)?!!d.capture:!!d,e):Jb(a,b,c,!0,d,e)}function Mb(a){return a in Fb?Fb[a]:Fb[a]="on"+a}
function Ob(a,b,c,d){var e=!0;if(a=Kb(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.kb&&(f=Pb(f,d),e=e&&!1!==f)}return e}
function Pb(a,b){var c=a.listener,d=a.c||a.src;if(a.b&&!y(a)&&a&&!a.kb){var e=a.src;if(e&&e[xb])Db(e.a,a);else{var f=a.type,h=a.a;e.removeEventListener?e.removeEventListener(f,h,a.capture):e.detachEvent?e.detachEvent(Mb(f),h):e.addListener&&e.removeListener&&e.removeListener(h);Gb--;(f=Kb(e))?(Db(f,a),0==f.b&&(f.src=null,e[Eb]=null)):Ab(a)}}return c.call(d,b)}
function Nb(a,b){if(a.kb)return!0;if(!rb){if(!b)a:{b=["window","event"];for(var c=ha,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new vb(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(h){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.c;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;0<=e;e--){b.c=d[e];var f=Ob(d[e],a,!0,b);c=c&&f}for(e=0;e<d.length;e++)b.c=d[e],f=Ob(d[e],a,!1,b),c=c&&f}return c}return Pb(a,
new vb(b,this))}function Kb(a){a=a[Eb];return a instanceof Bb?a:null}var Qb="__closure_events_fn_"+(1E9*Math.random()>>>0);function Ib(a){if(ma(a))return a;a[Qb]||(a[Qb]=function(b){return a.handleEvent(b)});return a[Qb]};function Rb(a){var b=document.createElement("img");b.src=a;b.width=30;b.height=t(void 0)?void 0:30;return b}function Sb(a){for(var b=Array(a),c=0;c<a;c++)b[c]=!1;return b}function G(a){for(var b=Array(a),c=0;c<a;c++)b[c]=0;return b}function Tb(a){return null!=a?a.toExponential(7):null===a?"null":"undefined"}
function Ub(a){var b,c;y(b)||(b=2);x(c)||(c="  ");var d=String(a),e="",f=0,h=d.length,k=!1,l=[],m="",n=0;a:for(;n<h;n++){var q=d.charAt(n);if(k)if(" "==q)continue;else k=!1;if("{"==q||"["==q){f++;if(f<=b){e+=q+"\n";for(var r=0;r<f;r++)e+=c;k=!0}else e+=q;l.push(m);m="{"==q?"}":"]"}else if(q==m){if(f<=b)for(f--,e+="\n",r=0;r<f;r++)e+=c;else f--;e+=q;m=l.pop();if(0>f)throw Error("unbalanced "+m+" at "+n+" in "+a);}else{if('"'==q||"'"==q){r=q;var w=n;for(e+=q;++n<h;)if(q=d.charAt(n),e+=q,q==r)continue a;
throw Error("unbalanced quote at "+w+" in "+a);}if((","==q||";"==q)&&f<=b){e+=q+"\n";for(r=0;r<f;r++)e+=c;k=!0}else e+=q}}return e=e.replace(/^\s+\n/gm,"")}function Vb(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];a+=" "+(null!=d?d.toFixed(5):null===d?"null":"undefined")}console.log(a)}function Wb(){window.onerror=function(a,b,c){3>Xb++&&alert(a+"\n"+b+":"+c)}}function Yb(a){void 0!==a&&(Zb=a)}function $b(){return ac&&!bc?.001*performance.now():.001*ta()}
function cc(a){if(!isFinite(a))throw Error("not a finite number "+a);return a}function dc(a){if(isNaN(a))throw Error("not a number "+a);return a}function H(a){return a.toUpperCase().replace(/[ -]/g,"_")}function ec(a){if(!a.match(/^[A-Z_][A-Z_0-9]*$/))throw Error("not a valid name: "+a);return a}
function I(a,b,c){c=c||1E-14;if(0>=c)throw Error("epsilon must be positive "+c);var d=d||1;if(0>=d)throw Error("magnitude must be positive "+d);var e=Math.max(Math.abs(a),Math.abs(b));return Math.abs(a-b)>(e>d?e:d)*c}function fc(a){for(var b=a.length,c=0;c<b;c++)a[c]=0}var Zb=".",gc=Math.pow(2,53),bc=!1,ac=na(performance)&&ma(performance.now),J=Number.NaN,hc=Number.NEGATIVE_INFINITY,Xb=0,K=Number.POSITIVE_INFINITY;function ic(a,b,c,d,e){this.h=c;this.o=d;this.g=a;this.c=b;this.b=wa(this.c,c());this.a=document.createElement("select");jc(this);this.i=x(e)?e:"";a=null;0<this.i.length&&(a=document.createElement("LABEL"),a.appendChild(document.createTextNode(this.i)),a.appendChild(this.a));this.a.selectedIndex=this.b;this.s=null!==a?a:this.a;F(this.a,"change",this.j,!0,this)}ic.prototype.toString=function(){return""};
function jc(a){for(var b=a.a.options.length=0,c=a.g.length;b<c;b++)a.a.options[b]=new Option(a.g[b])}ic.prototype.V=function(){return this.s};ic.prototype.j=function(){this.a.selectedIndex!==this.b&&kc(this,this.a.selectedIndex)};ic.prototype.X=function(){var a=wa(this.c,this.h());kc(this,a)};
function kc(a,b){if(a.b!==b){var c=a.a.options.length;if(a.c.length!=c)throw Error("ChoiceControl: values_.length="+a.c.length+" but menu.options.length="+c);try{-1>b?b=-1:b>c-1&&(b=c-1),a.b=b,-1<b&&a.o(a.c[b])}catch(d){alert(d),a.b=wa(a.c,a.h())}a.a.selectedIndex=a.b}};function lc(a,b,c,d){c=void 0!==c?c:a.eb();d=void 0!==d?d:a.hb();b=void 0!==b?b:a.getName(!0);ic.call(this,c,d,z(a.Lb,a),z(a.lb,a),b);this.f=a;mc(this.f.T(),this)}p(lc,ic);lc.prototype.toString=function(){return""};lc.prototype.X=function(a){a.G()==this.f&&a.K("CHOICES_MODIFIED")?setTimeout(z(this.w,this),50):a==this.f&&ic.prototype.X.call(this,a)};
lc.prototype.w=function(){var a=this.f.eb();if(!Ra(this.g,a)){var b=this.f.hb();if(a.length!=b.length)throw Error();this.g=a;this.c=b;this.b=wa(this.c,this.h());jc(this);this.a.selectedIndex=this.b}};function nc(){}nc.prototype.toString=function(){return""};nc.prototype.reset=function(){};function L(a,b,c){c=y(c)?c:0;this.a=dc(a);this.b=dc(b);this.c=dc(c)}g=L.prototype;g.toString=function(){return""};function pc(a){return a instanceof L?a:new L(a.m(),a.l(),a.ca())}g.add=function(a){return new L(this.a+a.m(),this.b+a.l(),this.c+a.ca())};function qc(a,b){var c=a.a-b.m(),d=a.b-b.l();a=a.c-b.ca();return c*c+d*d+a*a}function rc(a,b){return Math.sqrt(qc(a,b))}
function sc(a,b){if(1===b)return a;if(1E-10>b)throw Error("Vector.divide by near zero factor "+Tb(b));return new L(a.a/b,a.b/b,a.c/b)}function tc(a,b){a=a.a*b.m()+a.b*b.l()+a.c*b.ca();if(isNaN(a))throw Error("");return a}g.Pa=function(a){return null===a?!1:a.m()===this.a&&a.l()===this.b&&a.ca()===this.c};function uc(a){return Math.atan2(a.b,a.a)}g.m=function(){return this.a};g.l=function(){return this.b};g.ca=function(){return this.c};g.length=function(){return Math.sqrt(vc(this))};
function wc(a){var b=Math.abs(a.a)+Math.abs(a.b);return 0==a.c?b:b+Math.abs(a.c)}function vc(a){return 0===a.c?a.a*a.a+a.b*a.b:a.a*a.a+a.b*a.b+a.c*a.c}function xc(a,b){return 1===b?a:new L(b*a.a,b*a.b,b*a.c)}g.na=function(a,b){return I(this.a,a.m(),b)||I(this.b,a.l(),b)||I(this.c,a.ca(),b)?!1:!0};function yc(a){return sc(a,a.length())}function zc(a,b,c){if(t(c))var d=b;else d=Math.cos(b),c=Math.sin(b);if(1E-12<Math.abs(d*d+c*c-1))throw Error();return new L(a.a*d-a.b*c,a.a*c+a.b*d,a.c)}
function M(a,b){return new L(a.a-b.m(),a.b-b.l(),a.c-b.ca())}new L(1,0);var Ac=new L(0,1),N=new L(0,0);new L(0,-1);new L(-1,0);function O(a,b,c,d){this.c=dc(a);this.a=dc(c);this.b=dc(b);this.f=dc(d);if(a>c)throw Error("DoubleRect: left > right "+a+" > "+c);if(b>d)throw Error("DoubleRect: bottom > top "+b+" > "+d);}g=O.prototype;g.toString=function(){return""};function Bc(a,b){return b.m()>=a.c&&b.m()<=a.a&&b.l()>=a.b&&b.l()<=a.f}g.Pa=function(a){return a===this?!0:a instanceof O?a.fa()==this.c&&a.a==this.a&&a.b==this.b&&a.$()==this.f:!1};function Cc(a){return new L(Dc(a),Ec(a))}function Dc(a){return(a.c+a.a)/2}
function Ec(a){return(a.b+a.f)/2}g.J=function(){return this.f-this.b};g.fa=function(){return this.c};g.$=function(){return this.f};g.I=function(){return this.a-this.c};g.qa=function(){return 1E-16>this.I()||1E-16>this.J()};function Fc(a,b,c){if(Bc(a,b)||Bc(a,c))return!0;var d=b.m();b=b.l();var e=c.m();c=c.l();var f=a.c;if(d<f&&e<f)return!1;f=a.a;if(d>f&&e>f)return!1;f=a.b;if(b<f&&c<f)return!1;f=a.f;return b>f&&c>f?!1:!0}
g.na=function(a,b){return I(this.c,a.fa(),b)||I(this.b,a.b,b)||I(this.a,a.a,b)||I(this.f,a.$(),b)?!1:!0};g.scale=function(a,b){b=void 0===b?a:b;var c=Dc(this),d=Ec(this),e=this.I(),f=this.J();return new O(c-a*e/2,d-b*f/2,c+a*e/2,d+b*f/2)};g.translate=function(a,b){y(a)||(b=a.l(),a=a.m());if(!y(a)||!y(b))throw Error();return new O(this.c+a,this.b+b,this.a+a,this.f+b)};var Gc=new O(0,0,0,0);function Hc(a,b){a=a||"SIM_OBJ"+Ic++;this.Mc=ec(H(a));this.ge=b||a;this.Y=K}g=Hc.prototype;g.toString=function(){return""};g.getName=function(a){return a?this.ge:this.Mc};g.nd=function(){return!1};g.K=function(a){return this.Mc==H(a)};g.mb=function(a){return a==this};var Ic=1;function Jc(a,b,c){Hc.call(this,a);this.b=na(b)?b:N;this.a=na(c)?c:N}p(Jc,Hc);g=Jc.prototype;g.toString=function(){return""};g.ba=function(){return this.a};g.P=function(){return this.b};g.wa=function(){return M(this.ba(),this.P())};g.mb=function(a,b){return a instanceof Jc&&a.P().na(this.P(),b)?a.ba().na(this.ba(),b):!1};function P(a,b,c){this.a=ec(H(b));this.b=a;this.c=c}g=P.prototype;g.toString=function(){return""};g.getName=function(){return this.a};g.T=function(){return this.b};g.G=function(){return this.c};g.K=function(a){return this.a==H(a)};function Kc(a,b,c,d,e){this.i=a;this.b=ec(H(b));this.g=c;this.f=d;this.h=e;this.a=!1;this.c=[];this.j=[]}g=Kc.prototype;g.toString=function(){return""};g.Lb=function(){return this.G().toString()};g.eb=function(){return Ka(this.c)};g.getName=function(a){return a?this.g:this.b};g.T=function(){return this.i};g.G=function(){return this.f()};g.hb=function(){return za(this.j,function(a){return a.toString()})};g.$a=function(){return this.a};g.K=function(a){return this.b==H(a)};g.ib=function(a){this.a=a};
g.lb=function(a){this.Nb("true"==a||"TRUE"==a)};g.Nb=function(a){if("boolean"!=typeof a)throw Error("non-boolean value: "+a);a!==this.G()&&this.h(a)};function Q(a,b,c,d,e){this.h=a;this.o=ec(H(b));this.w=c;this.s=d;this.u=e;this.j=!1;this.g=3;this.f=-1;this.a=0;this.b=K;this.i=[];this.c=[]}g=Q.prototype;g.toString=function(){return""};g.Lb=function(){return this.G().toString()};g.eb=function(){return Ka(this.i)};g.getName=function(a){return a?this.w:this.o};g.T=function(){return this.h};g.G=function(){return this.s()};g.hb=function(){return za(this.c,function(a){return a.toString()})};g.$a=function(){return this.j};
g.K=function(a){return this.o==H(a)};function Lc(a,b,c){if(c.length!==b.length)throw Error("choices and values not same length");a.i=b;a.c=c;b=new P(a.h,"CHOICES_MODIFIED",a);S(a.h,b)}g.ib=function(a){this.j=a};function Mc(a){a.f=0;return a}g.lb=function(a){var b=Number(a);if(isNaN(b))throw Error("not a number: "+a);this.wd(b)};function Nc(a,b){if(b>a.G()||b>a.b)throw Error("out of range: "+b+" value="+a.G()+" upper="+a.b);a.a=b;return a}function Oc(a,b){a.g=b;return a}
function Pc(a){if(1<a.G()||1<a.a)throw Error("out of range: 1 value="+a.G()+" lower="+a.a);a.b=1;return a}g.wd=function(a){if(!y(a))throw Error("not a number: "+a);if(a<this.a||a>this.b)throw Error("out of range. "+a+" is not between "+this.a+" and "+this.b);if(0<this.c.length&&!E(this.c,a))throw Error(a+" is not an allowed value among: ["+this.c.join(",")+"]");a!==this.G()&&this.u(a)};function Qc(a,b,c,d,e,f,h){this.o=a;this.g=ec(H(b));this.i=c;this.h=d;this.j=e;this.f=!1;this.b=K;this.c=[];this.a=[];if(null!=f)if(null!=h){this.c=f;if(h.length!==f.length)throw Error("different lengths choices:"+f+" values:"+h);this.a=h}else throw Error("values is not defined");}g=Qc.prototype;g.toString=function(){return""};g.Lb=function(){return this.G()};g.eb=function(){return Ka(this.c)};g.getName=function(a){return a?this.i:this.g};g.T=function(){return this.o};g.G=function(){return this.h()};
g.hb=function(){return Ka(this.a)};g.$a=function(){return this.f};g.K=function(a){return this.g==H(a)};g.ib=function(a){this.f=a};g.lb=function(a){if(!x(a))throw Error("non-string value: "+a);if(a.length>this.b)throw Error("string too long: "+a+" maxLength="+this.b);if(0<this.a.length&&!E(this.a,a))throw Error('"'+a+'" is not an allowed value among: ['+this.a.join(",")+"]");a!==this.G()&&this.j(a)};function T(a){if(!a)throw Error("no name");this.sa=ec(H(a));this.F=[];this.Y=[];this.L=!0;this.N=!1;this.w=[]}g=T.prototype;g.toString=function(){return""};function mc(a,b){a.w.push({action:!0,Ob:b});Rc(a)}function Rc(a){if(!a.N){for(var b=0,c=a.w.length;b<c;b++){var d=a.w[b];d.action?E(a.F,d.Ob)||a.F.push(d.Ob):Fa(a.F,d.Ob)}a.w=[]}}g.D=function(a){var b=a.getName(),c=Sc(this,b);if(null!=c)throw Error("parameter "+b+" already exists: "+c);this.Y.push(a)};
function S(a,b){if(a.L){a.N=!0;try{C(a.F,function(a){a.X(b)})}finally{a.N=!1,Rc(a)}}}function U(a,b){var c=Sc(a,b);if(null==c)throw Error("unknown Parameter "+b);S(a,c)}g.getName=function(){return this.sa};function Sc(a,b){b=H(b);return Ca(a.Y,function(a){return a.getName()==b})}g.Mb=function(a){var b=Sc(this,a);if(null!=b)return b;throw Error("Parameter not found "+a);};function Tc(a,b){a=Sc(a,b);if(a instanceof Kc)return a;throw Error("ParameterBoolean not found "+b);}
function Uc(a,b){a=Sc(a,b);if(a instanceof Q)return a;throw Error("ParameterNumber not found "+b);}function Vc(a,b){a=Sc(a,b);if(a instanceof Qc)return a;throw Error("ParameterString not found "+b);}g.getParameters=function(){return Ka(this.Y)};function Wc(a,b){var c=a.L;a.L=b;return c};function Xc(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.f=d;this.g=e;this.h=f}Xc.prototype.toString=function(){return""};function Yc(a,b){b.transform(a.a,a.b,a.c,a.f,a.g,a.h)}function Zc(a,b){return new Xc(a.a*b.a+a.c*b.b,a.b*b.a+a.f*b.b,a.a*b.c+a.c*b.f,a.b*b.c+a.f*b.f,a.a*b.g+a.c*b.h+a.g,a.b*b.g+a.f*b.h+a.h)}function $c(a,b,c,d){a=ad(a,b,c);d.lineTo(a.m(),a.l())}function bd(a,b){var c=Math.cos(b);b=Math.sin(b);return new Xc(c*a.a+b*a.c,c*a.b+b*a.f,-b*a.a+c*a.c,-b*a.b+c*a.f,a.g,a.h)}
Xc.prototype.scale=function(a,b){return new Xc(this.a*a,this.b*a,this.c*b,this.f*b,this.g,this.h)};function cd(a,b){b.setTransform(a.a,a.b,a.c,a.f,a.g,a.h)}function ad(a,b,c){y(b)||(c=b.l(),b=b.m());if(!y(b)||!y(c))throw Error();return new L(a.a*b+a.c*c+a.g,a.b*b+a.f*c+a.h)}Xc.prototype.translate=function(a,b){y(a)||(b=a.l(),a=a.m());if(!y(a)||!y(b))throw Error();return new Xc(this.a,this.b,this.c,this.f,this.g+this.a*a+this.c*b,this.h+this.b*a+this.f*b)};var dd=new Xc(1,0,0,1,0,0);function ed(a,b){Hc.call(this,a,b);this.a=1;this.b=N;this.v=this.F=0;this.u=1;this.N=N;this.s=0;this.c=N;this.C=[N];this.S=0;this.j=J}p(ed,Hc);g=ed.prototype;g.toString=function(){return""};function V(a,b){var c=b.m()-a.c.m();b=b.l()-a.c.l();return new L(a.b.m()+(c*a.u-b*a.v),a.b.l()+(c*a.v+b*a.u))}function fd(a){var b=new Xc(1,0,0,1,a.b.m(),a.b.l());b=bd(b,a.F);return b.translate(-a.c.m(),-a.c.l())}function gd(a){return V(a,a.Kb())}g.J=function(){return this.Ga()-this.ma()};
function hd(a){var b=hc;C(a.jd(),function(a){a=V(this,a);a.l()>b&&(b=a.l())},a)}g.I=function(){return this.Sa()-this.ia()};function id(a){if(t(void 0)){var b=jd(a,M(pc(void 0),a.c));return new L(a.N.m()-b.l()*a.s,a.N.l()+b.m()*a.s)}return a.N}g.nd=function(){return!0};function kd(a){return a.a*a.S}function jd(a,b){return zc(pc(b),a.u,a.v)}function ld(a,b){return zc(pc(b),a.u,-a.v)}g.Na=function(a){if(0>=a||!y(a))throw Error("mass must be positive "+a);this.a=a;return this};
g.aa=function(a,b){this.b=pc(a);t(b)&&this.F!=b&&(this.F=b,this.v=Math.sin(b),this.u=Math.cos(b))};function md(a,b,c){a.N=pc(b);if(t(c)){if(!isFinite(c))throw Error("angular velocity must be finite "+c);a.s=c}}function nd(a,b){var c=b.m()-a.b.m();b=b.l()-a.b.l();var d=-a.v,e=a.u;return new L(a.c.m()+(c*e-b*d),a.c.l()+(c*d+b*e))};function od(a,b){t(a)&&""!=a?b=b?b:a:(b=pd++,a=qd.Jc+b,b=rd.Jc+b);ed.call(this,a,b);this.f=this.g=this.a=1}p(od,ed);g=od.prototype;g.toString=function(){return""};function sd(a,b){b=new od(b,void 0);b.g=a;b.f=a;return b}g.cd=function(a){a.beginPath();var b=this.f/2,c=this.g/2;ma(a.ellipse)?(a.moveTo(c,0),a.ellipse(0,0,c,b,0,0,2*Math.PI,!1)):(a.arc(0,0,Math.min(c,b),0,2*Math.PI,!1),a.closePath())};g.ma=function(){return-this.f/2};g.Kb=function(){return N};
g.Ra=function(){var a=this.g/2,b=this.f/2;return Math.sqrt(a*a+b*b)};g.ia=function(){return-this.g/2};g.oc=function(){if(isNaN(this.j)){var a=this.c.m(),b=this.c.l(),c=b-this.ma(),d=a-this.ia();d<c&&(c=d);d=this.Ga()-b;d<c&&(c=d);d=this.Sa()-a;d<c&&(c=d);this.j=c}return this.j};g.Sa=function(){return this.g/2};g.Ga=function(){return this.f/2};g.jd=function(){var a=this.g/2,b=this.f/2;return[new L(-a,-b),new L(a,-b),new L(a,b),new L(-a,b)]};
g.Na=function(a){if(0>a||!y(a))throw Error("mass must be non-negative "+a);this.a=a;return this};g.mb=function(a,b){return a instanceof od&&a.b.na(this.b,b)&&!I(a.g,this.g,b)&&!I(a.f,this.f,b)?!0:!1};var pd=1,qd={Jc:"PointMass"},rd=qd;function td(a,b,c,d,e,f,h){Hc.call(this,a);this.a=b;this.g=c;this.f=e;this.i=d;this.h=f;this.c=this.b=0;this.j=void 0===h?0:h}p(td,Hc);g=td.prototype;g.toString=function(){return""};g.ba=function(){return this.P().add(this.wa())};g.P=function(){return 0==this.i?V(this.a,this.g):this.g};g.wa=function(){return 0==this.h?jd(this.a,this.f):this.f};g.mb=function(a,b){return a instanceof td&&a.getName()==this.getName()&&this.P().na(a.P(),b)?this.wa().na(a.wa(),b):!1};function ud(a,b,c,d,e,f,h,k){Hc.call(this,a);this.b=b;this.g=pc(c);this.c=d;this.h=pc(e);this.a=f;this.f=void 0===h?0:h;this.i=k||!1}p(ud,Hc);g=ud.prototype;g.toString=function(){return""};g.ad=function(){var a=this.P(),b=this.ba(),c=M(b,a),d=c.length(),e=-this.f*(d-this.a);c=new L(c.m()/d*-e,c.l()/d*-e,0);return[new td("spring",this.b,a,1,c,1),new td("spring",this.c,b,1,xc(c,-1),1)]};g.ud=function(){};
g.ba=function(){if(null==this.h||null==this.c)throw Error();var a=V(this.c,this.h);if(this.i){var b=this.P(),c=this.a;if(rc(b,a)<=c)return a;a=yc(M(a,b));return b.add(xc(a,c))}return a};g.hd=function(){var a=rc(this.ba(),this.P())-this.a;return.5*this.f*a*a};g.P=function(){if(null==this.g||null==this.b)throw Error();return V(this.b,this.g)};g.wa=function(){return M(this.ba(),this.P())};function vd(){T.call(this,"SIM_LIST");this.a=[]}p(vd,T);g=vd.prototype;g.toString=function(){return""};g.add=function(a){for(var b=0;b<arguments.length;b++){var c=arguments[b];if(null==c)throw Error("cannot add invalid SimObject");if(isFinite(c.Y))for(var d;d=wd(this,c);)this.remove(d);E(this.a,c)||(this.a.push(c),S(this,new P(this,"OBJECT_ADDED",c)))}};
g.get=function(a){if(y(a)){if(0<=a&&a<this.a.length)return this.a[a]}else if(x(a)){a=H(a);var b=Ca(this.a,function(b){return b.getName()==a});if(null!=b)return b}throw Error("SimList did not find "+a);};function wd(a,b){return Ca(a.a,function(a){return a.mb(b,.1)})}g.indexOf=function(a){return wa(this.a,a)};g.length=function(){return this.a.length};g.remove=function(a){Fa(this.a,a)&&S(this,new P(this,"OBJECT_REMOVED",a))};
function xd(a,b){for(var c=a.a.length-1;0<=c;c--){var d=a.a[c];d.Y<b&&(a.a.splice(c,1),S(a,new P(a,"OBJECT_REMOVED",d)))}};function yd(a,b,c){this.h=a;this.f=ec(H(b));this.g=c;this.a=0;this.c=!1;this.b=0}g=yd.prototype;g.toString=function(){return""};g.Lb=function(){return this.a.toString()};g.eb=function(){return[]};g.getName=function(a){return a?this.g:this.f};g.T=function(){return this.h};g.G=function(){return this.a};g.hb=function(){return[]};g.$a=function(){return this.c};g.K=function(a){return this.f==H(a)};g.ib=function(a){this.c=a};
g.lb=function(a){var b=Number(a);if(isNaN(b))throw Error("not a number: "+a+" (ConcreteVariable)");this.a!=b&&(this.a=b,this.b++)};function zd(a,b,c){T.call(this,t(c)?c:"VARIABLES");this.b=-1;if(a.length!=b.length)throw Error("varNames and localNames are different lengths");c=0;for(var d=a.length;c<d;c++){var e=a[c];if(!x(e))throw Error("variable name "+e+" is not a string i="+c);e=ec(H(e));a[c]=e;"TIME"==e&&(this.b=c)}a:{c=a.length;if(1<c){d=Array(c);for(e=0;e<c;e++)d[e]=a[e];Oa(d);var f=d[0];for(e=1;e<c;e++){if(f==d[e]){c=!1;break a}f=d[e]}}c=!0}if(!c)throw Error("duplicate variable names");this.a=[];c=0;for(d=a.length;c<d;c++)this.a.push(new yd(this,
a[c],b[c]))}p(zd,T);g=zd.prototype;g.toString=function(){return""};g.D=function(){throw Error("addParameter not allowed on VarsList");};
function Ad(a,b,c){var d=b.length;if(0==d)throw Error();if(b.length!=c.length)throw Error("names and localNames are different lengths");a:{if(0>d)throw Error();var e=0;var f=-1;for(var h=0,k=a.a.length;h<k;h++)if("DELETED"==a.a[h].getName()){if(-1==f&&(f=h),e++,e>=d)break a}else f=-1,e=0;0<e?e=d-e:(f=a.a.length,e=d);for(h=0;h<e;h++)a.a.push(new yd(a,"DELETED","DELETED"))}for(h=0;h<d;h++){e=ec(H(b[h]));if("DELETED"==e)throw Error("variable cannot be named ''+VarsList.DELETED+''");k=f+h;a.a[k]=new yd(a,
e,c[h]);"TIME"==e&&(a.b=k)}S(a,new P(a,"VARS_MODIFIED"));return f}function Bd(a,b){if(0>b||b>=a.a.length)throw Error("bad variable index="+b+"; numVars="+a.a.length);}g.Mb=function(a){a=H(a);var b=Ca(this.a,function(b){return b.getName()==a});if(null!=b)return b;throw Error("Parameter not found "+a);};g.getParameters=function(){return Ka(this.a)};g.G=function(a){Bd(this,a);return this.a[a].G()};function Cd(a){return za(a.a,function(a){return a.$a()?NaN:a.G()})}
function Dd(a,b){if(y(b))var c=b;else if(x(b)){if(b=H(b),c=Da(a.a,function(a){return a.getName()==b}),0>c)throw Error("unknown variable name "+b);}else throw Error();Bd(a,c);return a.a[c]}g.jb=function(a){if(0==arguments.length)for(var b=0,c=this.a.length;b<c;b++)this.a[b].b++;else for(b=0,c=arguments.length;b<c;b++){var d=arguments[b];Bd(this,d);this.a[d].b++}};g.bf=function(a){for(var b=0,c=arguments.length;b<c;b++){var d=arguments[b];Bd(this,d);this.a[d].ib(!0)}};
function Ed(a,b,c,d){Bd(a,b);a=a.a[b];if("DELETED"!=a.getName()){if(isNaN(c)&&!a.$a())throw Error("cannot set variable "+a.getName()+" to NaN");d?a.a=c:a.a!=c&&(a.a=c,a.b++)}}function Fd(a,b,c){var d=a.a.length,e=b.length;if(e>d)throw Error("setValues bad length n="+e+" > N="+d);for(var f=0;f<d;f++)f<e&&Ed(a,f,b[f],c)}var Gd={Qc:"time"};function Hd(){this.c=this.g=0;this.b=this.a=this.f=K}Hd.prototype.toString=function(){return""};function Id(a){a.g=0;a.c=0;a.f=K;a.a=K;a.b=K}function Jd(a,b){Id(a);C(b,function(a){a.h?this.g++:Kd(a);Kd(a);a.L&&(this.c++,a.v<this.b&&(this.b=a.v));if((a.L||!Kd(a))&&0>Ld(a)){var b=a.f;if(!isFinite(b))throw Error("distance is NaN "+a);b<this.f&&(this.f=b);isNaN(this.a)||(a=a.w,isNaN(a)?this.a=J:a<this.a&&(this.a=a))}},a);a.a==K&&(a.a=J);a.b==K&&(a.b=J)};function Md(a){this.a=a;this.c=[];this.h=[];this.i=[];this.f=[];this.g=[]}Md.prototype.toString=function(){return""};Md.prototype.getName=function(a){return a?Nd.oa:H(Od.oa)};Md.prototype.K=function(a){return this.getName()==H(a)};
Md.prototype.b=function(a){var b,c=this.a.U(),d=Cd(c),e=d.length;this.c.length<e&&(this.c=Array(e),this.h=Array(e),this.i=Array(e),this.f=Array(e),this.g=Array(e));var f=this.c,h=this.h,k=this.i,l=this.f,m=this.g;for(b=0;b<e;b++)f[b]=d[b];fc(h);b=this.a.xa(f,h,0);if(null!==b)return b;for(b=0;b<e;b++)f[b]=d[b]+h[b]*a/2;fc(k);b=this.a.xa(f,k,a/2);if(null!==b)return b;for(b=0;b<e;b++)f[b]=d[b]+k[b]*a/2;fc(l);b=this.a.xa(f,l,a/2);if(null!==b)return b;for(b=0;b<e;b++)f[b]=d[b]+l[b]*a;fc(m);b=this.a.xa(f,
m,a);if(null!==b)return b;for(b=0;b<e;b++)d[b]+=(h[b]+2*k[b]+2*l[b]+m[b])*a/6;Fd(c,d,!0);return null};var Od={oa:"Runge-Kutta"},Nd=Od;function Pd(a){this.a=a;this.i=new Md(a);this.v=.025;this.A=!1;this.L=new nc;this.F=this.s=this.f=0;this.g=J;this.b=[];this.h=new Hd;this.B=[];this.c=!1;this.u=this.w=this.C=this.j=this.o=0}Pd.prototype.toString=function(){return""};
function Qd(a,b,c){if(1E-16>b)a.a.ga();else{xd(a.a.c,a.a.R()+b);a.s=0;a.F=b;a.f=b;a.o=0;a.c=!1;a.g=J;a.j=0;a.C=0;a.u=0;a.w=0;Id(a.h);a.b=[];for(b=!1;a.s<a.F-1E-16;){Rd(a,a.f);Jd(a.h,a.b);var d=!1;if(0<a.h.c&&(Sd(a,a.f),d=!0,Jd(a.h,a.b),a.j++,3<=a.j&&(a.c||(a.c=!0),30<=a.j)))throw Error("collision was not resolved after "+a.j+" tries");a.w=Ba(a.b,function(a){var b;if(b=(a.L||!Kd(a))&&0>Ld(a))b=d,b=Kd(a)?!0:b?0<a.f&&a.f<a.B+a.Y:a.f>a.B-a.Y&&a.f<a.B+a.Y;return b});if(0<a.w){a.B=[];Td(a);var e=Ud(a,a.w);
b=b||e;a.g=NaN;Jd(a.h,a.B)}d||(1E-7<a.f&&(a.j=0),a.s+=a.f,void 0!==c&&c.la(),a.c&&2<=++a.o?(a.c=!1,a.o=0):isFinite(a.g)&&(a.c=!0));Vd(a,d)}!b&&a.A&&0<a.h.g&&Wd(a)}}function Vd(a,b){a.g=a.h.a;a.c||(a.g<a.a.R()&&(a.c=!0),0<a.h.c&&isNaN(a.g)&&(a.c=!0));var c=a.F-a.s;a.c?(a.g=NaN,b&&(a.f/=2,a.o=0),a.f=Math.min(a.f,c)):isNaN(a.g)?a.f=c:(b=a.g-a.a.R(),a.f=Math.min(b,c))}
function Rd(a,b){a.b=[];Xd(a.a);var c=a.i.b(b);a.a.ga();a.C++;null!=c?a.b=c:(c=Cd(a.a.U()),a.a.cb(a.b,c,b));Qa(a.b,function(a,b){a=Math.round(1E7*a.w);b=Math.round(1E7*b.w);return isNaN(a)?isNaN(b)?0:1:isNaN(b)?-1:a<b?-1:a>b?1:0});C(a.b,function(a){var b=Yd(a);a.L=b})}function Sd(a,b){Zd(a.a);a.a.ga();for(var c=a.a.R(),d=a.b.length-1;0<=d;d--){var e=a.b[d];Yd(e)?e.Fa(c):Ga(a.b,d)}c=Cd(a.a.U());a.a.cb(a.b,c,b)}
function Ud(a,b){if($d(a.a,a.b)){a.a.ga();var c=a.a.R();C(a.b,function(a){a.Fa(c)});a.u+=b;a.c=!1;a.o=0;return!0}a.c=!0;return!1}function Wd(a){0<a.b.length&&(Td(a),$d(a.a,a.b),a.a.ga())}function Td(a){for(var b=a.b.length;0<b--;){var c=a.b[b];c.h||c.f<c.F||(Ga(a.b,b),a.B.push(c))}}Pd.prototype.reset=function(){this.a.reset();this.L.reset()};function ae(a,b,c){this.b=document.createElement("button");this.b.type="button";t(c)?(this.b.className="icon",this.b.appendChild(c)):this.b.appendChild(document.createTextNode(a));this.f=b;F(this.b,"mousedown",this.Ue,!0,this);F(this.b,"mouseup",this.ld,!0,this);F(this.b,"dragleave",this.ld,!1,this);this.c=void 0;this.a=0}g=ae.prototype;g.toString=function(){return""};g.V=function(){return this.b};g.Ue=function(){this.md()};g.ld=function(){t(this.c)&&(clearTimeout(this.c),this.c=void 0)};
g.md=function(){this.f();if(0<this.a){var a=t(this.c)?this.a:2*this.a;this.c=setTimeout(z(this.md,this),a)}};function be(){return["LEFT","MIDDLE","RIGHT","FULL","VALUE"]}function ce(a){for(var b=be(),c=0,d=b.length;c<d;c++)if(a===b[c])return b[c];throw Error("invalid HorizAlign value:  "+a);}var de={Kd:"left",cc:"middle",Wd:"right",$b:"full",kc:"value"};function ee(a,b){if(!(y(0)&&y(0)&&y(a)&&y(b)))throw Error();if(0>a||0>b)throw Error();this.b=a;this.a=b}g=ee.prototype;g.toString=function(){return""};g.Pa=function(a){return this.b==a.b&&this.a==a.a};g.J=function(){return this.a};g.fa=function(){return 0};g.$=function(){return 0};g.I=function(){return this.b};g.qa=function(){return 1E-14>this.b||1E-14>this.a};g.na=function(a,b){return I(0,0,b)||I(0,0,b)||I(this.b,a.b,b)||I(this.a,a.a,b)?!1:!0};var fe=new ee(0,0);function ge(){return["TOP","MIDDLE","BOTTOM","FULL","VALUE"]}function he(a){for(var b=ge(),c=0,d=b.length;c<d;c++)if(a===b[c])return b[c];throw Error("invalid VerticalAlign value: "+a);}var ie={ae:"top",cc:"middle",Fd:"bottom",$b:"full",kc:"value"};function je(a,b,c,d,e,f){this.f=cc(a);this.c=cc(b);this.h=cc(c);this.g=cc(d);this.a=cc(e);this.b=cc(f);a=dd;a=a.translate(this.f,this.c);a=a.scale(this.a,-this.b);this.i=a=a.translate(-this.h,-this.g)}je.prototype.toString=function(){return""};
function ke(a,b,c,d,e){c=ce(c||"MIDDLE");d=he(d||"MIDDLE");e=e||1;if(1E-15>e||!isFinite(e))throw Error("bad aspectRatio "+e);var f=b.fa(),h=b.b,k=b.a-f,l=b.$()-h;if(1E-15>k||1E-15>l)throw Error("simRect cannot be empty "+b);b=a.$();var m=a.fa(),n=a.I();a=a.J();var q=0,r=0,w=0,A=0;"FULL"==c&&(w=n/k,q=0);"FULL"==d&&(A=a/l,r=0);if("FULL"!=c||"FULL"!=d)if("FULL"==c?(A=w*e,q=!0):"FULL"==d?(w=A/e,q=!1):(w=n/k,A=w*e,q=!0,r=Math.floor(.5+A*l),a<r&&(A=a/l,w=A/e,q=!1)),q)switch(q=0,r=Math.floor(.5+l*A),d){case "BOTTOM":r=
0;break;case "MIDDLE":r=(a-r)/2;break;case "TOP":r=a-r;break;default:throw Error("unsupported alignment "+d);}else switch(r=0,d=Math.floor(.5+k*w),c){case "LEFT":q=0;break;case "MIDDLE":q=(n-d)/2;break;case "RIGHT":q=n-d;break;default:throw Error("unsupported alignment "+c);}return new je(m,b+a,f-q/w,h-r/A,w,A)}function le(a,b){if(y(b))var c=void 0;else c=b.l(),b=b.m();if(!y(b)||!y(c))throw Error();return new L(a.h+(b-a.f)/a.a,a.g+(a.c-c)/a.b)}
function me(a,b){return new O(a.h+(b.fa()-a.f)/a.a,a.g+(a.c-(b.$()+b.J()))/a.b,a.h+(b.fa()+b.I()-a.f)/a.a,a.g+(a.c-b.$())/a.b)}function ne(a,b){return new L(oe(a,b.m()),pe(a,b.l()))}function oe(a,b){return a.f+(b-a.h)*a.a}function pe(a,b){return a.c-(b-a.g)*a.b};function qe(a){this.a=a||Gc;this.o="14pt sans-serif";this.c="gray";this.g=0;this.h="VALUE";this.j=0;this.b="VALUE";this.f=0;this.qc="x";this.Rb="y";this.i=100}g=qe.prototype;g.toString=function(){return""};g.Ia=function(){return!1};
g.Ja=function(a,b){a.save();a.strokeStyle=this.c;a.fillStyle=this.c;a.font=this.o;a.textAlign="start";a.textBaseline="alphabetic";var c=this.a;var d=c.fa(),e=c.a,f=c.b,h=c.$();var k=e-.06*(e-d);var l=d+.01*(e-d);switch(this.b){case "VALUE":var m=this.j;m<l?m=l:m>k&&(m=k);k=oe(b,m);break;case "RIGHT":k=oe(b,k);break;case "LEFT":k=oe(b,l);break;default:k=oe(b,Dc(c))}l=pe(b,h);m=pe(b,f);switch(this.h){case "VALUE":c=pe(b,this.g);c<l+30?c=l+30:c>m-30&&(c=m-30);break;case "TOP":c=l+30;break;case "BOTTOM":c=
m-30;break;default:c=pe(b,Ec(c))}a.beginPath();a.moveTo(oe(b,d),c);a.lineTo(oe(b,e),c);a.stroke();d=c;l=this.a;e=d-4;c=e+8;var n=l.fa();l=l.a;m=re(this,l-n);for(var q=Math.ceil(n/m)*m;q<l;){n=oe(b,q);a.beginPath();a.moveTo(n,e);a.lineTo(n,c);a.stroke();var r=q+m;if(r>q)q=q.toFixed(this.f),a.fillText(q,n-a.measureText(q).width/2,c+12);else{a.fillText("scale is too small",n,c+12);break}q=r}a.fillText(this.qc,oe(b,l)-a.measureText(this.qc).width-5,d-8);a.beginPath();a.moveTo(k,pe(b,f));a.lineTo(k,pe(b,
h));a.stroke();f=k;d=this.a;h=f-4;k=h+8;c=d.b;d=d.$();e=re(this,d-c);for(m=Math.ceil(c/e)*e;m<d;){c=pe(b,m);a.beginPath();a.moveTo(h,c);a.lineTo(k,c);a.stroke();l=m+e;if(l>m)m=m.toFixed(this.f),n=a.measureText(m).width,"RIGHT"===this.b?a.fillText(m,k-(n+10),c+6):a.fillText(m,k+5,c+6);else{a.fillText("scale is too small",k,c);break}m=l}h=a.measureText(this.Rb).width;"RIGHT"===this.b?a.fillText(this.Rb,f-(h+6),pe(b,d)+13):a.fillText(this.Rb,f+6,pe(b,d)+13);a.restore()};g.Ba=function(){return[]};
function re(a,b){var c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10));b/=c;c*=8<=b?2:5<=b?1:3<=b?.5:2<=b?.4:.2;b=Math.log(c)/Math.LN10;a.f=0>b?Math.ceil(-b):0;return c}g.Ka=function(){return N};g.pa=function(){return[]};g.W=function(){return this.i};g.Ca=function(){return!1};g.ja=function(a){this.c=a};g.ya=function(){};function se(a){a.h="BOTTOM";y(void 0)&&(a.g=void 0)}function te(a){a.b="LEFT";y(void 0)&&(a.j=void 0)}g.ka=function(a){t(a)&&(this.i=a)};function ue(a,b){this.s=a;this.o=b;this.b=y(2)?2:1;this.a=na(void 0)?void 0:N;this.f="14pt sans-serif";this.w="blue";this.j=this.g=1;this.i="black";this.h="rgba(255, 255, 255, 0.75)";this.c=0}g=ue.prototype;g.toString=function(){return""};g.Ia=function(a){return rc(a,this.a)<=this.b};
g.Ja=function(a,b){var c=ne(b,this.a),d=this.b*b.a;a.save();a.beginPath();a.arc(c.m(),c.l(),d,0,2*Math.PI,!1);a.closePath();a.lineWidth=this.j;a.strokeStyle=this.i;a.stroke();a.fillStyle=this.h;a.fill();d=this.s();var e=this.o();ve(this,a,b,"blue",d,c);ve(this,a,b,"red",e,c);b=d.toFixed(3);a.fillStyle=this.w;a.font=this.f;a.textAlign="center";a.fillText(b,c.m(),c.l());a.restore()};
function ve(a,b,c,d,e,f){e-=2*Math.floor(e/2);var h=e/2;e=a.b*Math.sin(2*Math.PI*h)*c.a;c=a.b*Math.cos(2*Math.PI*h)*c.b;b.lineWidth=a.g;b.strokeStyle=d;b.beginPath();b.moveTo(f.m(),f.l());b.lineTo(f.m()+e,f.l()-c);b.stroke()}g.Ca=function(){return!0};g.Ba=function(){return[]};g.Ka=function(){return this.a};g.pa=function(){return[]};g.W=function(){return this.c};g.ya=function(a){this.a=a};g.ka=function(a){this.c=t(a)?a:0};var we={Cb:"show clock"};function xe(a,b){if(this.a=a)a.spellcheck=!1;if(this.f=b)b.spellcheck=!1;this.a&&F(this.a,"keydown",this.u,!1,this);this.a&&F(this.a,"change",this.v,!0,this);this.w=!1;this.g=[];this.b=-1;this.B=[];this.j=!1;this.o=[];this.F="myphysicslab goog length name terminal find".split(" ");this.h=null;this.i=0}xe.prototype.toString=function(){return""};function ye(a){return a.replace(/\\(x|u00)([0-9a-fA-F]{2})/g,function(a,c,d){return String.fromCharCode(Number("0x"+d))})}
function ze(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16)})}
xe.prototype.eval=function(a,b,c){b="boolean"==typeof b?b:!0;if((c=c||!1)&&!b)throw Error();a=ye(a).trim();if(!a.match(/^\s*$/)){this.i++;1<this.i&&(b=!1);b?(this.g.unshift(a),this.b=-1):(this.o.push(this.c),this.c=void 0);try{var d=a,e=/^\w\s*\[\s*\d*\s*\]$/,f=d.match(/\w\s*\[[^\]]*?\]/g);if(null!=f)for(var h=0,k=f.length;h<k;h++)if(!e.test(f[h]))throw Error("prohibited usage of square brackets in script: "+d+" Only positive integer is allowed in brackets.  Try using Util.get(array, index) or Util.set(array, index, value).");
for(f=["",a];f=Ae(f[1]),f[0];){var l=f[0].trim();if(0!=l.length)a:{b&&Be(this,"> "+l);if(null!=this.h){b:{var m=this.h;k=l;";"==k.slice(-1)&&(k=k.slice(0,k.length-1));d=0;for(var n=m.b.length;d<n;d++)if(k.toLowerCase()==m.b[d]){var q=m.j[d]();break b}var r=k.split("="),w=H(r[0].trim()),A=Ce(m,w);if(null==A||2<r.length)q=void 0;else{if(2==r.length)try{var u=r[1].trim();if(2>u.length)var v=u;else{var B=u.charAt(0);if(B!=u.charAt(u.length-1)||'"'!=B&&"'"!=B)v=u;else{k="";d=1;for(var D=u.length-1;d<D;d++){var Z=
u[d];if("\\"==Z)if(d++,d<D)switch(Z=u[d],Z){case "0":k+="\x00";break;case "b":k+="\b";break;case "t":k+="\t";break;case "n":k+="\n";break;case "v":k+="\v";break;case "f":k+="\f";break;case "r":k+="\r";break;case '"':k+='"';break;case "'":k+="'";break;case "\\":k+="\\";break;default:k+="\\"+Z}else k+=Z;else k+=Z}v=k}}A.lb(v)}catch(R){throw R.message+='\nwhile setting value "'+v+'" on parameter '+w,R;}q=A.G()}}if(void 0!==q){this.c=q;break a}}var pa=De(this,l);console.log("JavaScript is disabled due to advanced compilation; try a simple-compiled version: "+
pa);Be(this,"JavaScript is disabled due to advanced compilation; try a simple-compiled version");this.c=void 0}}b&&t(this.c)&&";"!=a.slice(-1)&&Be(this,String(this.c));b&&t(this.s)&&this.s()}catch(R){if(b?(this.c=void 0,Be(this,R)):this.c=this.o.pop(),!c)throw this.i--,R.message+="\nScript: "+a,R;}this.i--;if(b)return Ee(this),this.c;a=this.c;this.c=this.o.pop();return a}};
function De(a,b){b=Fe(b);for(var c="",d=0;b;){if(1E4<++d)throw Error("Terminal.expand");var e=b.match(/^[^'"/]+/);if(null!==e&&(e=e[0],b=b.slice(e.length),e=Aa(a.B,function(a,b){return a.replace(b.Tf,b.replace)},e),Ge(e,a.F),c+=e,0==b.length))break;if(c.match(/.*[=(][ ]*$/)&&(e=b.match(/^\/[^*/](\\\/|[^\\/])*\//),null!==e)){e=e[0];b=b.slice(e.length);c+=e;continue}0<b.length&&"/"==b[0]?(c+="/",b=b.slice(1)):(e=b.match(/^"(\\.|[^\\"])*"/),null!==e?(e=e[0],b=b.slice(e.length),c+=e):0<b.length&&'"'==
b[0]?(c+='"',b=b.slice(1)):(e=b.match(/^'(\\.|[^\\'])*'/),null!==e?(e=e[0],b=b.slice(e.length),c+=e):0<b.length&&"'"==b[0]&&(c+="'",b=b.slice(1))))}return c}
xe.prototype.u=function(a){this.a&&this.f&&(a.metaKey&&75==a.a?(this.f.value="",a.b()):38==a.a||40==a.a?(-1==this.b&&""!=this.a.value&&(this.g.unshift(this.a.value),this.b=0),38==a.a?this.b<this.g.length-1&&(this.b++,this.a.value=this.g[this.b]):40==a.a&&(0<this.b?(this.b--,this.a.value=this.g[this.b]):(this.b=-1,this.a.value="")),a.b()):13==a.a&&this.eval(this.a.value,!0,!0))};xe.prototype.v=function(){this.a&&this.eval(this.a.value,!0,!0)};
function He(){var a=window.location.href,b=a.indexOf("?");-1<b&&(a=a.slice(0,b));return a}function Be(a,b){a.f&&(a.f.value+=b+"\n",Ee(a))}function Ie(a){a.j=!0;try{var b=window.localStorage;if(null!=b){var c=b.getItem(He());c&&(Be(a,"//start of stored scripts"),C(c.split("\n"),function(a){this.eval(a)},a),Be(a,"//end of stored scripts"))}}catch(d){Be(a,"//cannot access localStorage due to: "+d)}a.j=!1}function Fe(a){var b=a.match(/^\s*var\s+(\w[\w_\d]*)(.*)/);return b?b[1]+b[2]:a}
function Ee(a){a.a&&a.f&&(a.f.scrollTop=a.f.scrollHeight-a.f.offsetHeight,a.a.value="")}function Je(a,b){a.s=b}
function Ae(a){var b=0,c="",d="",e=!1,f=!1,h=!1,k="",l;var m=0;for(l=a.length;m<l;m++){var n=d;" "!=d&&"\t"!=d&&"\n"!=d&&(c=d);d=a[m];var q=m+1<l?a[m+1]:"\x00";if(e){if("\n"==d&&(e=!1,0==b))break}else if(f)"/"==d&&"\\"!=n&&(f=!1);else if(h)d==k&&"\\"!=n&&(h=!1,k="");else if("/"==d)"/"==q?e=!0:"*"==q||!c||"="!=c&&"("!=c||(f=!0);else if('"'==d||"'"==d)h=!0,k=d;else if(";"==d&&0==b)break;else"{"==d?b++:"}"==d&&b--}return[a.slice(0,m+1),a.slice(m+1)]}
function Ge(a,b){for(var c in window){a:{var d=0;for(var e=b.length;d<e;d++)if(c==b[d]){d=!1;break a}d=(new RegExp("\\b"+c+"\\b","g")).test(a)}if(d)throw Error('prohibited name: "'+c+'" found in script: '+a);}if(/\b(myEval|Function|with|__proto__|call|apply|caller|callee|arguments|addWhiteList|vetCommand|badCommand|whiteList_|addRegex|addRegex2|regexs_|afterEvalFn_|setAfterEval|parentNode|parentElement|innerHTML|outerHTML|offsetParent|insertAdjacentHTML|appendChild|insertBefore|replaceChild|removeChild|ownerDocument|insertBefore|setParser|defineNames|globalEval|window|defineProperty|defineProperties|__defineGetter__|__defineSetter__)\b/g.test(a))throw Error("prohibited name in script: "+
a);};function Ke(a,b){Le(a);this.c=a;this.h=ka(b)?b:[];Ha(this.c,function(a){return E(this.h,a)},this);this.c=Ia(this.c,this.h);this.s=[];this.i=[];this.f=[];this.a=[];this.g=[];this.w=[];this.b=[];this.j=[];this.o=[];Me(this,"url",z(function(){return Ne(this)},this),"prints URL with script to recreate current state");Me(this,"script",z(function(){return Oe(this)},this),"prints script to recreate current state");Me(this,"values",z(function(){return Ub(Pe(this,!1,!0,!0)+Pe(this,!0,!0,!0))},this),"shows available parameters and their current values");
Me(this,"names",z(function(){return Ub(Ka(this.f).join(";"))},this),"shows available parameter names (format is SUBJECT.PARAMETER)");Me(this,"help",z(function(){var a='myPhysicsLab version 2.0.0, advanced-compiled on 2020-02-21 12:51:53.\nUse the "values" command to see what can be set and the syntax.\n\ncommand-K            clear Terminal window\narrow up/down        retrieve previous or next command\n';for(var b=0,e=this.b.length;b<e;b++){for(var f=this.b[b];20>f.length;)f+=" ";a+=f+" "+this.o[b]+
"\n"}return a},this),"prints this help text");Qe(this)}Ke.prototype.toString=function(){return""};function Me(a,b,c,d){a.b.push(b);a.j.push(c);a.o.push(d)}function Le(a){var b=[];C(a,function(a){a=a.getName();if(E(b,a))throw Error("duplicate Subject name: "+a);b.push(a)})}
function Ce(a,b){b=H(b);var c=b.split(".");if(1==c.length){var d="";var e=c[0]}else if(2==c.length)d=c[0],e=c[1];else return null;if(""==d){if(1<Ba(a.a,function(a){return a==e}))throw Error("multiple Subjects have Parameter "+e);b=wa(a.a,e)}else b=wa(a.f,b);return-1<b?a.g[b].Mb(e):null}Ke.prototype.T=function(){var a=H(void 0);return Ca(this.c,function(b){return b.getName()==a})};
function Pe(a,b,c,d){b=1==b;var e=za(a.g,function(a,b){return a.Mb(this.a[b])},a),f=e;c||(f=ya(f,function(a){return!a.$a()}));f=ya(f,function(a){return E(this.h,a.T())==b},a);var h=/^[a-zA-Z0-9_]+$/;a=za(f,function(a){var b=H(a.getName()),c=wa(e,a),f=a.G();x(f)&&!h.test(f)&&(f='"'+f+'"');return!d&&this.w[c]?b+"="+f:H(a.T().getName())+"."+b+"="+f},a);return 0<a.length?a.join(";")+";":""}
function Oe(a){var b=Pe(a,!1).split(";");b=Ia(b,Pe(a,!0).split(";"));var c=Ia(a.s,a.i);Ha(b,function(a){return E(c,a)});return b.join(";")+(0<b.length?";":"")}function Ne(a){return window.location.href.replace(/\.html\?.*$/,".html")+"?"+ze(Oe(a))}
function Qe(a){var b=Aa(a.c,function(a,b){b=ya(b.getParameters(),function(a){return"DELETED"!=a.getName()});return a.concat(b)},[]);a.g=za(b,function(a){return a.T()});a.a=za(b,function(a){return H(a.getName())});a.f=za(b,function(a){return H(a.T().getName()+"."+a.getName())});a.w=za(a.a,function(a){return 1==Ba(this.a,function(b){return b==a})},a);a.i=Pe(a,!0).split(";")}
var Re={be:"share",Sd:"Press command-C to copy this URL to the clipboard, it will replicate this simulation with current parameters.",he:"WARNING: URL is longer than 2048 characters."};function Se(a,b,c){this.b=a||0;this.c=b||0;this.a=void 0===c?J:c}Se.prototype.toString=function(){return""};function Te(a){var b=a.b+a.c;isNaN(a.a)||(b+=a.a);return b};var Ue={zb:"potential energy",Tc:"translational energy",wb:"kinetic energy",Lc:"rotational energy",Rc:"total",Sc:"total energy"};function Ve(a){this.ha="10pt sans-serif";this.sa=a;this.a=Gc;this.w=this.f=this.b=0;this.c=10;this.o=2;this.i=!0;this.O="#666";this.da="#999";this.S="#ccc";this.B=$b();this.L=this.C=this.H=0;this.Z=1;this.N=hc;this.g=this.F=this.v=this.h=0;this.s=Array(12);this.u=0;this.j=Gc;this.A=!0;this.Y=0}g=Ve.prototype;g.toString=function(){return""};g.Ia=function(a){return Bc(this.a,a)};
g.Ja=function(a,b){if(!this.j.qa()){a.save();a.font=this.ha;a.textAlign="start";a.textBaseline="alphabetic";var c=We(this.sa),d=c.c,e=c.b,f=c.a,h=Xe.Tc+",";isNaN(f)&&(h=Xe.wb+",");var k=58/b.b;if(this.A||this.a.qa()||I(k,this.a.J())){var l=this.a.qa()?this.j.$():this.a.$(),m=l-k;l>this.j.$()||k>this.j.J()?(l=this.j.$(),m=l-k):m<this.j.b&&(m=this.j.b,l=m+k);this.a=new O(this.j.fa(),m,this.j.a,l);this.i=!0;this.A=!1}this.f=oe(b,this.a.fa())+10;this.w=oe(b,this.a.a);k=this.w-this.f;b=pe(b,this.a.$());
a.fillStyle="rgba(255,255,255,0.75)";a.fillRect(this.f-10,b,k+10,58);this.g=d+e+(isNaN(f)?0:f);this.F=0>e?e:0;.3<$b()-this.N&&(this.N=$b(),this.L=this.C,this.C=Te(c));c=this.F;d=$b();1<d-this.H?(this.H=d,++this.u>=this.s.length&&(this.u=0),this.s[this.u]=c):this.F<this.s[this.u]&&(this.s[this.u]=c);12<d-this.B?(this.B=d,c=!0):c=!1;l=d=0;for(m=this.s.length;l<m;l++)this.s[l]<d&&(d=this.s[l]);this.h=d;-1E-6>this.h?(this.b+Math.floor(.5+this.h*this.c)<this.f-10&&(this.i=!0),c&&-this.h*this.c<.2*(this.b-
this.f)&&(this.i=!0)):1E-6<this.h?this.b>this.f&&(this.i=!0):c&&10<this.b-this.f&&(this.i=!0);this.g>this.v&&(this.v=this.g);1E-12<this.g?(this.b+this.g*this.c>this.w&&(this.i=!0),this.w-this.b>.2*(this.b-this.f)&&this.g*this.c<.2*(this.w-this.b)&&(this.i=!0,this.v=this.g)):-1E-12>this.g&&c&&(0>this.v&&this.b<this.w&&(this.i=!0),this.v=this.g);this.i&&(this.B=$b(),this.i=!1,c=0<this.g?this.g:0,c-=this.h,1E-16>c&&(c=1),this.c=c*this.c>k?.75*k/c:.95*k/c,this.b=-1E-12>this.h?this.f+Math.floor(.5+this.c*
-this.h):this.f,k=Math.pow(10,Math.floor(Math.log(c)/Math.log(10))),c/=k,this.o=8<=c?2:5<=c?1:3<=c?.5:2<=c?.4:.2,this.o*=k);k=this.b;a.fillStyle=this.O;0>e?(e=Math.floor(.5-e*this.c),a.fillRect(k-e,b,e,10),k-=e):(e=Math.floor(.5+e*this.c),a.fillRect(k,b+10,e,10),k+=e);isNaN(f)||(e=Math.floor(.5+f*this.c),a.fillStyle=this.S,a.fillRect(k,b+10,e,10),k+=e);e=this.b+Math.floor(.5+this.g*this.c)-k;a.fillStyle=this.da;a.fillRect(k,b+10,e,10);e=this.f;b+=10;k=(this.w-this.b)/this.c;if(1E-18<Math.abs(k)&&
1E-18<this.o){a.fillStyle="#000";a.strokeStyle="#000";c=0;do d=this.b+Math.floor(c*this.c),a.beginPath(),a.moveTo(d,b+5),a.lineTo(d,b+12),a.stroke(),l=Ye(c),m=a.measureText(l).width,a.fillText(l,d-m/2,b+25),c+=this.o;while(c<k+this.o+1E-16);if(-1E-12>this.h){c=-this.o;do d=this.b+Math.floor(c*this.c),a.beginPath(),a.moveTo(d,b+5),a.lineTo(d,b+12),a.stroke(),l=Ye(c),m=a.measureText(l).width,a.fillText(l,d-m/2,b+25),c-=this.o;while(c>this.h&&d>=e)}}e=b+33;b=this.f;b=Ze(a,Xe.zb+",",this.O,b,e);isNaN(f)||
(b=Ze(a,Xe.Lc+",",this.S,b,e));b=Ze(a,h,this.da,b,e);f=Xe.Rc+" ";h=this.C;k=Math.abs(h-this.L);1E-15<k&&(k=-Math.floor(Math.log(k)/Math.log(10)),k=0<k?k:1,this.Z=20>k?k:20);k=Math.abs(h);h=0>h?"-":"+";f+=1E-6>k?h+k.toExponential(5):h+k.toFixed(this.Z);a.fillStyle="#000";a.fillText(f,b,e+12);a.restore()}};function Ze(a,b,c,d,e){a.fillStyle=c;a.fillRect(d,e,10,10);d+=13;c=a.measureText(b).width;a.fillStyle="#000";a.fillText(b,d,e+12);return d+(c+5)}g.pa=function(){return[]};g.Ba=function(){return[]};
g.Ka=function(){return this.a.qa()?new L(0,0):Cc(this.a)};g.W=function(){return this.Y};g.Ca=function(){return!0};
function Ye(a){var b=Math.abs(a);1E-16>b?b="0":.001>b?(b=b.toExponential(3),b=b.replace(/\.0+([eE])/,"$1"),b=b.replace(/(\.\d*[1-9])0+([eE])/,"$1$2")):10>b?(b=b.toFixed(4),b=b.replace(/\.0+$/,""),b=b.replace(/(\.\d*[1-9])0+$/,"$1")):100>b?(b=b.toFixed(3),b=b.replace(/\.0+$/,""),b=b.replace(/(\.\d*[1-9])0+$/,"$1")):1E3>b?(b=b.toFixed(2),b=b.replace(/\.0+$/,""),b=b.replace(/(\.[1-9])0$/,"$1")):1E4>b?b=b.toFixed(0):(b=b.toExponential(3),b=b.replace(/\.0+([eE])/,"$1"),b=b.replace(/(\.\d*[1-9])0+([eE])/,
"$1$2"));return 0>a?"-"+b:b}g.ya=function(a){if(this.a.qa())this.a=new O(-5,a.l()-.5,5,a.l()+.5);else{var b=this.a.J()/2;this.a=new O(this.a.fa(),a.l()-b,this.a.a,a.l()+b)}};function $e(a,b){a.j=b;a.A=!0}g.ka=function(a){this.Y=t(a)?a:0};var af={Nc:"show energy",zb:"potential",Tc:"translational",wb:"kinetic",Lc:"rotational",Rc:"total"},Xe=af;function bf(a,b){mc(a,this);this.a=b}bf.prototype.toString=function(){return""};bf.prototype.X=function(a){this.a(a)};function cf(a){this.a=a}cf.prototype.toString=function(){return""};cf.prototype.V=function(){return this.a};function df(){this.b=[];this.a=!1}df.prototype.toString=function(){return""};df.prototype.ea=function(a){if(this.a)throw Error("addMemo during memorize");E(this.b,a)||this.b.push(a)};df.prototype.la=function(){try{this.a=!0,C(this.b,function(a){a.la()})}finally{this.a=!1}};df.prototype.Va=function(a){if(this.a)throw Error("removeMemo during memorize");Fa(this.b,a)};var ef={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ff(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(gf.test(c))return b.pc=hf(c),b.type="hex",b;a:{var d=a.match(jf);if(d){c=Number(d[1]);var e=Number(d[2]);d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length){e=c[0];a=c[1];c=c[2];e=Number(e);a=Number(a);c=Number(c);if(e!=(e&255)||a!=(a&255)||c!=(c&255))throw Error('"('+e+","+a+","+c+'") is not a valid RGB color');e=kf(e.toString(16));a=kf(a.toString(16));c=kf(c.toString(16));b.pc="#"+
e+a+c;b.type="rgb";return b}if(ef&&(c=ef[a.toLowerCase()]))return b.pc=c,b.type="named",b;throw Error(a+" is not a valid color string");}var lf=/#(.)(.)(.)/;function hf(a){if(!gf.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(lf,"#$1$1$2$2$3$3"));return a.toLowerCase()}var gf=/^#(?:[0-9a-f]{3}){1,2}$/i,jf=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function kf(a){return 1==a.length?"0"+a:a};function mf(a,b){this.b=null!=a?a:new od("proto");this.a=null!=b?b:null;this.F=isFinite(this.b.a)&&0<Ka(this.b.C).length;this.f=nf(this);this.c=of(this.f)}g=mf.prototype;g.toString=function(){return""};g.Ia=function(a){a=nd(this.b,a);var b=this.b;b=new O(b.ia(),b.ma(),b.Sa(),b.Ga());return Bc(b,a)};
function of(a){if(!x(a)||""==a)return!1;var b=a.match(/^rgba\((.*),\s*\d*\.?\d+\)/);null!=b&&(a="rgb("+b[1]+")");a=ff(a).pc;a=hf(a);var c=[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)];a=c[0];b=c[1];var d=c[2];c=Math.max(Math.max(a,b),d);var e=Math.min(Math.min(a,b),d);if(e==c)e=a=0;else{var f=c-e;e=f/c;a=60*(a==c?(b-d)/f:b==c?2+(d-a)/f:4+(a-b)/f);0>a&&(a+=360);360<a&&(a-=360)}a=[a,e,c];return.65>a[2]||.57<a[1]&&.11>Math.abs(a[0]-.677)}
g.Ja=function(a,b){a.save();var c=1/b.a,d=Zc(b.i,fd(this.b));cd(d,a);this.b.cd(a);pf(this)&&a.clip();var e=nf(this);e&&(a.fillStyle=e,a.fill());var f=qf(this);if(f){a.lineWidth=rf(this)/b.a;var h=sf(this);0<h.length&&ma(a.setLineDash)&&(h=za(h,function(a){return a/b.a}),a.setLineDash(h));a.strokeStyle=f;a.stroke();a.setLineDash([])}f=tf(this);h=uf(this);if(null!=f||null!=h)a.translate(this.b.ia(),this.b.Ga()),a.scale(c,-c),Yc(vf(this),a),null!=f&&a.drawImage(f,0,0),null!=h&&h(a);if(this.b.a!=K){cd(d,
a);this.f!==e&&(this.f=e,this.c=of(e));e=1/b.a;a.lineWidth=e;if(wf(this)){f=this.b.c;a.strokeStyle=this.c?"#ccc":"black";h=.2*Math.min(this.b.I(),this.b.J());var k=8*e;h>k&&(h=k);a.beginPath();a.moveTo(f.m()-h,f.l());a.lineTo(f.m()+h,f.l());a.stroke();a.beginPath();a.moveTo(f.m(),f.l()-h);a.lineTo(f.m(),f.l()+h);a.stroke()}if(xf(this)){var l=4*e;e=.15*Math.min(this.b.I(),this.b.J());e<l&&(l=e);C(Ka(this.b.C),function(b){a.fillStyle=this.c?"#ccc":"gray";a.beginPath();a.arc(b.m(),b.l(),l,0,2*Math.PI,
!1);a.closePath();a.fill()},this)}}yf(this)&&(e=this.b.Kb(),d=d.translate(e),(e=zf(this))&&(d=bd(d,e)),d=d.scale(c,-c),cd(d,a),a.fillStyle=Af(this),a.font=yf(this),a.textAlign="center",a.fillText(this.b.getName(!0),0,a.measureText("M").width/2));a.restore()};function sf(a){return void 0!==a.j?a.j:null!=a.a?sf(a.a):[]}function wf(a){return void 0!==a.o?a.o:null!=a.a?wf(a.a):!1}function xf(a){return void 0!==a.s?a.s:null!=a.a?xf(a.a):!1}
function nf(a){return void 0!==a.g?a.g:null!=a.a?nf(a.a):"lightGray"}function tf(a){return void 0!==a.B?a.B:null!=a.a?tf(a.a):null}function vf(a){return void 0!==a.w?a.w:null!=a.a?vf(a.a):dd}function pf(a){return void 0!==a.u?a.u:null!=a.a?pf(a.a):!1}function uf(a){return void 0!==a.v?a.v:null!=a.a?uf(a.a):null}g.Ba=function(){return[this.b]};function Af(a){return void 0!==a.C?a.C:null!=a.a?Af(a.a):"black"}function yf(a){return void 0!==a.L?a.L:null!=a.a?yf(a.a):""}
function zf(a){return void 0!==a.H?a.H:null!=a.a?zf(a.a):0}g.Ka=function(){return this.b.b};g.pa=function(){return[this.b]};function qf(a){return void 0!==a.i?a.i:null!=a.a?qf(a.a):""}function rf(a){return void 0!==a.A?a.A:null!=a.a?rf(a.a):1}g.W=function(){return void 0!==this.h?this.h:null!=this.a?this.a.W():0};g.Ca=function(){return this.F};function Bf(a,b){a.g=b;return a}g.ya=function(a){this.b.aa(a)};g.ka=function(a){this.h=a};function Cf(a,b){this.a=null!=a?a:null;this.b=null!=b?b:null}g=Cf.prototype;g.toString=function(){return""};g.Ia=function(){return!1};
g.Ja=function(a,b){if(null!=this.a){var c=this.a;c=rc(c.ba(),c.P());if(!(1E-6>c||0==this.a.f)){a.save();a.lineWidth=Df(this);a.strokeStyle=c<this.a.a-1E-5?Ef(this):Ff(this);if(1===Gf(this)){b=b.i;var d=this.a.P(),e=this.a.ba();b=b.translate(d.m(),d.l());b=bd(b,Math.atan2(e.l()-d.l(),e.m()-d.m()));c=b=b.scale(c/6,this.I()/.5);a.beginPath();d=ad(c,0,0);a.moveTo(d.m(),d.l());$c(c,.375,0,a);$c(c,.75,.25,a);for(d=1;3>=d;d++)$c(c,1.5*d,-.25,a),$c(c,.375*(4*d+2),.25,a);$c(c,5.625,0,a);$c(c,6,0,a)}else d=
ne(b,this.a.P()),e=ne(b,this.a.ba()),a.beginPath(),a.moveTo(d.m(),d.l()),a.lineTo(e.m(),e.l());a.stroke();a.restore()}}};function Ef(a){return void 0!==a.h?a.h:null!=a.b?Ef(a.b):"red"}function Ff(a){return void 0!==a.i?a.i:null!=a.b?Ff(a.b):"green"}function Gf(a){return void 0!==a.j?a.j:null!=a.b?Gf(a.b):1}g.Ba=function(){return[]};g.Ka=function(){return null==this.a?N:xc(this.a.P().add(this.a.ba()),.5)};g.pa=function(){return null==this.a?[]:[this.a]};
function Df(a){return void 0!==a.f?a.f:null!=a.b?Df(a.b):4}g.I=function(){return void 0!==this.c?this.c:null!=this.b?this.b.I():.5};g.W=function(){return void 0!==this.g?this.g:null!=this.b?this.b.W():0};g.Ca=function(){return!1};g.ya=function(){};function Hf(a){var b=new Cf;b.f=a;return b}g.ka=function(a){this.g=a};function If(a){T.call(this,a||"DISPLAY_LIST_"+Jf++);this.a=[]}p(If,T);g=If.prototype;g.toString=function(){return""};g.add=function(a){if(!na(a))throw Error("non-object passed to DisplayList.add");var b=a.W();Kf(this);for(var c=0,d=this.a.length;c<d&&!(b<this.a[c].W());c++);Ma(this.a,c,0,a);S(this,new P(this,"OBJECT_ADDED",a))};g.xd=function(a){if(!na(a))throw Error("non-object passed to DisplayList.contains");return E(this.a,a)};function Lf(a,b,c){Kf(a);C(a.a,function(a){a.Ja(b,c)})}
function Mf(a,b){if(y(b)){var c=a.a.length;if(0>b||b>=c)return null;Kf(a);return a.a[b]}if(x(b)){var d=H(b);return Ca(a.a,function(a){a=a.pa();for(var b=0,c=a.length;b<c;b++)if(a[b].getName()==d)return!0;return!1})}return na(b)?Ca(a.a,function(a){return E(a.pa(),b)}):null}g.get=function(a){var b=this.a.length;if(0>a||a>=b)throw Error(a+" is not in range 0 to "+(b-1));Kf(this);return this.a[a]};g.length=function(){return this.a.length};
function Nf(a,b){if(!na(b))throw Error("non-object passed to DisplayList.add");var c=b.W();Kf(a);for(var d=a.a.length;0<d&&!(c>a.a[d-1].W());d--);Ma(a.a,d,0,b);S(a,new P(a,"OBJECT_ADDED",b))}g.remove=function(a){if(!na(a))throw Error("non-object passed to DisplayList.remove");var b=wa(this.a,a);-1<b&&(Ga(this.a,b),S(this,new P(this,"OBJECT_REMOVED",a)))};
function Kf(a){for(var b=!0,c=hc,d=0,e=a.a.length;d<e;d++){var f=a.a[d].W();if(f<c){b=!1;break}c=f}b||Qa(a.a,function(a,b){a=a.W();b=b.W();return a<b?-1:a>b?1:0})}var Jf=1;function Of(a,b){T.call(this,b);this.a=a;a.contentEditable=!1;this.g=[];this.h=new df;this.f=null;this.c=1;this.b="";this.D(new Q(this,Pf.ua,Qf.ua,z(this.I,this),z(this.df,this)));this.D(new Q(this,Pf.ra,Qf.ra,z(this.J,this),z(this.cf,this)));this.D(new Q(this,Pf.ALPHA,Qf.ALPHA,z(this.pe,this),z(this.Wa,this)));this.D(new Qc(this,Pf.ab,Qf.ab,z(this.se,this),z(this.La,this)))}p(Of,T);g=Of.prototype;g.toString=function(){return""};g.ea=function(a){this.h.ea(a)};
function Rf(a,b){if(0<a.I()&&0<a.J()){var c=new ee(a.I(),a.J());Sf(b,c)}a.g.push(b);a.ea(b);S(a,new P(a,"VIEW_ADDED",b));S(a,new P(a,"VIEW_LIST_MODIFIED"));if(null==a.f){if(null!=b&&!E(a.g,b))throw Error("cannot set focus to unknown view "+b);a.f!=b&&(a.f=b,S(a,new P(a,"FOCUS_VIEW_CHANGED",b)))}}g.pe=function(){return this.c};g.se=function(){return this.b};g.J=function(){return this.a.height};function Tf(a){return new ee(a.a.width,a.a.height)}g.I=function(){return this.a.width};g.la=function(){this.h.la()};
function Uf(a){var b=Tf(a);C(a.g,function(a){Sf(a,b)});S(a,new P(a,"SIZE_CHANGED"))}function Vf(a){if(null!=a.a.offsetParent){var b=a.a.getContext("2d");b.save();try{""!=a.b?(b.globalAlpha=a.c,b.fillStyle=a.b,b.fillRect(0,0,a.a.width,a.a.height),b.globalAlpha=1):b.clearRect(0,0,a.a.width,a.a.height),C(a.g,function(a){b.save();b.globalAlpha=a.C;Lf(a.h,b,a.g);b.restore()})}finally{b.restore()}}}g.Va=function(a){this.h.Va(a)};
g.Wa=function(a){I(this.c,a)&&(this.c=a,I(a,1)&&""==this.b&&this.La("white"),U(this,Pf.ALPHA))};g.La=function(a){this.b!=a&&(this.b=a,U(this,Pf.ab))};g.cf=function(a){I(a,this.a.height)&&(this.a.height=a);Uf(this);U(this,Pf.ra)};function Wf(a,b,c){if(!y(b)||0>=b||!y(c)||0>=c)throw Error("bad size "+b+", "+c);a.a.width=b;a.a.height=c;Uf(a);U(a,Pf.ua);U(a,Pf.ra)}g.df=function(a){I(a,this.a.width)&&(this.a.width=a);Uf(this);U(this,Pf.ua)};
var Pf={ua:"width",ra:"height",ALPHA:"alpha",ab:"background"},Qf=Pf;function Xf(a){T.call(this,a||"CLOCK");this.j=this.h=$b();this.b=1;this.f=this.c=0;this.g=this.a=!1;this.i=[];this.D(new Q(this,Yf.Eb,Zf.Eb,z(this.Le,this),z(this.Cf,this)))}p(Xf,T);g=Xf.prototype;g.toString=function(){return""};function $f(a){C(a.i,function(a){a.cancel()})}function ag(a,b,c){C(a.i,function(a){a.a()>=b&&a.a()<=b+c&&a.b(0)})}g.Ib=function(){return this.a?($b()-this.j)*this.b:this.f};function bg(a){return a.a?($b()-a.h)*a.b:a.c}g.Le=function(){return this.b};
function cg(a){a.g=!1;a.a&&(a.c=bg(a),a.f=a.Ib(),$f(a),a.a=!1,S(a,new P(a,"CLOCK_PAUSE")))}function dg(a){a.g=!1;a.a||(a.a=!0,eg(a,a.c),fg(a,a.f),S(a,new P(a,"CLOCK_RESUME")))}g.pf=function(a){a.cancel();if(this.a){var b=bg(this)/this.b+this.h;var c=a.a()/this.b+this.h;I(c,b)?c>b&&a.b(c-b):a.c()}};function fg(a,b){a.a?a.j=$b()-b/a.b:a.f=b}function gg(a,b){var c=bg(a);I(c,b,.001)&&(eg(a,b),S(a,new P(a,"CLOCK_SET_TIME")))}function eg(a,b){a.a?(a.h=$b()-b/a.b,C(a.i,z(a.pf,a))):a.c=b}
g.Cf=function(a){if(I(this.b,a)){var b=bg(this),c=this.Ib();this.b=a;eg(this,b);fg(this,c);bg(this);this.Ib();U(this,Yf.Eb)}};var Yf={Eb:"time rate"},Zf=Yf;function hg(){this.i=!ma(requestAnimationFrame);this.c=void 0;this.h=null;this.o=z(this.j,this);this.a=0;this.b=!1;this.g=J;this.f=0}hg.prototype.toString=function(){return""};hg.prototype.j=function(){if(null!=this.h){var a=$b(),b=a-(this.g-this.f);b>=this.a&&(this.h(),this.g=a,this.f=0<this.a?b%this.a:0);this.c=this.i?setTimeout(this.o,0<this.a?Math.round(1E3*this.a):17):requestAnimationFrame(this.o)}};function ig(a){a.b||(a.b=!0,a.f=0,a.g=$b()-a.a-1E-7,a.j())}
function jg(a){a.b=!1;t(a.c)&&(a.i?clearTimeout(a.c):cancelAnimationFrame(a.c),a.c=void 0);a.g=NaN;a.f=0};function kg(a,b){T.call(this,b||"SIM_RUNNER");this.c=[a];this.f=a.v;this.i=0;this.g=!1;this.b=new hg;var c=this.i;if(0>c)throw Error();this.b.a=c;c=this.b;var d=z(this.ke,this);jg(c);c.h=d;this.a=new Xf((b?b+"_":"")+"CLOCK");a=a.a.R();gg(this.a,a);fg(this.a,a);mc(this.a,this);this.h=[];this.o=new df;this.j=[];this.D(Oc(new Q(this,lg.Fb,mg.Fb,z(this.Se,this),z(this.Te,this)),3));this.D(Oc(new Q(this,lg.Wb,mg.Wb,z(this.ve,this),z(this.sf,this)),3));this.D(new Kc(this,lg.Bb,mg.Bb,z(this.Ge,this),z(this.zf,
this)));this.D(new Kc(this,lg.Zb,mg.Zb,z(this.ye,this),z(this.tf,this)));this.D(new Kc(this,lg.dc,mg.dc,z(this.De,this),z(this.wf,this)))}p(kg,T);g=kg.prototype;g.toString=function(){return""};function ng(a,b){E(a.h,b)||(a.h.push(b),a.ea(b))}function og(a,b){E(a.j,b)||a.j.push(b)}g.ea=function(a){this.o.ea(a)};
g.ke=function(){try{if(this.a.a||this.a.g){var a=bg(this.a),b=this.c[0].a.R();if(a>b+1||a<b-1){var c=b+this.f;gg(this.a,c);fg(this.a,c);a=c}c=a;for(var d=0,e=this.c.length;d<e;d++)for(var f=this.c[d],h=c,k=f.a.R();k<h;){Qd(f,this.f,this);var l=k;k=f.a.R();if(1E-15>=k-l)throw Error("SimRunner: time did not advance");if(h-k<this.f)break}this.a.g?this.a.g=!1:(a=bg(this.a),b=this.c[0].a.R(),a-b>20*this.f&&gg(this.a,b))}pg(this)}catch(m){qg(this,m)}};g.ve=function(){return this.i};g.ye=function(){return this.b.b};
g.De=function(){return this.g};g.Ge=function(){return this.a.a};g.Se=function(){return this.f};function qg(a,b){rg(a);jg(a.b);C(a.j,function(a){a.c&&sg(a)});alert(mg.Zd+(null!=b?" "+b:""))}g.la=function(){this.o.la()};g.X=function(a){a.T()==this.a&&(a.K("CLOCK_RESUME")||a.K("CLOCK_PAUSE")?(a=this.c[0].a.R(),gg(this.a,a),fg(this.a,a),U(this,lg.Bb)):a.K("CLOCK_SET_TIME")&&this.la())};function pg(a){C(a.h,function(a){Vf(a)})}function rg(a){cg(a.a);return bg(a.a)}g.Va=function(a){this.o.Va(a)};
g.reset=function(){ig(this.b);cg(this.a);C(this.c,function(a){a.reset()});var a=this.c[0].a.R();gg(this.a,a);fg(this.a,a);pg(this);S(this,new P(this,"RESET"));return bg(this.a)};function tg(a){ig(a.b);dg(a.a);return bg(a.a)}function ug(a){C(a.c,function(a){vg(a.a)});return bg(a.a)}g.sf=function(a){this.i=a;if(0>a)throw Error();this.b.a=a;U(this,lg.Wb)};g.tf=function(a){a?ig(this.b):this.g||jg(this.b);U(this,lg.Zb)};g.wf=function(a){this.g=a;U(this,lg.dc)};g.zf=function(a){a?tg(this):rg(this)};
g.Te=function(a){this.f=a;U(this,lg.Fb)};g.qd=function(){var a=this.c[0].a.R()+this.f-bg(this.a),b=this.a;cg(b);b.g=!0;var c=b.c;b.c+=a;b.f+=a;S(b,new P(b,"CLOCK_STEP"));ag(b,c,a);ig(this.b);return bg(this.a)};var lg={Fb:"time step",Wb:"display period",Vd:"restart",Bb:"running",Zb:"firing",Pf:"pause",Qf:"resume",dc:"non-stop",Yd:"step",Zd:"Simulation is stuck; click reset and play to continue."},mg=lg;function wg(a,b){T.call(this,a);if(!(b instanceof O)||b.qa())throw Error("bad simRect: "+b);this.c=b;this.f=new ee(800,600);this.B=this.u="MIDDLE";this.s=1;this.h=new If;this.o=!0;this.C=1;this.g=ke(this.f,this.c,this.u,this.B,this.s);this.b=b.I();this.a=b.J();this.i=Dc(b);this.j=Ec(b);this.v=this.a/this.b;this.A=new df;this.D(new Q(this,xg.ua,yg.ua,z(this.I,this),z(this.gf,this)));this.D(new Q(this,xg.ra,yg.ra,z(this.J,this),z(this.yc,this)));this.D(Nc(new Q(this,xg.pb,yg.pb,z(this.ef,this),z(this.Pb,
this)),Number.NEGATIVE_INFINITY));this.D(Nc(new Q(this,xg.qb,yg.qb,z(this.ff,this),z(this.zc,this)),Number.NEGATIVE_INFINITY));this.D(new Kc(this,xg.hc,yg.hc,z(this.He,this),z(this.Ad,this)));this.D(new Qc(this,xg.mc,yg.mc,z(this.Ne,this),z(function(a){zg(this,he(a))},this),[ie.ae,ie.cc,ie.Fd,ie.$b,ie.kc],ge()));this.D(new Qc(this,xg.bc,yg.bc,z(this.Ae,this),z(function(a){Ag(this,ce(a))},this),[de.Kd,de.cc,de.Wd,de.$b,de.kc],be()));this.D(new Q(this,xg.Sb,yg.Sb,z(this.qe,this),z(this.qf,this)))}
p(wg,T);g=wg.prototype;g.toString=function(){return""};g.ea=function(a){this.A.ea(a)};g.qe=function(){return this.s};g.ef=function(){return this.i};g.ff=function(){return this.j};g.J=function(){return this.a};g.Ae=function(){return this.u};g.He=function(){return this.o};g.Ne=function(){return this.B};g.I=function(){return this.b};g.la=function(){this.A.la()};function Bg(a){var b=a.i-a.b/2,c=a.j-a.a/2;b=new O(b,c,b+a.b,c+a.a);Cg(a,b)}g.kf=function(){this.zc(this.j-.05*this.a)};
g.lf=function(){this.Pb(this.i-.05*this.b)};g.mf=function(){this.Pb(this.i+.05*this.b)};g.nf=function(){this.zc(this.j+.05*this.a)};function Dg(a){var b=ke(a.f,a.c,a.u,a.B,a.s);if(!(b instanceof je))throw Error("not a CoordMap: "+b);a.g=b;S(a,new P(a,"COORD_MAP_CHANGED"));a.b=a.c.I();a.a=a.c.J();a.i=Dc(a.c);a.j=Ec(a.c);a.v=a.a/a.b}g.Va=function(a){this.A.Va(a)};g.qf=function(a){I(this.s,a)&&(this.s=a,Dg(this),U(this,xg.Sb))};g.Pb=function(a){I(this.i,a)&&(this.i=a,Bg(this))};
g.zc=function(a){I(this.j,a)&&(this.j=a,Bg(this))};g.yc=function(a){I(this.a,a)&&(this.a=a,this.o&&(this.b=this.a/this.v),Bg(this))};function Ag(a,b){a.u=ce(b);Dg(a);U(a,xg.bc)}g.Ad=function(a){if(this.o!=a){if(this.o=a)this.v=this.a/this.b;U(this,xg.hc)}};function Sf(a,b){if(!(b instanceof ee))throw Error("not a ScreenRect: "+b);if(b.qa())throw Error("empty screenrect");a.f.Pa(b)||(a.f=b,Dg(a),S(a,new P(a,"SCREEN_RECT_CHANGED")))}
function Cg(a,b){if(!(b instanceof O))throw Error("not a DoubleRect: "+b);b.Pa(a.c)||(a.c=b,Dg(a),U(a,xg.ua),U(a,xg.ra),U(a,xg.pb),U(a,xg.qb),S(a,new P(a,"SIM_RECT_CHANGED")))}function zg(a,b){a.B=he(b);Dg(a);U(a,xg.mc)}g.gf=function(a){I(this.b,a)&&(this.b=a,this.o&&(this.a=this.b*this.v),Bg(this))};g.Kf=function(){this.yc(this.a/1.1)};g.Lf=function(){this.yc(1.1*this.a)};
var xg={hc:"scale X-Y together",ua:"width",ra:"height",pb:"center-x",qb:"center-y",mc:"vertical-align",bc:"horizontal-align",Sb:"aspect-ratio"},yg=xg;function Eg(a,b,c){this.b=a;this.c=this.b.G();this.g=b;this.f=c;this.a=document.createElement("button");this.a.type="button";this.a.className="icon";c.style.display=this.c?"block":"none";b.style.display=this.c?"none":"block";this.a.appendChild(b);this.a.appendChild(c);F(this.a,"click",this.h,!0,this);mc(this.b.T(),this)}Eg.prototype.toString=function(){return""};Eg.prototype.V=function(){return this.a};Eg.prototype.h=function(){Fg(this,!this.c)};Eg.prototype.X=function(a){a==this.b&&Fg(this,this.b.G())};
function Fg(a,b){a.c!=b&&(a.b.Nb(b),a.c=b,a.f.style.display=b?"block":"none",a.g.style.display=b?"none":"block")};function Gg(a,b){var c=new qe(a.c);b&&(se(c),te(c));new bf(a,function(b){b.K("COORD_MAP_CHANGED")&&(b=me(a.g,a.f),c.a=b)});a.h.add(c);return c}
function Hg(a){var b=[Ig.Hb,Ig.ob,Ig.$c,Ig.Fc,Ig.Zc,Ig.Ec],c=[Jg.Hb,Jg.ob,Jg.$c,Jg.Fc,Jg.Zc,Jg.Ec];c=za(c,function(a){return H(a)});b=new ic(b,c,function(){var b=a.b,e=a.c;if(""==b)return c[0];if("black"==b)if(I(e,1)){if(!I(e,.1))return c[3];if(!I(e,.05))return c[5]}else return c[1];else if("white"==b)if(I(e,1)){if(!I(e,.1))return c[2];if(!I(e,.05))return c[4]}else return c[0];return-1},function(b){switch(wa(c,b)){case 0:a.La("");a.Wa(1);break;case 1:a.La("black");a.Wa(1);break;case 2:a.La("white");
a.Wa(.1);break;case 3:a.La("black");a.Wa(.1);break;case 4:a.La("white");a.Wa(.05);break;case 5:a.La("black"),a.Wa(.05)}},Ig.ab);mc(a,b);return b}
function Kg(a,b){var c=Zb+"/",d=document.createElement("div");d.style.width="96px";var e=Rb(c+"up_gray.png");e=new ae("up",z(a.nf,a),e);e.a=100;d.appendChild(e.V());var f=document.createElement("div");f.style.width=d.style.width;e=Rb(c+"backward_gray.png");e=new ae("left",z(a.lf,a),e);e.a=100;f.appendChild(e.V());e=Rb(c+"target_gray.png");e=new ae("reset",b,e);f.appendChild(e.V());e=Rb(c+"forward_gray.png");e=new ae("right",z(a.mf,a),e);e.a=100;f.appendChild(e.V());var h=document.createElement("div");
e=Rb(c+"down_gray.png");e=new ae("down",z(a.kf,a),e);e.a=100;h.appendChild(e.V());h.style.width=d.style.width;b=document.createElement("div");b.appendChild(d);b.appendChild(f);b.appendChild(h);b.style.textAlign="center";d=document.createElement("div");e=Rb(c+"plus_gray.png");e=new ae("zoomIn",z(a.Kf,a),e);e.a=100;d.appendChild(e.V());d.appendChild(document.createElement("BR"));e=Rb(c+"minus_gray.png");e=new ae("zoomOut",z(a.Lf,a),e);e.a=100;d.appendChild(e.V());d.style.cssFloat="right";d.style.marginTop=
"18px";a=document.createElement("div");a.style.position="absolute";a.style.right="10%";a.style.bottom="12%";a.style.width="126px";a.appendChild(d);a.appendChild(b);a.style.display="none";return a}
function Lg(a){var b=Zb+"/",c=document.createElement("div");c.style.display="block";var d=Rb(b+"rewind.png");d=new ae(mg.Vd,z(a.reset,a),d);c.appendChild(d.V());d=Rb(b+"forward.png");var e=Rb(b+"pause.png");d=new Eg(Tc(a,lg.Bb),d,e);c.appendChild(d.V());d=Rb(b+"next.png");a=new ae(mg.Yd,z(a.qd,a),d);a.a=100;c.appendChild(a.V());return new cf(c)}
function Mg(a,b,c,d){a=new Ke(a,b);Me(a,"reset",function(){return c.reset()},"sets simulation to initial conditions");Me(a,"save",function(){return ug(c)},"saves simulation initial conditions");Me(a,"step",function(){return c.qd()},"advance simulation by a small time increment");Me(a,"pause",function(){return rg(c)},"pause simulation");Me(a,"resume",function(){return tg(c)},"resume simulation");return d.h=a}
function Ng(a,b,c){var d=b.h;b=new Kc(c,we.Cb,we.Cb,z(d.xd,d,a),function(b){b?d.add(a):d.remove(a);U(c,we.Cb)});c.D(b);new bf(d,function(b){b.G()==a&&U(c,we.Cb)});return b}function Og(a,b,c){var d=x(void 0)?void 0:af.Nc,e=x(void 0)?void 0:Xe.Nc,f=me(b.g,b.f);$e(a,f);var h=b.h;b=new Kc(c,d,e,z(h.xd,h,a),function(b){b?h.add(a):h.remove(a);U(c,d)});c.D(b);new bf(h,function(b){b.G()==a&&U(c,d)});return b}
function Pg(a,b){var c=new Kc(b,Jg.ec,Ig.ec,function(){return"none"!=a.style.display},function(c){a.style.display=c?"block":"none";U(b,Jg.ec)});b.D(c);return c}function Qg(a,b){if(!t(a))throw Error();return new ae(Re.be,function(){var c=Ne(a),d=Re.Sd;2048<c.length&&(d=d+"  "+Re.he);var e=b.b.b;e&&(b.g||jg(b.b));window.prompt(d,c);e&&ig(b.b)})}
var Jg={ec:"pan-zoom",ab:"background",Hb:"white",ob:"black",$c:"white with trails",Fc:"black with trails",Zc:"white with long trails",Ec:"black with long trails"},Ig=Jg;function Rg(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}Rg.prototype.a=8;Rg.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};Rg.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{Rg.BYTES_PER_ELEMENT=8}catch(a){}Rg.prototype.BYTES_PER_ELEMENT=Rg.prototype.a;Rg.prototype.set=Rg.prototype.set;Rg.prototype.toString=Rg.prototype.toString;ua("Float64Array",Rg)};function Sg(a,b){var c=y(void 0)?void 0:0;this.a=dc(a);this.b=dc(b);this.c=dc(c)}g=Sg.prototype;g.toString=function(){return""};g.add=function(a){this.a+=a.m();this.b+=a.l();this.c+=a.ca();return this};function Tg(a,b){var c=a.a-b.m(),d=a.b-b.l();a=a.c-b.ca();return c*c+d*d+a*a}function Ug(a){a.a/=2;a.b/=2;a.c/=2;return a}g.Pa=function(a){return null===a?!1:a.m()===this.a&&a.l()===this.b&&a.ca()===this.c};g.m=function(){return this.a};g.l=function(){return this.b};g.ca=function(){return this.c};
g.length=function(){return Math.sqrt(0===this.c?this.a*this.a+this.b*this.b:this.a*this.a+this.b*this.b+this.c*this.c)};function Vg(a,b){a.a*=b;a.b*=b;a.c*=b;return a}g.na=function(a,b){return I(this.a,a.m(),b)||I(this.b,a.l(),b)||I(this.c,a.ca(),b)?!1:!0};function Wg(a,b){a.a=b.m();a.b=b.l();a.c=b.ca();return a}function Xg(a,b){a.a-=b.m();a.b-=b.l();a.c-=b.ca()};function Yg(a,b){for(var c=0,d=0;d<b;d++)a[d]&&c++;return c}
function Zg(a,b,c){var d;if(2>c.length)throw Error("");if(3!=a.length)throw Error("");var e=Array(3);for(d=0;3>d;d++)e[d]=b(a[d]);e[0]>e[1]&&$g(e,a,0,1);e[1]>e[2]&&$g(e,a,1,2);e[0]>e[1]&&$g(e,a,0,1);d=new Sg(0,0);for(var f=new Sg(0,0),h=new Sg(0,0),k=new Sg(0,0),l=new Sg(0,0),m=new Sg(0,0),n=0;1E-6<ah(a);){n++;if(1E4<n)return c[0]=n,c[1]=1,pc(a[0]);Ug(Wg(d,a[0]).add(a[1]));Xg(Vg(Wg(f,d),2),a[2]);var q=b(f);if(q<e[1])if(q>=e[0])e[2]=q,Wg(a[2],f),$g(e,a,1,2);else{Xg(Vg(Wg(h,f),2),d);var r=b(h);r<q?
(e[2]=r,Wg(a[2],h)):(e[2]=q,Wg(a[2],f));$g(e,a,1,2);$g(e,a,0,1)}else Ug(Wg(k,a[2]).add(d)),q=b(k),Wg(m,Ug(a[2])),Xg(Vg(Wg(l,d),1.5),m),r=b(l),q<e[2]&&q<r?(e[2]=q,Wg(a[2],k),e[2]<e[1]&&$g(e,a,1,2),e[1]<e[0]&&$g(e,a,0,1)):r<e[2]?(e[2]=r,Wg(a[2],l),e[2]<e[1]&&$g(e,a,1,2),e[1]<e[0]&&$g(e,a,0,1)):(Ug(a[1].add(a[0])),Ug(a[2].add(a[0])),e[1]=b(a[1]),e[2]=b(a[2]),e[0]>e[1]&&$g(e,a,0,1),e[1]>e[2]&&$g(e,a,1,2),e[0]>e[1]&&$g(e,a,0,1))}c[0]=n;c[1]=0;return pc(a[0])}
function bh(a,b,c,d){var e=a.m();a=a.l();var f=b.m();b=b.l();var h=c.m();c=c.l();var k=d.m(),l=d.l();var m=e>f?e:f;if(h>m&&k>m)return null;m=e<f?e:f;if(h<m&&k<m)return null;m=a>b?a:b;if(c>m&&l>m)return null;m=a<b?a:b;if(c<m&&l<m)return null;if(1E-16>Math.abs(f-e)){if(1E-16>Math.abs(k-h))return null;var n=e;d=(l-c)/(k-h)*(n-h)+c;b<a&&(m=a,a=b,b=m);k<h&&(m=h,h=k,k=m);l<c&&(m=c,c=l,l=m);return a-1E-14<=d&&d<=b+1E-14&&h-1E-14<=n&&n<=k+1E-14&&c-1E-14<=d&&d<=l+1E-14?new L(n,d):null}if(1E-16>Math.abs(k-
h))return n=h,d=(b-a)/(f-e)*(n-e)+a,b<a&&(m=a,a=b,b=m),f<e&&(m=e,e=f,f=m),l<c&&(m=c,c=l,l=m),e-1E-14<=n&&n<=f+1E-14&&a-1E-14<=d&&d<=b+1E-14&&c-1E-14<=d&&d<=l+1E-14?new L(n,d):null;m=(b-a)/(f-e);n=(l-c)/(k-h);if(1E-16>Math.abs(n-m))return null;1E-16>Math.abs(n)?(d=(c+l)/2,n=(d-a)/m+e):1E-16>Math.abs(m)?(d=(a+b)/2,n=(d-c)/n+h):(n=(n*h-m*e-c+a)/(n-m),d=m*(n-e)+a);b<a&&(m=a,a=b,b=m);f<e&&(m=e,e=f,f=m);k<h&&(m=h,h=k,k=m);l<c&&(m=c,c=l,l=m);return e-1E-14<=n&&n<=f+1E-14&&a-1E-14<=d&&d<=b+1E-14&&h-1E-14<=
n&&n<=k+1E-14&&c-1E-14<=d&&d<=l+1E-14?new L(n,d):null}function ah(a){var b=Tg(a[0],a[1]),c=Tg(a[0],a[2]);c>b&&(b=c);c=Tg(a[1],a[2]);c>b&&(b=c);return Math.sqrt(b)}function ch(a,b){a+=" [";for(var c=0,d=b.length;c<d;c++)a+=b[c].toString()+", ";console.log(a+"]")}function dh(a,b,c){for(var d=b.length,e=Array(d),f=0;f<d;f++){for(var h=e[f]=0;h<d;h++)e[f]+=a[f][h]*b[h];c&&(e[f]+=-c[f])}return e}
function eh(a,b,c,d){var e=b.length,f,h,k,l=Array(e+1),m=Array(e);for(f=0;f<e;f++){d[f]=f;l[f]=f;for(h=m[f]=0;h<e;h++)Math.abs(a[f][h])>m[f]&&(m[f]=Math.abs(a[f][h]));if(1E-10>m[f])return f}l[e]=e;var n=0;f=0;a:for(;f<e;f++)for(k=0;;){var q=n;var r=Math.abs(a[d[q]][l[f]])/m[d[q]];for(h=n+1;h<e;h++){var w=Math.abs(a[d[h]][l[f]])/m[d[h]];w>r&&(r=w,q=h)}if(Math.abs(a[d[q]][l[f]])<c){if(k>=e-1-f)break a;r=l[f];for(h=f;h<e-1;h++)l[h]=l[h+1];l[e-1]=r;k++}else{d[n]!=d[q]&&(r=d[n],d[n]=d[q],d[q]=r);for(h=
n+1;h<e;h++)for(q=a[d[h]][l[f]]/a[d[n]][l[f]],k=0;k<e+1;k++)a[d[h]][l[k]]-=q*a[d[n]][l[k]];n++;break}}n--;if(n<e-1)for(f=n+1;f<e;f++)if(.1<Math.abs(a[d[f]][e]))return d[f];f=e-1;for(m=e;0<=n;){h=-1;for(k=f;k>=n;k--)Math.abs(a[d[n]][l[k]])>c&&(h=k);-1!=h&&h!=f&&(f=h);if(!(Math.abs(a[d[n]][l[f]])<c)){if(1<m-f)for(h=f+1;h<m;h++)b[l[h]]=0;m=f;k=0;for(h=f+1;h<e;h++)k+=a[d[n]][l[h]]*b[l[h]];b[l[f]]=(a[d[n]][e]-k)/a[d[n]][l[f]];f--}n--}return-1}
function fh(a,b,c){for(var d=K,e=0,f=0;f<b;f++){var h=Math.abs(a[c[f]][f]);h<d&&(d=h);h>e&&(e=h)}return.002>Math.abs(d)}function gh(a,b,c){if(a==J||b==J)throw Error();a=a==K?0<b?b:a:b==K?0<a?a:b:0<a&&0<b?a<b?a:b:0>a?-a:-b;return a==K?c:2*a*Math.sqrt(2*c/a)}function $g(a,b,c,d){var e=a[c];a[c]=a[d];a[d]=e;a=b[c];b[c]=b[d];b[d]=a}function hh(a,b){for(var c=a.length,d=Array(c),e=0;e<c;e++)d[e]=a[e]+b[e];return d};function ih(a){this.B=!1;this.time=0;this.F=[];this.s=[];this.w=[];this.i=[];this.M=[];this.j=[];this.h=[];this.C=[];this.o=[];this.H=[];this.b=[];this.c=[];this.f=[];this.g=[];this.a=0;this.v=[];this.u=0;this.A=[];this.L=[];this.N=a}
function jh(a,b,c,d,e,f){a.B=!1;a.time=f;a.a=d.length;if(1==a.a)return c[0]=e[0]||0>d[0]?-d[0]/b[0][0]:0,-1;a.o=b;a.H=d;a.i=c;a.g=e;a.M.length<a.a&&(b=a.a+10,a.M=G(b),a.b=Sb(b),a.c=Sb(b),a.f=Sb(b),a.h=G(b),a.j=G(b),a.C=Sb(b));Ea(a.F);b=0;a.A=[];a.L=[];for(c=0;c<a.a;c++)a.i[c]=0,a.M[c]=a.H[c],a.c[c]=!1,a.b[c]=!1,a.f[c]=!1;for(c=0;;){c++;a:{d=a;var h=kh(d.N,d.a);for(f=0;f<d.a;f++)if(e=h[f],d.g[e]&&!d.b[e]&&!d.c[e]&&!d.f[e]){d=e;break a}h=K;f=-1;for(e=0;e<d.a;e++)!(d.g[e]||d.b[e]||d.c[e]||d.f[e])&&d.M[e]<
h&&(h=d.M[e],f=e);if(-1<f)d=f;else{f=0;h=-1;for(e=0;e<d.a;e++)d.f[e]&&!E(d.F,e)&&(!d.g[e]&&d.M[e]<-f||d.g[e]&&Math.abs(d.M[e])>f)&&(f=Math.abs(d.M[e]),h=e);d=-1<h&&1E-8<f?h:-1}}if(0>d)break;a.f[d]&&a.F.push(d);a:{var k;e=a;f=d;var l=e.B;for(h=0;h<e.a;h++)if(!e.b[h]&&!e.c[h]&&!e.f[h]){e=!1;break a}var m=[];for(h=0;h<e.a;h++)m.push(e.b[h]?1:e.c[h]?2:3);m.push(f);l&&ch("checkLoop state",m);f=!1;h=0;for(k=e.A.length;h<k;h++){var n=e.A[h];l&&ch("state",m);Ra(m,n)&&(f=!0)}if(!f){e.A.push(m);h=e.M;for(m=
l=0;m<e.a;m++)if(e.g[m]||0>h[m])l+=h[m]*h[m];e.L.push(l)}e=f}if(e)break;e=lh(a,d);if(-1<e)a.b[e]=!1,a.c[e]=!1,a.f[e]=!0;else{if(-1>e)return e;Ea(a.F);a.f[d]&&(b++,a.f[d]=!1)}}return-1}function mh(a){return nh(a.i,a.M,a.g)?!0:!1}function nh(a,b,c){var d=a.length,e;if(b.length<d)throw Error();var f=!0;for(e=0;e<d;e++)c[e]||1E-10<Math.abs(a[e])?1E-4<Math.abs(b[e])&&(f=!1):-1E-4>b[e]&&(f=!1);return f}
function lh(a,b){var c;if(!a.g[b]&&-1E-10<=a.M[b]||a.g[b]&&1E-10>=Math.abs(a.M[b]))return a.c[b]=!0,-1;var d,e=Yg(a.b,a.a);e+=1;var f=oh(a,e),h=0;for(d=0;d<a.a;d++)if(a.b[d]||d==b){var k=0;for(c=0;c<a.a;c++)if(a.b[c]||c==b)f[h][k]=a.o[d][c],k++;f[h][e]=1;h++}d=G(e);c=G(e);eh(f,c,1E-9,d);if(c=(c=fh(f,e,d))&&!a.f[b])return b;for(c=0;c<a.a;c++)a.h[c]=0,a.j[c]=0,a.C[c]=!1;e=1E-10;for(f=0;!a.g[b]&&a.M[b]<-e||a.g[b]&&Math.abs(a.M[b])>e;){a:{var l;d=a;var m=b;for(l=0;l<d.a;l++)d.j[l]=0;d.j[m]=1;c=Yg(d.b,
d.a);if(0<c){h=oh(d,c);if(null==d.v||d.v.length<c)d.v=G(c+10);var n=0;for(l=0;l<d.a;l++)if(d.b[l]){var q=0;for(k=0;k<d.a;k++)d.b[k]&&(h[n][q]=d.o[l][k],q++);h[n][c]=-d.o[l][m];d.v[n]=-d.o[l][m];n++}k=G(c);ph(c,c+1,h,d.w);for(l=1E-9;;){n=G(c);if(-1!=eh(h,k,l,n)){d=-999999;break a}n=dh(d.w,k,d.v);m=void 0;q=0;m=m||n.length;for(var r=0;r<m;r++)Math.abs(n[r])>q&&(q=Math.abs(n[r]));if(1E-7>q)break;else if(l/=10,ph(c,c+1,d.w,h),1E-17>l)break}for(l=n=0;l<d.a;l++)d.b[l]&&(d.j[l]=k[n++])}for(l=0;l<d.a;l++)for(k=
d.h[l]=0;k<d.a;k++)d.h[l]+=d.o[l][k]*d.j[k];d=-1}if(-1!=d)return d;h=a;k=K;h.g[b]&&0<h.M[b]&&(k=hc);l=-1;h.g[b]?(l=b,k=-h.M[b]/h.h[b]):0<h.h[b]&&(l=b,k=-h.M[b]/h.h[b]);n=0<k?1:-1;for(c=0;c<h.a;c++)!h.g[c]&&h.b[c]&&-1E-14>h.j[c]*n&&(d=-h.i[c]/h.j[c],0>d*n&&(2E-10<Math.abs(h.i[c])&&(h.B=!0),d=0),d*n<k*n&&(k=d,l=c));for(c=0;c<h.a;c++)h.c[c]&&(!h.g[c]&&-1E-14>h.h[c]*n||h.g[c]&&1E-14<Math.abs(h.h[c]*n))&&(d=-h.M[c]/h.h[c],0>d*n&&(2E-10<Math.abs(h.M[c])&&(h.B=!0),d=0),d*n<k*n&&(k=d,l=c));h.u=k;d=l;if(0>
d||1E5<Math.abs(a.u)){if(1E-10>Math.abs(a.i[b]))return b;if(1E-5>Math.abs(a.M[b])){e=1.1*Math.abs(a.M[b]);continue}return-2}1E-12>Math.abs(a.u)&&(a.C[d]&&(a.b[d]=!1,a.c[d]=!1,a.f[d]=!0),a.C[d]=!0);for(c=0;c<a.a;c++)a.i[c]+=a.u*a.j[c],a.M[c]+=a.u*a.h[c];if(f++>10*a.a&&f>1E3*a.a)throw Error("drive_to_zero() loopCtr="+f+" d="+b+" a[d]="+a.M[b]);if(a.c[d]){n=a;m=b;q=d;c=Yg(n.b,n.a);c+=2;h=oh(n,c);for(l=r=0;l<n.a;l++)if(n.b[l]||l==m||l==q){var w=0;for(k=0;k<n.a;k++)if(n.b[k]||k==m||k==q)h[r][w]=n.o[l][k],
w++;h[r][c]=1;r++}k=G(c);l=G(c);eh(h,l,1E-9,k);if(c=(c=fh(h,c,k))&&!a.f[d]){a.b[d]=!1;a.c[d]=!1;a.f[d]=!0;continue}}if(a.b[d])if(1E-10<Math.abs(a.M[d])){if(1E-9<Math.abs(a.i[d]))throw Error("moving C to NC but f[j]="+Tb(a.i[d]));a.b[d]=!1;a.c[d]=!1;a.f[d]=!0}else a.b[d]=!1,a.c[d]=!0;else a.c[d]&&(1E-10<Math.abs(a.i[d])?(a.b[d]=!1,a.c[d]=!1,a.f[d]=!0):(a.b[d]=!0,a.c[d]=!1))}a.b[b]=1E-10<Math.abs(a.i[b]);a.c[b]=!a.b[b];return-1}
function oh(a,b){if(null==a.s||a.s.length<b){b=10*(2+b/10);a.s=Array(b);a.w=Array(b);for(var c=0;c<b;c++)a.s[c]=new Float64Array(b+1),a.w[c]=new Float64Array(b+1)}return a.s}function ph(a,b,c,d){for(var e=0;e<a;e++)for(var f=b,h=c[e],k=d[e],l=0;l<f;l++)k[l]=h[l]};function qh(){this.b=this.a=N;this.f=0;this.c=1}qh.prototype.toString=function(){return""};function rh(a,b){var c=b.m()-a.a.m();b=b.l()-a.a.l();return new L(a.b.m()+(c*a.c-b*a.f),a.b.l()+(c*a.f+b*a.c))}qh.prototype.set=function(a,b,c,d){this.a=a;this.b=b;this.f=c;this.c=d};function sh(a,b){var c=b.m()-a.b.m();b=b.l()-a.b.l();var d=-a.f,e=a.c;return new L(a.a.m()+(c*e-b*d),a.a.l()+(c*d+b*e))};function th(a,b,c){this.c=a;this.b=b;this.h=c;this.F=Math.max(a.h,b.h);this.B=c?0:this.F/2;c=Math.max(a.da,b.da);if(0>=c||1<c)throw Error("accuracy must be between 0 and 1, is "+c);this.Y=c*this.F/2;this.da=Math.max(a.O,b.O);this.O=Math.min(a.w,b.w);this.o=this.u=this.L=!1;this.g=N;this.f=J;this.a=Ac;this.Z=this.S=this.i=this.j=J;this.s="";this.ta=this.sa=this.w=this.v=J}g=th.prototype;g.toString=function(){return""};function Kd(a){return a.h||Math.abs(Ld(a))<a.da&&0<a.f&&a.f<a.F}
function Ld(a){if(isNaN(a.S)){var b=a.a,c,d=c=0,e=0,f=0;if(isFinite(a.c.a)){c=a.fb();d=c.m();c=c.l();var h=id(a.c),k=a.c.s;c=h.m()-k*c;d=h.l()+k*d}isFinite(a.b.a)&&(e=a.Za(),f=e.m(),e=e.l(),h=id(a.b),k=a.b.s,e=h.m()-k*e,f=h.l()+k*f);c=new L(c-e,d-f);a.S=tc(b,c)}return a.S}function uh(a){return M(a.g,a.c.b)}function vh(a){return M(a.g,a.b.b)}g.fb=function(){return uh(this)};g.Za=function(){return vh(this)};function wh(a,b){return a.c==b||a.b==b}g.Qa=function(){return!1};g.gb=function(){return!1};
function Yd(a){return a.h?!1:0>a.f||Ld(a)<-a.da&&a.f<a.B-a.Y?!0:!1}function xh(a,b){if(isFinite(a.v))throw Error("detectedTime_ already set "+a);a.v=b;var c=Ld(a);a.Z=c;a.w=J;!a.h&&-.001>c&&(a.w=b+(a.B-a.f)/c)}
g.Fa=function(a){if(!isFinite(this.f))throw Error("distance is NaN "+this);this.S=J;if((this.L||!Kd(this))&&0>Ld(this)){var b=this.v,c=this.f,d=Ld(this),e=this.Z,f=b-a;1E-12>=f||(e=(e-d)/f,1E-12>Math.abs(e)||(f=Math.sqrt(d*d-2*e*(c-this.B)),c=a+(-d+f)/e,d=a+(-d-f)/e,e=!1,c>a&&c<b&&(this.w=c,e=!0),d>a&&d<b&&(!e||d<c)&&(this.w=d)))}else this.w=J};function yh(){return["none","velocity","velocity_and_distance","velocity_joints","velocity_and_distance_joints"]}function zh(a){for(var b=yh(),c=0,d=b.length;c<d;c++)if(a===b[c])return b[c];throw Error("not found "+a);}var Ah={NONE:"none",Xa:"velocity",de:"velocity+distance",fe:"velocity (also joints)",ee:"velocity+distance (also joints)"};function Bh(){return"simultaneous;hybrid;serial grouped;serial grouped lastpass;serial separate;serial separate lastpass".split(";")}function Ch(a){for(var b=Bh(),c=0,d=b.length;c<d;c++)if(a==b[c])return b[c];throw Error("not found "+a);};function Dh(a,b,c,d,e,f){Hc.call(this,a);this.g=b;this.a=c;this.c=d;this.b=e;this.f=f}p(Dh,Hc);g=Dh.prototype;g.toString=function(){return""};g.ba=function(){return this.c.add(this.b)};g.P=function(){return this.c};g.wa=function(){return this.b};g.mb=function(a,b){return a instanceof Dh&&a.getName()==this.getName()&&this.c.na(a.P(),b)&&!I(this.a,a.a,b)&&this.b.na(a.wa(),b)?this.f.na(a.f,b):!1};function Eh(a,b,c){this.g=b;this.c=c;this.w=xc(this.g.a.add(this.c.a),.5);this.u=null;this.o=J;this.b=a;this.B=!1}Eh.prototype.toString=function(){return""};function Fh(a){isNaN(a.o)&&(a.o=1.25*a.od(a.w));return a.o}function Gh(a){null==a.u&&(a.u=V(a.b,a.w));return a.u}Eh.prototype.fd=function(){return[]};Eh.prototype.sc=function(a,b){var c=Gh(this),d=Gh(a);c=vc(M(c,d));a=Fh(a)+Fh(this)+b;return c<a*a};function Hh(a,b,c){a=a.Da(b);return b.add(xc(a,c))};function Ih(a,b){th.call(this,a.b,b.b,!1);this.N=a;this.H=b;this.A=this.C=null}p(Ih,th);g=Ih.prototype;g.toString=function(){return""};g.fb=function(){return null!=this.C?this.C:this.u?this.C=M(V(this.c,this.N.i),this.c.b):uh(this)};g.Za=function(){return null!=this.A?this.A:this.o?this.A=M(V(this.b,this.H.i),this.b.b):vh(this)};g.Qa=function(a){return null==a?!1:a==this.H||a==this.N};
g.Ac=function(a){if(!(wh(a,this.c)&&wh(a,this.b)&&a.Qa(this.H)&&a.Qa(this.N)))return!1;var b=gh(this.j,this.i,this.F);return vc(M(this.g,a.g))>b*b||.9>Math.abs(tc(this.a,a.a))?!1:!0};g.Fa=function(a){this.A=this.C=null;this.N.rc(this,this.H);th.prototype.Fa.call(this,a)};function Jh(a,b){var c=Kh(a);if(null==c)throw Error("CornerEdgeCollision: null edge; vertex="+a);th.call(this,c.b,b.b,!1);this.H=a;this.A=b;this.N=c;this.C=null;this.ha=a.f?Lh(a):null;this.j=Mh(a);this.u=!1}p(Jh,th);g=Jh.prototype;g.toString=function(){return""};g.Za=function(){if(null!=this.C)return this.C;if(this.o){nd(this.b,this.g);var a=this.A.ed();if(null!=a)return this.C=M(V(this.b,a),this.b.b)}return vh(this)};g.Qa=function(a){return null==a?!1:a==this.A||a==this.N||this.ha==a};
g.gb=function(a){return a==this.H};g.Ac=function(a){if(!wh(a,this.c)||!wh(a,this.b))return!1;if(a.gb(this.H))return!0;if(!a.Qa(this.A)||!a.Qa(this.N)&&!a.Qa(this.ha))return!1;var b=gh(this.j,this.i,this.F);return vc(M(this.g,a.g))>b*b||.9>Math.abs(tc(this.a,a.a))?!1:!0};g.Fa=function(a){this.C=null;var b=V(this.c,this.H.a);b=nd(this.b,b);var c=this.A.gd(b);null!=c&&(this.g=V(this.b,c[0]),this.a=jd(this.b,c[1]),this.f=this.A.Ya(b),th.prototype.Fa.call(this,a))};function Nh(a,b){if(null==b)throw Error();var c=[],d=!0;if(!b.h){if(!isFinite(b.f))throw Error("distance is NaN "+b);C(a,function(a){if(b.Ac(a)){var e=a.v,h=b.v;e>h+1E-14?d=!1:h>e+1E-14?c.push(a):b.f<a.f?c.push(a):d=!1}})}0<c.length&&C(c,function(b){Fa(a,b)});d&&a.push(b)}
function Oh(a,b,c,d){var e=nd(c,gd(b)),f=Ph(b);null!=f&&(f=ld(c,f));C(c.B,function(h){if(!Qh(Kh(h))||!Qh(Lh(h))){var k=nd(b,V(c,h.a)),l=k,m=0,n=b.i,q=c.i;if(null!=n&&null!=q)l=sh(n,rh(q,h.a)),m=qc(k,l);else if(null!=n||null!=q)throw Error("problem with old copy in checkVertexes");m=.01<m?Math.sqrt(m):.1;if(null!=f){if(n=tc(M(h.a,e),f),n>b.Ra()+b.h)return}else if(n=b.Ra()+b.h+m,q=n*n,n=vc(M(h.a,e)),n>q)return;Rh(a,b,h,k,l,m,d)}})}
function Sh(a,b,c){var d=Ph(a);if(null==d)throw Error();return tc(M(gd(b),gd(a)),d)<b.Ra()+a.Ra()+c}function Th(a,b,c,d,e,f){var h=new Jh(c,b);if(null==Kh(c))throw Error();c=b.b;h.f=b.Ya(e);e=V(c,d);h.g=e;d=jd(c,b.Da(d));h.a=d;h.i=b.Jb();h.o=isFinite(h.i);h.s="";xh(h,f);Nh(a,h)}
function Uh(a){var b,c=[];if(0==a.length)return c;c.push(a[0]);var d=[];var e=c[0];isFinite(e.c.a)&&d.push(e.c);null!=e.b&&isFinite(e.b.a)&&d.push(e.b);do{var f=c.length;var h=0;for(b=a.length;h<b;h++)e=a[h],E(c,e)||(E(d,e.c)?(c.push(e),isFinite(e.b.a)&&!E(d,e.b)&&d.push(e.b)):E(d,e.b)&&(c.push(e),isFinite(e.c.a)&&!E(d,e.c)&&d.push(e.c)))}while(f<c.length);return c}
function Vh(a,b,c,d,e){var f;if(0==a.length)return[];var h=[];h.push(b);var k=[];isFinite(b.c.a)&&k.push(b.c);isFinite(b.b.a)&&k.push(b.b);if(c)for(c=0,f=a.length;c<f;c++){var l=a[c];E(h,l)||l.h||!(d[c]<e)||l.c!=b.c&&l.b!=b.b&&l.c!=b.b&&l.b!=b.c||(h.push(l),E(k,l.c)||k.push(l.c),E(k,l.b)||k.push(l.b))}do for(b=h.length,c=0,f=a.length;c<f;c++)l=a[c],E(h,l)||(E(k,l.c)&&l.h?(h.push(l),isFinite(l.b.a)&&!E(k,l.b)&&k.push(l.b)):E(k,l.b)&&l.h&&(h.push(l),isFinite(l.c.a)&&!E(k,l.c)&&k.push(l.c)));while(b<
h.length);return h}function Rh(a,b,c,d,e,f,h){if(null==Kh(c))throw Error("");var k=b.h;if(!(d.m()<b.ia()-k&&e.m()<b.ia()||d.m()>b.Sa()+k&&e.m()>b.Sa()||d.l()<b.ma()-k&&e.l()<b.ma()||d.l()>b.Ga()+k&&e.l()>b.Ga()))for(;;){var l=null,m=null,n=K;C(b.g,function(b){if(!Qh(b)){var q=Fh(b)+k+f;qc(b.w,d)>q*q||(q=b.xc(d,e),null==q?c.f&&(q=b.dd(c,d,k),null!=q&&(xh(q,h),Nh(a,q))):C(q,function(a){var c=M(e,a).length();c<n&&(n=c,m=a,l=b)}))}});null!=l&&null!=m&&Th(a,l,c,m,d,h);break}};function Wh(a,b,c){var d=b.b,e=c.b;if(c.f||b.f){V(e,c.i);d=V(d,b.i);d=nd(e,d);d=Xh(c,d);var f=d.length();if(c.f&&b.f)a.f=f-(c.a+b.a);else if(!c.f&&b.f)a.f=c.a-b.a-f;else if(c.f&&!b.f)a.f=b.a-c.a-f;else throw Error();b=xc(d,1/f);d=Yh(c,xc(b,c.a));a.g=d;c.f||(b=xc(b,-1));a.a=jd(e,b)}}
function Zh(a,b,c,d,e,f,h,k){var l=new Ih(d,c);l.f=e;l.o=!0;l.u=!0;l.s="";f=xc(h,1/f);h=Yh(c,xc(f,c.a));l.g=h;c.f||(f=xc(f,-1));l.a=jd(c.b,f);l.j=(d.f?1:-1)*d.a;l.i=(c.f?1:-1)*c.a;a&&(l.j+=e/2,l.i+=e/2);xh(l,k);Nh(b,l)};function $h(a,b,c,d,e,f,h,k){var l=new Ih(d,c);l.o=!1;l.u=!0;l.j=d.a;l.i=K;a&&(l.j+=e);l.f=e;l.g=f;l.s="";l.a=jd(c.b,c.Da(h));xh(l,k);Nh(b,l)};function ai(a,b,c){this.a=a;this.f=t(b)?b:!0;this.c=t(c)?c:null;this.b=null;bi++}ai.prototype.toString=function(){return""};function W(a){return a.a.m()}function X(a){return a.a.l()}function Mh(a){var b=K;null!=a.c&&(b=a.c.Jb(),null!=a.b&&(a=a.b.Jb(),Math.abs(a)<Math.abs(b)&&(b=a)));return b}function Kh(a){if(null!=a.c)return a.c;throw Error();}function Lh(a){if(null!=a.b)return a.b;if(null!=a.c)return a.c;throw Error();}function ci(a,b){if(null==a.c)a.c=b;else throw Error();}var bi=1;function di(a,b){var c=Kh(a),d=Kh(b);if(null==c||null==d)throw Error("CornerCornerCollision: null edge; vertex="+a+"; normalVertex="+b);th.call(this,c.b,d.b,!1);this.C=a;this.A=b}p(di,th);di.prototype.toString=function(){return""};di.prototype.gb=function(a){return a==this.C||a==this.A};di.prototype.Ac=function(a){return wh(a,this.c)&&wh(a,this.b)?a.gb(this.C)||a.gb(this.A)?!0:!1:!1};
di.prototype.Fa=function(a){var b=V(this.c,this.C.a);b=nd(this.b,b);this.g=V(this.b,this.A.a);this.f=rc(this.A.a,b);if(!isFinite(this.f))throw Error();b=yc(M(b,this.A.a));if(null==b)throw Error();this.a=jd(this.b,b);th.prototype.Fa.call(this,a)};function ei(a,b,c,d){Eh.call(this,a,b,c);this.a=d;if(null==b.b)b.b=this;else throw Error();ci(c,this);this.B=!0}p(ei,Eh);g=ei.prototype;g.toString=function(){return""};g.rd=function(a){a.lineTo(W(this.c),X(this.c))};function fi(a,b,c,d){var e=rc(a.g.a,c);if(1E-6<=e&&e<=.6*d)return gi(a,a.g,b,c,e);e=rc(a.c.a,c);return 1E-6<=e&&e<=.6*d?gi(a,a.c,b,c,e):null}g.bd=function(){return 0};
g.Ya=function(a){var b=a.m();a=a.l();var c=W(this.g),d=W(this.c),e=X(this.g),f=X(this.c);1E-10>Math.abs(d-c)?a=this.a?b-c:c-b:1E-10>Math.abs(f-e)?a=this.a?a-e:e-a:(f=(f-e)/(d-c),d=(-e+a+b/f+f*c)/(1/f+f),c=e+f*(d-c),b-=d,e=a-c,b=Math.sqrt(b*b+e*e),a<c&&(b=-b),a=this.a?b:-b);if(isNaN(a))throw Error("");return a};
g.nc=function(a){var b=a.m();a=a.l();var c=W(this.g),d=W(this.c),e=X(this.g),f=X(this.c);if(1E-10>Math.abs(d-c))return e>f&&(a>e||a<f)||f>e&&(a>f||a<e)?K:this.a?b-c:c-b;if(1E-10>Math.abs(f-e))return c>d&&(b>c||b<d)||d>c&&(b>d||b<c)?K:this.a?a-e:e-a;var h=(f-e)/(d-c);f=(-e+a+b/h+h*c)/(1/h+h);e+=h*(f-c);if(c<d&&(f<c||f>d)||d<c&&(f<d||f>c))return K;b-=f;c=a-e;b=Math.sqrt(b*b+c*c);a<e&&(b=-b);return this.a?b:-b};
g.dd=function(a,b,c){var d=b.m(),e=b.l(),f=W(this.g),h=W(this.c),k=X(this.g),l=X(this.c);if(1E-10>Math.abs(h-f)){var m=(f+h)/2;if(k>l&&(e>k||e<l)||l>k&&(e>l||e<k))return fi(this,a,b,c);b=this.a?d-m:m-d;if(0>b||b>c)return null;a=new Jh(a,this);a.f=b;e=V(this.b,new L(m,e));a.g=e;e=jd(this.b,new L(this.a?1:-1,0));a.a=e;a.o=!1;a.i=K;a.s="";return a}if(1E-10>Math.abs(l-k)){l=(k+l)/2;if(f>h&&(d>f||d<h)||h>f&&(d>h||d<f))return fi(this,a,b,c);b=this.a?e-l:l-e;if(0>b||b>c)return null;a=new Jh(a,this);a.f=
b;e=V(this.b,new L(d,l));a.g=e;e=jd(this.b,new L(0,this.a?1:-1));a.a=e;a.o=!1;a.i=K;a.s="";return a}l=(l-k)/(h-f);m=(-k+e+d/l+l*f)/(1/l+l);k+=l*(m-f);if(f<h&&(m<f||m>h)||h<f&&(m<h||m>f))return fi(this,a,b,c);d-=m;b=e-k;b=Math.sqrt(d*d+b*b);e<k&&(b=-b);b=this.a?b:-b;if(0>b||b>c)return null;a=new Jh(a,this);a.f=b;e=V(this.b,new L(m,k));a.g=e;e=Math.sqrt(1+l*l);e=jd(this.b,new L(-l/e,1/e));this.a||(e=xc(e,-1));a.a=e;a.o=!1;a.i=K;a.s="";return a};
g.tc=function(){var a=X(this.g),b=X(this.c);return a<b?a:b};g.ed=function(){return null};g.Jb=function(){return K};g.uc=function(){var a=W(this.g),b=W(this.c);return a<b?a:b};g.Da=function(){var a=W(this.g),b=W(this.c),c=X(this.g),d=X(this.c);if(1E-10>Math.abs(b-a))return new L(this.a?1:-1,0);if(1E-10>Math.abs(d-c))return new L(0,this.a?1:-1);b=(d-c)/(b-a);a=Math.sqrt(1+b*b);b=-b/a;a=1/a;this.a||(b=-b,a=-a);return new L(b,a)};g.gd=function(a){var b=hi(this,a);a=this.Da(a);return[b,a]};
g.vc=function(){var a=W(this.g),b=W(this.c);return a>b?a:b};g.wc=function(){var a=X(this.g),b=X(this.c);return a>b?a:b};g.rc=function(a,b){b.B||b.rc(a,this)};g.xc=function(a,b){if(a==b)return null;a=bh(this.g.a,this.c.a,a,b);return null==a?null:[a]};g.sc=function(a,b){return a.B?!1:Eh.prototype.sc.call(this,a,b)};function gi(a,b,c,d,e){c=new di(c,b);c.f=e;var f=V(a.b,b.a);c.g=f;b=yc(M(d,b.a));if(null==b)return null;a=jd(a.b,b);c.a=a;c.u=!1;c.j=J;c.o=!0;c.i=e;c.s="";return Kd(c)?c:null}
g.od=function(a){var b=rc(this.g.a,a);a=rc(this.c.a,a);return b>a?b:a};function hi(a,b){var c=b.m(),d=b.l();b=W(a.g);var e=W(a.c),f=X(a.g);a=X(a.c);if(1E-10>Math.abs(e-b))return new L(b,d);if(1E-10>Math.abs(a-f))return new L(c,f);a=(a-f)/(e-b);c=(-f+d+c/a+a*b)/(1/a+a);return new L(c,f+a*(c-b))}g.Bc=function(a,b,c){b.B||b.Bc(a,this,c)};function ii(a,b,c,d,e,f,h){Eh.call(this,a,b,c);this.i=d;this.f=f;this.a=rc(d,b.a);if(Math.abs(1E-10<this.a-rc(c.a,d)))throw Error("center is not equidistant from the two end points");this.A=e;this.F=uc(M(b.a,d));this.v=uc(M(c.a,d));1E-10>Math.abs(this.F-this.v)&&(this.v=this.F+2*Math.PI);a=this.F;d=this.v;e=this.A;1E-10>Math.abs(a-d)?(e=a,a=e+2*Math.PI):1E-10>Math.abs(Math.abs(a-d)-2*Math.PI)?(e=Math.min(a,d),a=e+2*Math.PI):a>d?e?e=d:(e=a,a=d+2*Math.PI):e?(e=d,a+=2*Math.PI):(e=a,a=d);a=[e,a];this.h=
a[0];this.j=a[1];d=this.j-this.h;a=Math.sin(d/2)-Math.sin(d)/2;d=Math.cos(d/2)-(1+Math.cos(d))/2;this.s=this.a*Math.sqrt(a*a+d*d);h=Math.max(Math.ceil((this.j-this.h)/(Math.PI/4)),Math.ceil((this.j-this.h)*this.a/(void 0===h?.3:h)));this.L=a=(this.j-this.h)/h;this.H=[];for(d=1;d<h;d++)e=this.A?this.j-d*a:this.h+d*a,e=new L(this.i.m()+this.a*Math.cos(e),this.i.l()+this.a*Math.sin(e)),e=new ai(e,!1,this),this.H.push(e);if(null==b.b)b.b=this;else throw Error();ci(c,this);this.j-this.h>=Math.PI?(this.w=
this.i,this.o=this.a):this.o=rc(this.w,b.a);this.f||(this.o*=1.2);this.C=1E-6>Math.abs(2*Math.PI-(this.j-this.h))}p(ii,Eh);g=ii.prototype;g.toString=function(){return""};g.rd=function(a){a.arc(this.i.m(),this.i.l(),this.a,this.F,this.v,this.A)};function Xh(a,b){return M(b,a.i)}g.bd=function(){return this.a*(1-Math.sqrt(1-this.L*this.L/4))};g.Ya=function(a){a=Xh(this,a);return(this.f?1:-1)*(a.length()-this.a)};g.nc=function(a){a=Xh(this,a);return ji(this,a)?(this.f?1:-1)*(a.length()-this.a):K};
function ki(a,b){return b.add(a.i)}function Yh(a,b){return V(a.b,b.add(a.i))}g.dd=function(a,b,c){var d=Xh(this,b);if(!ji(this,d))return null;var e=d.length();b=(this.f?1:-1)*(e-this.a);if(0>b||b>c)return null;c=new Jh(a,this);c.f=b;if(1E-10>e)throw Error("cannot get normal for point at center of circle");d=xc(d,1/e*(this.f?1:-1));c.a=jd(this.b,d);c.i=(this.f?1:-1)*this.a;c.i+=b;b=V(this.b,ki(this,xc(d,c.i)));c.g=b;c.o=!0;c.j=Mh(a);c.s="";return c};
g.tc=function(){var a=-Math.PI/2;a+=a<this.h?2*Math.PI:0;return this.h<=a&&a<=this.j?this.i.l()-this.a:X(this.g)<X(this.c)?X(this.g):X(this.c)};g.ed=function(){return this.i};g.Jb=function(){return(this.f?1:-1)*this.a};g.fd=function(){return this.H};g.uc=function(){var a=Math.PI;a+=a<this.h?2*Math.PI:0;return this.h<=a&&a<=this.j?this.i.m()-this.a:W(this.g)<W(this.c)?W(this.g):W(this.c)};g.Da=function(a){a=Xh(this,a);var b=a.length();if(1E-10>b)throw Error("");return xc(a,this.f?1/b:-1/b)};
g.gd=function(a){a=this.Da(a);return[ki(this,xc(a,(this.f?1:-1)*this.a)),a]};g.vc=function(){var a=0;a+=a<this.h?2*Math.PI:0;return this.h<=a&&a<=this.j?this.i.m()+this.a:W(this.g)>W(this.c)?W(this.g):W(this.c)};g.wc=function(){var a=Math.PI/2;a+=a<this.h?2*Math.PI:0;return this.h<=a&&a<=this.j?this.i.l()+this.a:X(this.g)>X(this.c)?X(this.g):X(this.c)};
g.rc=function(a,b){if(b instanceof ei){var c=b.b,d=V(this.b,this.i),e=nd(c,d);d=Hh(b,e,-this.a);var f=Kd(a)?hi(b,e):d;e=V(c,f);f=b.Da(f);c=jd(c,f);a.f=b.Ya(d);a.g=e;a.a=c}else if(b instanceof ii)a.b==b.b?Wh(a,this,b):Wh(a,b,this);else throw Error();};
g.xc=function(a,b){if(a==b)return null;var c=Xh(this,a),d=Xh(this,b);a=b=null;if(1E-10>Math.abs(d.m()-c.m())){var e=(c.m()+d.m())/2;if(Math.abs(e)>this.a)return null;var f=Math.sqrt(this.a*this.a-e*e),h=c.l()<d.l()?c.l():d.l();c=c.l()>d.l()?c.l():d.l();h<=f&&f<=c&&(b=new L(e,f));h<=-f&&-f<=c&&(a=new L(e,-f))}else{h=(d.l()-c.l())/(d.m()-c.m());var k=1+h*h,l=c.l()-h*c.m(),m=k*this.a*this.a-l*l;if(0>m)return null;m=Math.sqrt(m);e=-(h*l+m)/k;f=(h*-l+m)/k;var n=(l-h*m)/k;k=(l+h*m)/k;l=c.m()<d.m()?c.m():
d.m();m=c.m()>d.m()?c.m():d.m();h=c.l()<d.l()?c.l():d.l();c=c.l()>d.l()?c.l():d.l();l<=e&&e<=m&&h<=n&&n<=c&&(b=new L(e,n));l<=f&&f<=m&&h<=k&&k<=c&&(a=new L(f,k))}d=c=null;null!=b&&ji(this,b)&&(c=ki(this,b));null!=a&&ji(this,a)&&(d=ki(this,a));return null==c&&null==d?null:null!=c&&null!=d?[c,d]:null!=c?[c]:[d]};function li(a,b,c){a=uc(a);a<b&&(a+=2*Math.PI);return b<=a&&a<=c}function ji(a,b){return a.C?!0:li(b,a.h,a.j)}function mi(a,b){if(a.C)return!0;b=Xh(a,nd(a.b,b));return li(b,a.h,a.j)}
g.od=function(a){return rc(this.i,a)+this.a};
g.Bc=function(a,b,c){if(b instanceof ei){if(this.f){var d=V(this.b,this.i),e=nd(b.b,d);d=Hh(b,e,-this.a);var f=V(b.b,d),h=b.Ya(d);if(0<h)h>b.b.h||b.nc(d)==K||!mi(this,f)||(d=hi(b,e),f=V(b.b,d),$h(!0,a,b,this,h,f,d,c));else{e=this.b.i;var k=b.b.i;if(null==e||null==k){if(null!=k||null!=e)throw Error("problem with old copy in CircleStraight");}else{var l=rh(e,this.i);l=sh(k,l);l=Hh(b,l,-this.a);l=rh(k,l);l=sh(e,l);var m=uc(Xh(this,l)),n=m+(m<this.h?2*Math.PI:0);this.h<=n&&n<=this.j||(l=(m<this.h?this.h-
m:this.h-(m-2*Math.PI))<(m>this.j?m-this.j:2*Math.PI+m-this.j)?this.h:this.j,l=ki(this,new L(this.a*Math.cos(l),this.a*Math.sin(l))));l=rh(e,l);l=sh(k,l);0>b.Ya(l)||mi(this,f)&&null!=b.xc(d,l)&&$h(!1,a,b,this,h,f,d,c)}}}}else if(b instanceof ii){if(b.f||this.f)if(b.f&&this.f)d=V(b.b,b.i),mi(this,d)&&(d=V(this.b,this.i),d=nd(b.b,d),d=Xh(b,d),ji(b,d)&&(e=d.length(),h=e-(this.a+b.a),h>b.b.h||(0<h?Zh(!0,a,b,this,h,e,d,c):h<-(this.s>b.s?this.s:b.s)||Zh(!1,a,b,this,h,e,d,c))));else if(d=b.f?b:this,f=b.f?
this:b,!(d.a>f.a)){h=V(f.b,f.i);h=Xh(d,nd(d.b,h));if(null==h)h=!1;else{for(h=uc(h);h<d.h+Math.PI;)h+=2*Math.PI;h=d.h+Math.PI<=h&&h<=d.j+Math.PI}h&&(h=V(d.b,d.i),h=nd(f.b,h),k=Xh(f,h),ji(f,k)&&(e=k.length(),h=f.a-d.a-e,h>b.b.h||(0<h?Zh(!0,a,f,d,h,e,k,c):h<-d.s||Zh(!1,a,f,d,h,e,k,c))))}}else throw Error();};function ni(a,b){t(a)&&""!=a?b=b?b:a:(b=oi++,a=pi.Kc+b,b=qi.Kc+b);ed.call(this,a,b);this.B=[];this.g=[];this.A=!1;this.f=null;this.sa=[];this.w=1;this.H=[];this.L=null;this.ha=J;this.Z=this.ta=null;this.xb=this.Uc=this.Pc=this.Ab=J;this.o=-1;this.i=null;this.ce=new qh;this.h=.01;this.O=.5;this.da=.6}p(ni,ed);g=ni.prototype;g.toString=function(){return""};
function ri(a,b){if(a.A)throw Error("cannot add edges to finished Polygon");if(null==a.f)throw Error("Polygon does not have an open path to add edges to");if(b.c!=si(a))throw Error("edge is not connected to open path");a.g.push(b);La(a.B,b.fd());b.c==a.f?ti(a):a.B.push(b.c)}function ui(a,b,c){b=new ei(a,si(a),new ai(b,!0),c);ri(a,b)}
function vi(a){var b=K,c=hc,d=K,e=hc;C(a.g,function(a){a.uc()<b&&(b=a.uc());a.vc()>c&&(c=a.vc());a.tc()<d&&(d=a.tc());a.wc()>e&&(e=a.wc())});a.Ab=b;a.Pc=c;a.xb=d;a.Uc=e}function wi(a,b,c,d){Oh(b,a,c,d);Oh(b,c,a,d);C(a.g,function(a){Qh(a)||C(Ka(c.g),function(c){Qh(c)||a.sc(c,this.h)&&a.Bc(b,c,d)},this)},a)}function xi(a){if(!a.A)throw Error("Polygon construction is not finished.");C(a.sa,function(a){var b=a;do{b=Lh(b);if(null==b)throw Error();b=b.c}while(b!=a)})}
function ti(a){if(a.A)throw Error("Polygon construction is finished.");if(null!=a.f){var b=yi(a);if(null!=b){if(b.c!=a.f){var c=a.f;b=b.c;if(1E-8<rc(c.a,b.a))throw Error("");var d=Kh(b);if(null==d)throw Error("v2.edge1 is null; v2="+b+"; this="+a);ci(c,d);d.c=c;Fa(a.B,b)}a.sa.push(a.f);a.f=null}}}g.cd=function(a){a.beginPath();C(this.sa,function(b){a.moveTo(W(b),X(b));var c=b;do{var d=Lh(c);if(null==d)throw Error();c=d.c;d.rd(a)}while(c!=b);a.closePath()})};
function zi(a){var b=Array(2),c=.1*Math.max(a.I(),a.J()),d=Array(3);d[0]=new Sg(a.c.m()+c,a.c.l());d[1]=new Sg(a.c.m(),a.c.l()+c);d[2]=new Sg(a.c.m()-c,a.c.l()-c);c=Zg(d,function(b){return Ai(a,pc(b))},b);if(0!=b[1])throw Error("");return c}
function Ei(a){if(a.A)throw Error("Polygon construction is finished.");null!=a.f&&ti(a);a.A=!0;xi(a);vi(a);a.c=new L(a.ia()+a.I()/2,a.ma()+a.J()/2);a.j=J;var b=a.I()<=a.J()?[new L(a.ia()+.5*a.I(),a.ma()+.8*a.J()),new L(a.ia()+.5*a.I(),a.ma()+.2*a.J())]:[new L(a.ia()+.8*a.I(),a.ma()+.5*a.J()),new L(a.ia()+.2*a.I(),a.ma()+.5*a.J())];a.C=Ka(b);b=a.I();var c=a.J();a.S=(b*b+c*c)/12;a.Z=null;a.Kb()}g.ma=function(){return this.xb};g.Kb=function(){null==this.L&&(this.L=zi(this),Fi(this,this.L));return this.L};
g.Ra=function(){return this.ha};g.ia=function(){return this.Ab};g.oc=function(){if(isNaN(this.j)){var a=K;C(this.g,function(b){b=b.nc(this.c);b!=K&&(0<b?a=0:(b=-b,b<a&&(a=b)))},this);a==K&&(a=Gi(this));this.j=a}return this.j};function Gi(a){if(isNaN(a.j)){for(var b=K,c,d=0;3>=d;d++){switch(d){case 0:c=a.c.l()-a.ma();break;case 1:c=a.Sa()-a.c.m();break;case 2:c=a.Ga()-a.c.l();break;case 3:c=a.c.m()-a.ia();break;default:c=K}c<b&&(b=c)}a.j=b}return a.j}g.Sa=function(){return this.Pc};
function Ph(a){var b=a.ta;if(null==b)return null;var c=a.Z;null==c&&(c=jd(a,b.Da(N)),a.Z=c);return c}g.Ga=function(){return this.Uc};function Hi(a,b,c){a=a.getName(c)+" ";switch(b){case 0:a+="X "+(c?qi.yb:pi.yb);break;case 1:a+="X "+(c?qi.Xa:pi.Xa);break;case 2:a+="Y "+(c?qi.yb:pi.yb);break;case 3:a+="Y "+(c?qi.Xa:pi.Xa);break;case 4:a+=c?qi.Cc:pi.Cc;break;case 5:a+=c?qi.Dc:pi.Dc;break;default:throw Error();}return a}g.jd=function(){return za(this.B,function(a){return a.a})};
function yi(a){if(null==a.f)throw Error();var b=a.f.b;if(null==b)return null;for(;;){var c=b.c,d=c.b;if(null==d)break;b=d;if(c==a.f)throw Error();}return b}function si(a){if(null==a.f)throw Error("Polygon does not have an open path to add edges to");var b=yi(a);return null==b?a.f:b.c}function Ai(a,b){var c=0;C(a.B,function(a){a=rc(b,a.a);a>c&&(c=a)});var d=0;C(a.g,function(a){a=a.bd();a>d&&(d=a)});c+=d;return c*c}function Qh(a){return null==a?!0:!1}
function Ii(a,b){if(0>=b||1<b)throw Error("accuracy must be between 0 and 1, is "+b);a.da=b}function Fi(a,b){if(null!=a.f)throw Error("setCentroid called before finish, while creating Polygon");a.L=b;a.ha=Math.sqrt(Ai(a,b))}g.Na=function(a){if(0>=a||!y(a))throw Error("mass must be positive "+a);this.a=a;return this};g.aa=function(a,b){this.b=pc(a);t(b)&&isFinite(b)&&this.F!=b&&(this.F=b,this.v=Math.sin(b),this.u=Math.cos(b),this.Z=null);a=0;for(b=this.g.length;a<b;a++)this.g[a].u=null};
function Ji(a,b,c){if(4!=a.g.length)throw Error("");if(0>b||3<b)throw Error();a.ta=a.g[b];a.ha=c;C(a.g,function(a){a!=this.ta&&(a.o=0)},a)}function Ki(a,b){if(a.A)throw Error("Polygon construction is finished.");if(null!=a.f)throw Error("there is already an open path");b instanceof ai?(a.f=b,a.B.push(a.f)):(a.f=b.g,a.B.push(a.f),a.g.push(b))}var pi={Kc:"polygon",Cc:"angle",Dc:"angular velocity",yb:"position",Xa:"velocity"},qi=pi,oi=1;function Li(){var a;this.a=a=Math.floor(Math.abs(0))%4294967296;Mi(this.a)}Li.prototype.toString=function(){return""};function Mi(a){if(0>a)throw Error("random seed must be 0 or greater "+a);if(4294967296<=a)throw Error("random seed must be less than 4294967296 was "+a);if(a!=Math.floor(a))throw Error("random seed must be an integer "+a);}
function kh(a,b){for(var c=Array(b),d=Array(b),e=0;e<b;e++)c[e]=-1,d[e]=e;e=b;var f=0;do{var h=e--;if(0>=h)throw Error("n must be positive");var k=a,l=1664525*k.a+1013904223;k.a=l-4294967296*Math.floor(l/4294967296);Mi(k.a);h=Math.floor(k.a/4294967296*h);for(l=k=0;l<b;l++)if(!(0>d[l])&&k++==h){c[f++]=d[l];d[l]=-1;break}}while(0>c[b-1]);return c};function Ni(a,b,c){var d=Oi++;T.call(this,"DAMPING_LAW"+(0<d?"_"+d:""));this.a=a;this.f=b||1;this.b=[];this.c=null;null!=c&&(a=Ka(c.a),C(a,z(this.vd,this)),mc(c,this),this.c=c);this.D(Oc(new Q(this,Pi.Vb,Qi.Vb,z(this.$e,this),z(this.af,this)),3));this.D(Oc(new Q(this,Pi.gc,Qi.gc,z(this.Fe,this),z(this.yf,this)),3))}p(Ni,T);g=Ni.prototype;g.toString=function(){return""};g.vd=function(a){if(a.nd()&&!E(this.b,a)){var b=a.a;0<b&&isFinite(b)&&this.b.push(a)}};
g.ad=function(){var a=[];if(0==this.a)return a;C(this.b,function(b){isFinite(b.a)&&(b=new td("damping",b,b.b,1,xc(id(b),-this.a),1,-this.a*this.f*b.s),a.push(b))},this);return a};g.ud=function(){if(null!=this.c){var a=this.c;a.w.push({action:!1,Ob:this});Rc(a)}};g.$e=function(){return this.a};g.hd=function(){return 0};g.Fe=function(){return this.f};g.X=function(a){a.K("OBJECT_ADDED")?(a=a.G(),this.vd(a)):a.K("OBJECT_REMOVED")&&(a=a.G(),Fa(this.b,a))};g.af=function(a){this.a=a;U(this,Pi.Vb)};
g.yf=function(a){this.f=a;U(this,Pi.gc)};var Oi=0,Pi={Vb:"damping",gc:"rotate ratio"},Qi=Pi;function Ri(a){T.call(this,a||"SIM");this.a=[];this.A=!1;this.f=[];this.c=new vd;this.b=new zd([Gd.Qc,Ue.wb,Ue.zb,Ue.Sc],[Gd.Qc,Ue.wb,Ue.zb,Ue.Sc],this.getName()+"_VARS");this.U().bf(1,2,3);this.B=this.s=null;this.D(new Kc(this,Si.Db,Ti.Db,z(this.Ie,this),z(this.Qb,this)))}p(Ri,T);g=Ri.prototype;g.toString=function(){return""};g.U=function(){return this.b};g.R=function(){var a=this.b;if(0>a.b)throw Error("no time variable");return a.G(a.b)};g.Ie=function(){return this.A};
g.Qb=function(a){this.A=a;U(this,Si.Db)};g.reset=function(){null!=this.s&&this.s.length==this.b.a.length&&Fd(this.b,this.s);C(this.a,function(a){a.i=null});xd(this.c,K);this.ga();S(this,new P(this,"RESET"))};function vg(a){a.s=Cd(a.b);S(a,new P(a,"INITIAL_STATE_SAVED"))}function Xd(a){a.B=Cd(a.b);C(a.a,function(a){null==a.i&&(a.i=a.ce);a.i.set(a.c,a.b,a.v,a.u)})}function Zd(a){null!=a.B&&Fd(a.b,a.B,!0);C(a.a,function(a){a.i=null})}
g.Ea=function(a){if(!E(this.a,a)){for(var b=[],c=0;6>c;c++)b.push(Hi(a,c,!1));var d=[];for(c=0;6>c;c++)d.push(Hi(a,c,!0));b=Ad(this.b,b,d);a.o=b;this.a.push(a);this.c.add(a)}Ui(this,a);C(this.a,function(a){a.i=null})};function Vi(a,b){var c=null;if(x(b)){var d=H(b);c=Ca(a.a,function(a){return a.getName()==d})}else b<a.a.length&&0<=b&&(c=a.a[b]);if(null==c)throw Error("no body "+b);return c}
function Ui(a,b){b.i=null;var c=b.o;if(0>c)throw Error("unknown body "+b);var d=a.b;Ed(d,c,b.b.m());Ed(d,2+c,b.b.l());Ed(d,4+c,b.F);Ed(d,1+c,id(b).m());Ed(d,3+c,id(b).l());Ed(d,5+c,b.s);a.U().jb(1,2,3)}g.ga=function(){var a=this.b,b=Cd(a);Wi(this,b);b=Xi(this);Ed(a,1,b.c+b.a,!0);Ed(a,2,b.b,!0);Ed(a,3,Te(b),!0)};
function Yi(a,b){var c=Ca(a.f,function(a){return b instanceof Ni?a instanceof Ni:!1});if(null!=c)throw Error("cannot add DampingLaw or GravityLaw twice "+c);E(a.f,b)||a.f.push(b);a.U().jb(1,2,3)}function We(a){var b=Cd(a.U());Wi(a,b);return Xi(a)}function Xi(a){var b=0,c=0,d=0;C(a.a,function(a){isFinite(a.a)&&(c+=.5*kd(a)*a.s*a.s,d+=.5*a.a*vc(a.N))});C(a.f,function(a){b+=a.hd()});return new Se(b,d,c)}
function Wi(a,b){C(a.a,function(a){var c=a.o;0>c||(a.aa(new L(b[c],b[c+2]),b[c+4]),md(a,new L(b[c+1],b[c+3]),b[c+5]))},a)}g.xa=function(a,b){Wi(this,a);C(this.a,function(c){var d=c.o;if(!(0>d))if(c.a==K)for(c=0;6>c;c++)b[d+c]=0;else b[d]=a[d+1],b[d+2]=a[d+3],b[d+4]=a[d+5],b[d+1]=0,b[d+3]=0,b[d+5]=0},this);C(this.f,function(a){a=a.ad();C(a,function(a){Zi(this,b,a)},this)},this);b[this.b.b]=1;return null};
function Zi(a,b,c){var d=c.a;if(E(a.a,d)){var e=d.o;if(!(0>e)){var f=c.wa(),h=c.P(),k=d.a;b[e+1]+=f.m()/k;b[e+3]+=f.l()/k;b[e+5]+=((h.m()-d.b.m())*f.l()-(h.l()-d.b.l())*f.m())/kd(d);f=c.j;0!=f&&(b[e+5]+=f/kd(d));a.A&&(b=a.R(),c.Y=b,a.c.add(c))}}}function $i(a,b){if(0==a.a.length)throw Error("setElasticity: no bodies");C(a.a,function(a){a.w=b});S(a,new P(a,"ELASTICITY_SET",b))}
var Si={rb:"collision method",Ub:"collision accuracy",Xb:"distance tolerance",ub:"extra accel",fc:"random seed",Db:"show forces",Rf:"show collisions",lc:"velocity tolerance"},Ti=Si;function aj(a){Ri.call(this,a);this.O=!0;this.i="serial grouped lastpass";this.g=new Li;this.H=new ih(this.g);this.u=.01;this.v=.5;this.h=.6;this.D(new Qc(this,Si.rb,Ti.rb,z(this.ue,this),z(function(a){bj(this,Ch(a))},this),Bh(),Bh()));this.D(Oc(new Q(this,Si.Xb,Ti.Xb,z(this.We,this),z(this.sd,this)),5));this.D(Oc(new Q(this,Si.lc,Ti.lc,z(this.Xe,this),z(this.td,this)),3));this.D(Pc(Oc(new Q(this,Si.Ub,Ti.Ub,z(this.te,this),z(this.zd,this)),3)));this.D(Nc(Mc(new Q(this,Si.fc,Ti.fc,z(this.Ee,this),
z(this.xf,this))),hc))}p(aj,Ri);g=aj.prototype;g.Ee=function(){return this.g.a};g.xf=function(a){var b=this.g;Mi(a);b.a=a;U(this,Si.fc)};g.ue=function(){return this.i};function bj(a,b){b=Ch(b);a.i!=b&&(a.i=b,U(a,Si.rb))}g.te=function(){return this.h};g.zd=function(a){if(0>=a||1<a)throw Error("accuracy must be between 0 and 1, is "+a);this.h=a;C(this.a,function(b){Ii(b,a)});U(this,Si.Ub)};g.We=function(){return this.u};g.sd=function(a){this.u=a;C(this.a,function(b){b.h=a});U(this,Si.Xb)};g.Xe=function(){return this.v};
g.td=function(a){this.v=a;C(this.a,function(b){b.O=a});U(this,Si.lc)};g.Qb=function(a){Ri.prototype.Qb.call(this,a);this.O=a};g.Ea=function(a){Ri.prototype.Ea.call(this,a);a.h=this.u;a.O=this.v;Ii(a,this.h)};
g.cb=function(a,b,c){b=b[this.b.b];var d;var e=0;for(d=this.a.length;e<d;e++){var f=this.a[e];var h=e+1;a:for(;h<d;h++){var k=this.a[h];if(E(f.H,k)||E(k.H,f))continue a;if(f.a==K&&k.a==K)continue a;var l=2*(f.oc()+k.oc())/c;if(!(l=wc(id(f))+wc(id(k))>l)){var m=f,n=k,q=this.u;null!=Ph(m)?l=Sh(m,n,q):null!=Ph(n)?l=Sh(n,m,q):(l=vc(M(gd(n),gd(m))),m=n.Ra()+m.Ra()+q,l=l<m*m)}if(!l)continue a;wi(f,a,k,b)}}};
function cj(a,b,c){if(!isFinite(c.a))return 0;if(a.c==c){var d=uh(a);var e=d.m();var f=d.l()}else if(a.b==c)d=vh(a),e=d.m(),f=d.l();else return 0;if(b.c==c){d=uh(b);var h=d.m();d=d.l();var k=1}else if(b.b==c)d=vh(b),h=d.m(),d=d.l(),k=-1;else return 0;return k*(a.a.m()*(b.a.m()/c.a-f*(h*b.a.l()-d*b.a.m())/kd(c))+a.a.l()*(b.a.l()/c.a+e*(h*b.a.l()-d*b.a.m())/kd(c)))}
function dj(a){for(var b=a.length,c=Array(b),d=0;d<b;d++)c[d]=new Float64Array(b);for(var e=0;e<b;e++){var f=a[e];for(d=0;d<b;d++){var h=a[d];c[e][d]+=cj(f,h,f.c);c[e][d]-=cj(f,h,f.b)}}return c}
function $d(a,b){if(0==b.length)throw Error("empty array passed to handleCollisions");switch(a.i){case "simultaneous":for(var c=b.length,d=G(c),e=G(c),f=G(c),h=Sb(c),k=!1,l=0;l<c;l++){var m=b[l];d[l]=Ld(m);f[l]=Kd(m)?1:1+m.O;d[l]*=Kd(m)?1:1+m.O;h[l]=m.h;k=k||!m.h}f=dj(b);jh(a.H,f,e,d,h,a.R());d=!1;for(h=0;h<c;h++)f=b[h],1E-12<e[h]&&(d=!0),ej(a,f,e[h]);k&&d&&a.U().jb(1,3);a.ga();a=d;break;case "hybrid":a=fj(a,b,!0);break;case "serial separate":a=fj(a,b,!1,!1,!1);break;case "serial grouped":a=fj(a,
b,!1,!0,!1);break;case "serial separate lastpass":a=fj(a,b,!1,!1,!0);break;case "serial grouped lastpass":a=fj(a,b,!1,!0,!0);break;default:throw Error("");}return a}
function fj(a,b,c,d,e){d=t(d)?d:!0;e=t(e)?e:!0;var f=f||1E-5;var h=t(h)?h:!0;var k=b.length,l,m=0,n=20*k,q=n,r=G(k),w=G(k),A=G(k);var u=G(k);var v=Sb(k),B=!1;for(l=0;l<k;l++){var D=b[l];v[l]=D.h;r[l]=d?v[l]?0:D.O:D.O;w[l]=Ld(D);u[l]=w[l];B=B||!D.h}l=dj(b);do{m++;h&&m>q&&(f*=2,q+=n);var Z=f,pa=v,R=w,fb=R.length,Xa=-1,oc=kh(a.g,fb);for(u=0;u<fb;u++)if(D=oc[u],!pa[D]&&R[D]<-Z||pa[D]&&Math.abs(R[D])>Z){Xa=D;break}u=Xa;if(-1==u&&!e)break;gj(a,c,d,f,u,v,r,w,A,b,l)}while(-1<u);d=!1;for(l=0;l<k;l++)c=b[l],
1E-12<A[l]&&(d=!0),ej(a,c,A[l]);B&&d&&a.U().jb(1,3);a.ga();return d}
function gj(a,b,c,d,e,f,h,k,l,m,n){var q,r=k.length,w=Sb(r);if(-1==e)for(b=0;b<r;b++)w[b]=!0;else if(b||c)for(c=Vh(m,m[e],b,k,-d),d=c.length,b=0;b<d;b++){var A=c[b],u=Da(m,function(a){return a==A});w[u]=!0}else for(b=0;b<r;b++)w[b]=b==e;m=0;c=G(r);for(b=0;b<r;b++)c[b]=w[b]?m:-1,m+=w[b]?1:0;d=G(m);for(b=0;b<r;b++)w[b]&&(d[c[b]]=b);u=null;var v=G(m);var B=Array(m);for(b=0;b<m;b++)B[b]=new Float64Array(m);u=G(m);var D=Sb(m);for(b=0;b<r;b++)if(w[b])for(u[c[b]]=k[b],D[c[b]]=f[b],q=0;q<r;q++)w[q]&&(B[c[b]][c[q]]=
n[b][q]);for(b=0;b<m;b++)-1!=e&&(u[b]*=1+h[d[b]]),v[b]=0;if(-1!=jh(a.H,B,v,u,D,a.R())&&(a=dh(B,v),a=hh(a,u),!nh(v,a,D)))throw Error("");for(b=0;b<m;b++)l[d[b]]+=v[b];for(b=0;b<r;b++)for(q=0;q<r;q++)w[q]&&(k[b]+=n[b][q]*v[c[q]])}function ej(a,b,c){if(!b.h&&0>c){if(-1E-12>c)throw Error("");c=0}b.sa=c;0!=c&&(hj(a,new Dh("IMPULSE1",b.c,c,b.g,b.a,uh(b))),hj(a,new Dh("IMPULSE2",b.b,-c,b.g,b.a,vh(b))))}
function hj(a,b){var c=b.g,d=c.a;if(isFinite(d)){var e=b.a,f=1E-4>Math.abs(e),h=a.U(),k=kd(c);c=c.o;var l=b.wa(),m=b.f;if(-1<c){var n=1+c;Ed(h,n,h.G(n)+l.m()*e/d,f);n=3+c;Ed(h,n,h.G(n)+l.l()*e/d,f);n=5+c;Ed(h,n,h.G(n)+e*(m.m()*l.l()-m.l()*l.m())/k,f)}}a.O&&(d=a.R()+.1,b.Y=d,a.c.add(b))};function ij(a){aj.call(this,a);this.j=[];this.C=new ih(this.g);G(4);this.o="velocity_and_distance_joints";this.D(new Qc(this,Si.ub,Ti.ub,z(this.S,this),z(function(a){jj(this,zh(a))},this),[Ah.NONE,Ah.Xa,Ah.de,Ah.fe,Ah.ee],yh()))}p(ij,aj);ij.prototype.S=function(){return this.o};function jj(a,b){b=zh(b);a.o!=b&&(a.o=b,U(a,Si.ub))}
ij.prototype.reset=function(){var a=Wc(this,!1);aj.prototype.reset.call(this);Wc(this,a);a=0;for(var b=this.j.length;a<b;a++)this.j[a].b();a=0;for(b=this.a.length;a<b;a++)Ui(this,this.a[a]);S(this,new P(this,"RESET"))};
ij.prototype.xa=function(a,b,c){var d=0;aj.prototype.xa.call(this,a,b,c);var e=[];this.cb(e,a,c);if(0<Ba(e,function(a){return a.h?!1:0>a.f}))return e;for(kj(this,e);0<e.length&&(c=lj?Uh(e):e,c.length>d&&(d=c.length),mj(this,a,b,c),c.length!=e.length);)for(var f=0,h=c.length;f<h;f++)Fa(e,c[f]);return null};
function mj(a,b,c,d){var e=nj(d),f=oj(a,d,c,b),h=za(d,function(a){return a.h}),k=G(f.length);b=jh(a.C,e,k,f,h,b[a.b.b]);-1===b&&mh(a.C)||pj(a,b,e,k,f,h);e=0;for(f=d.length;e<f;e++)qj(a,d[e],k[e],c)}function kj(a,b){for(var c=b.length-1;0<=c;c--){var d=b[c];if(d.h?0:0>d.f)throw Error("unexpected collision at time="+a.R()+" "+d);Kd(d)||Ga(b,c)}}ij.prototype.cb=function(a,b,c){var d;aj.prototype.cb.call(this,a,b,c);c=0;for(d=this.j.length;c<d;c++)this.j[c].a(a,b[this.b.b],this.h)};
function nj(a){var b=a.length;var c=b||b;for(var d=Array(b),e=0;e<b;e++)d[e]=new Float64Array(c);for(c=0;c<b;c++){e=a[c];var f=e.c.a;var h=kd(e.c);var k=e.b.a;var l=kd(e.b);for(var m=e.fb(),n=e.Za(),q=m.m(),r=m.l(),w=n.m(),A=n.l(),u=0;u<b;u++){d[c][u]=0;var v=a[u];m=v.fb();n=v.Za();var B=m.m();m=m.l();var D=n.m();n=n.l();isFinite(f)&&e.c==v.c&&(d[c][u]+=e.a.m()*(v.a.m()/f+(-r*B*v.a.l()+r*m*v.a.m())/h),d[c][u]+=e.a.l()*(v.a.l()/f+(-q*m*v.a.m()+q*B*v.a.l())/h));isFinite(f)&&e.c==v.b&&(d[c][u]-=e.a.m()*
(v.a.m()/f+(-r*D*v.a.l()+r*n*v.a.m())/h),d[c][u]-=e.a.l()*(v.a.l()/f+(-q*n*v.a.m()+q*D*v.a.l())/h));isFinite(k)&&e.b==v.c&&(d[c][u]-=e.a.m()*(v.a.m()/k+(-A*B*v.a.l()+A*m*v.a.m())/l),d[c][u]-=e.a.l()*(v.a.l()/k+(-w*m*v.a.m()+w*B*v.a.l())/l));isFinite(k)&&e.b==v.b&&(d[c][u]+=e.a.m()*(v.a.m()/k+(-A*D*v.a.l()+A*n*v.a.m())/l),d[c][u]+=e.a.l()*(v.a.l()/k+(-w*n*v.a.m()+w*D*v.a.l())/l))}}return d}
function oj(a,b,c,d){for(var e=b.length,f=Array(e),h=0;h<e;h++){var k=b[h];f[h]=0;var l=k.c.a==K,m=k.b.a==K,n=l?-1:k.c.o,q=m?-1:k.b.o,r=0;switch(a.o){case "none":r=0;break;case "velocity":if(k.h)break;case "velocity_joints":r=Ld(k)/.025;break;case "velocity_and_distance":if(k.h)break;case "velocity_and_distance_joints":r=(.05*Ld(k)+(k.f-k.B))/(.025*.025)}f[h]+=r;r=l?0:d[1+n];var w=l?0:d[3+n],A=l?0:d[5+n],u=m?0:d[1+q],v=m?0:d[3+q],B=m?0:d[5+q],D=k.fb(),Z=k.Za(),pa=D.m();D=D.l();var R=J,fb=J;m||(R=
Z.m(),fb=Z.l());if(k.o){var Xa=k.u?k.j+k.i:k.i;Z=(r-A*D)/Xa;var oc=(w+A*pa)/Xa;m||(Z-=(u-B*fb)/Xa,oc-=(v+B*R)/Xa)}else Z=-B*k.a.l(),oc=B*k.a.m(),k.u&&(m||(f[h]+=-k.j*B*B));Xa=l?0:r-A*D;var Bi=l?0:w+A*pa,Ci=m?0:u-B*fb,Di=m?0:v+B*R;f[h]=k.o?f[h]+(Z*(Xa-Ci)+oc*(Bi-Di)):f[h]+2*(Z*(Xa-Ci)+oc*(Bi-Di));l||(f[h]+=k.a.m()*(c[n+1]-c[n+5]*D-A*A*pa),f[h]+=k.a.l()*(c[n+3]+c[n+5]*pa-A*A*D));m||(f[h]-=k.a.m()*(c[q+1]-c[q+5]*fb-B*B*R),f[h]-=k.a.l()*(c[q+3]+c[q+5]*R-B*B*fb));if(!isFinite(f[h]))throw console.log("c= "+
k),Vb("nums ",pa,D,R,fb,A,B,r,w,u,v),Error();}return f}function qj(a,b,c,d){b.ta=c;if(0!=c){var e=1;if(isFinite(b.c.a)){var f=new td("contact_force"+e+"_"+b.c.getName(),b.c,b.g,1,xc(b.a,c),1);f.b=b.f;f.c=b.c.h;e++;Zi(a,d,f)}isFinite(b.b.a)&&(c=new td("contact_force"+e+"_"+b.b.getName(),b.b,b.g,1,xc(b.a,-c),1),c.b=b.f,c.c=b.b.h,Zi(a,d,c))}}
function pj(a,b,c,d,e,f){c=dh(c,d);c=hh(c,e);if(!nh(d,c,f))throw d=Error,a=a.R(),d((null!=a?a.toFixed(7):null===a?"null":"undefined")+" compute_forces failed error="+b+" with tol="+Tb(1E-4));}var lj=!0;function rj(a){this.c=a||3E3;if(2>this.c)throw Error();this.b=this.g=this.a=0;this.h=-1;this.f=Array(this.c)}rj.prototype.toString=function(){return""};function sj(a){return 0==a.a?-1:0==a.b?tj(a,a.a-1):tj(a,a.b-1)}function uj(a){var b=sj(a);return-1==b?null:a.f[vj(a,b)]}rj.prototype.G=function(a){return this.f[vj(this,a)]};function vj(a,b){return a.a<a.c?b:b-(a.g-(b%a.c<a.b?0:1))*a.c}
function tj(a,b){if(a.a<a.c)return b;a=b+(a.g-(b<a.b?0:1))*a.c;if(a>=gc)throw Error("exceeded max int");return a}rj.prototype.reset=function(){this.g=this.b=this.a=0;this.h=-1};rj.prototype.store=function(a){this.h=this.b;this.f[this.b]=a;this.b++;this.a<this.c&&this.a++;this.b>=this.c&&(this.g++,this.b=0);return tj(this,this.h)};
function wj(a,b){this.c=0<a.a;this.a=a;if(void 0===b||0>b)b=a.a<a.c?0:tj(a,a.b);if(0<a.a&&(b<(a.a<a.c?0:tj(a,a.b))||b>sj(a)))throw Error("out of range startIndex="+b);this.b=b;this.f=vj(a,b)}function xj(a){if(0==a.a.a)throw Error("no data");return a.b}wj.prototype.G=function(){if(0==this.a.a)throw Error("no data");return this.a.f[this.f]};function yj(a){return a.c||a.b<sj(a.a)}
function zj(a){if(0===a.a.a)throw Error("no data");if(a.c)a.c=!1;else{if(a.b+1>sj(a.a))throw Error("cannot iterate past end of list");a.b++;a.f=vj(a.a,a.b)}return a.a.f[a.f]};function Aj(a){for(var b=["dots","lines"],c=0,d=b.length;c<d;c++)if(a==b[c])return b[c];throw Error("not found "+a);}var Bj={Gd:"Dots",LINES:"Lines"};function Cj(a,b,c,d){this.a=a;this.b=b;this.c=c;this.f=d}g=Cj.prototype;g.toString=function(){return""};g.Pa=function(a){return this.a==a.a&&this.b==a.b&&this.c==a.c&&this.f==a.f};g.m=function(){return this.a};g.l=function(){return this.b};g.ca=function(){return 0};function Dj(a,b,c,d){this.f=a;this.c=b;this.a=c;this.b=d}Dj.prototype.toString=function(){return""};function Ej(a,b,c){T.call(this,a);this.b=b;mc(b,this);this.f=this.a=-1;this.s=Nc(new Q(this,Y.va,Fj.va,z(this.Pe,this),z(this.za,this)),-1);this.D(this.s);this.o=Nc(new Q(this,Y.Aa,Fj.Aa,z(this.Oe,this),z(this.Oa,this)),-1);this.D(this.o);Gj(this);this.c=new rj(c||1E5);this.h="lime";this.i="lines";this.g=1;this.j=[];Hj(this);this.u=function(a){return a};this.v=function(a){return a};this.D(new Q(this,Y.LINE_WIDTH,Fj.LINE_WIDTH,z(this.Ce,this),z(this.vf,this)));this.D(new Qc(this,Y.tb,Fj.tb,z(this.we,
this),z(function(a){a=Aj(a);a=Aj(a);this.i!=a&&(this.i=a,Hj(this));U(this,Y.tb)},this),[Bj.Gd,Bj.LINES],["dots","lines"]));this.D(new Qc(this,Y.vb,Fj.vb,z(this.Ze,this),z(this.ja,this)))}p(Ej,T);g=Ej.prototype;g.toString=function(){return""};function Hj(a){a.j.push(new Dj(sj(a.c)+1,a.i,a.h,a.g))}function Gj(a){for(var b=[Fj.NONE],c=[-1],d=0,e=a.b.a.length;d<e;d++)b.push(Dd(a.b,d).getName(!0)),c.push(d);Lc(a.s,b,c);Lc(a.o,b,c)}function Ij(a){return a instanceof Ej?!0:!1}g.Ze=function(){return this.h};
g.we=function(){return this.i};function Jj(a,b){a=a.j;if(0==a.length)throw Error("graph styles list is empty");for(var c=a[0],d=1,e=a.length;d<e;d++){var f=a[d];if(f.f>b)break;c=f}return c}g.Ce=function(){return this.g};g.U=function(){return this.b};g.Oe=function(){return this.a};g.Pe=function(){return this.f};g.la=function(){if(-1<this.a&&-1<this.f){var a=Dd(this.b,this.a),b=Dd(this.b,this.f),c=a.G(),d=b.G();a=new Cj(this.u(c),this.v(d),a.b,b.b);b=uj(this.c);null!=b&&b.Pa(a)||this.c.store(a)}};
g.X=function(a){a.T()==this.b&&a.K("VARS_MODIFIED")&&Gj(this)};g.reset=function(){this.c.reset();this.j=[];Hj(this);S(this,new P(this,"RESET"))};g.ja=function(a){this.h!=a&&(this.h=a,Hj(this),U(this,Y.vb))};g.vf=function(a){I(a,this.g)&&(this.g=a,Hj(this),U(this,Y.LINE_WIDTH))};g.Oa=function(a){if(-1>a||a>this.b.a.length-1)throw Error("setXVariable bad index "+a);a!=this.a&&(this.a=a,this.reset(),U(this,Y.Aa))};
g.za=function(a){if(-1>a||a>this.b.a.length-1)throw Error("setYVariable bad index "+a);a!=this.f&&(this.f=a,this.reset(),U(this,Y.va))};var Y={tb:"draw mode",vb:"graph color",Nf:"graph draw mode",Of:"graph points",LINE_WIDTH:"draw width",Aa:"X variable",va:"Y variable",Gc:"clear graph",NONE:"-none-"},Fj=Y;function Kj(a,b,c){T.call(this,a);if(t(b)&&!Ij(b))throw Error("not a GraphLine "+b);this.i=[];Ij(b)&&(this.i.push(b),mc(b,this));this.s=c;c.ea(this);mc(c,this);this.j=this.v=!0;this.B=!1;this.u="BOTH_AXES";this.o=Ta(this.i.length);this.C=this.A=!1;this.g=this.b=this.f=this.a=0;this.c=10;this.h=.01;this.D(Oc(new Q(this,Lj.Gb,Mj.Gb,z(this.Me,this),z(this.Df,this)),3));a=["VERTICAL","HORIZONTAL","BOTH_AXES"];this.D(new Qc(this,Lj.Tb,Mj.Tb,z(this.re,this),z(this.rf,this),a,a));this.D(new Kc(this,Lj.nb,
Mj.nb,z(this.oe,this),z(this.Ha,this)));this.D(new Kc(this,Lj.Yb,Mj.Yb,z(this.xe,this),z(this.Ye,this)));Nj(this,this.j)}p(Kj,T);g=Kj.prototype;g.toString=function(){return""};function Oj(a,b){if(Ij(b))E(a.i,b)||(a.i.push(b),a.o.push(-1));else throw Error("not a GraphLine "+b);}g.oe=function(){return this.j};g.re=function(){return this.u};g.xe=function(){return this.v};g.Me=function(){return this.c};
g.la=function(){for(var a=0,b=this.i.length;a<b;a++){var c=this.i[a].c;this.o[a]>sj(c)&&this.reset()}a=0;for(b=this.i.length;a<b;a++)for(c=this.i[a].c,c=new wj(c,this.o[a]);yj(c);){var d=zj(c),e=this.i[a],f=d.a;d=d.b;isFinite(f)||(f==Number.POSITIVE_INFINITY?f=1E308:f==Number.NEGATIVE_INFINITY&&(f=-1E308));isFinite(d)||(d==Number.POSITIVE_INFINITY?d=1E308:d==Number.NEGATIVE_INFINITY&&(d=-1E308));var h=e.U().b,k=e.a==h;e=e.f==h;this.A?(f<this.f&&(k?(this.f=f,this.a=f+this.c):this.f=f-this.h*(this.a-
this.f)),k?f>this.a-this.h*this.c&&(this.a=f+this.h*this.c,this.f=this.a-this.c):f>this.a&&(this.a=f+this.h*(this.a-this.f))):(this.f=f,this.a=f+(k?this.c:0),this.A=!0);this.C?(d<this.g&&(e?(this.g=d,this.b=d+this.c):this.g=d-this.h*(this.b-this.g)),e?d>this.b-this.h*this.c&&(this.b=d+this.h*this.c,this.g=this.b-this.c):d>this.b&&(this.b=d+this.h*(this.b-this.g))):(this.g=d,this.b=d+(e?this.c:0),this.C=!0);this.o[a]=xj(c)}1E-14>this.a-this.f&&(a=(this.a+this.f)/2,b=Math.max(1E-14*a,1E-14),this.a=
a+b,this.f=a-b);1E-14>this.b-this.g&&(a=(this.b+this.g)/2,b=Math.max(1E-14*a,1E-14),this.b=a+b,this.g=a-b);a=new O(this.f,this.g,this.a,this.b);b=this.s.c;"VERTICAL"==this.u?a=new O(b.fa(),a.b,b.a,a.$()):"HORIZONTAL"==this.u&&(a=new O(a.fa(),b.b,a.a,b.$()));this.j&&!a.na(b)&&(this.B=!0,Cg(this.s,a),this.B=!1,S(this,new P(this,"AUTO_SCALE",a)))};g.X=function(a){a.T()==this.s?a.K("SIM_RECT_CHANGED")&&(this.B||this.Ha(!1)):E(this.i,a.T())&&(a.K(Y.Aa)||a.K(Y.va)?this.reset():a.K("RESET")&&this.Ha(!0))};
g.reset=function(){this.a=this.f=0;this.A=!1;this.b=this.g=0;this.C=!1;for(var a=0,b=this.o.length;a<b;a++)this.o[a]=-1};g.Ha=function(a){this.j!=a&&(a?this.v&&(this.reset(),this.s.ea(this),Nj(this,!0),this.j=!0,U(this,Lj.nb)):(this.s.Va(this),Nj(this,!1),this.j=!1,U(this,Lj.nb)))};g.rf=function(a){if("VERTICAL"==a||"HORIZONTAL"==a||"BOTH_AXES"==a)this.u=a,U(this,Lj.Tb);else throw Error("unknown "+a);};function Nj(a,b){C([xg.ua,xg.ra,xg.pb,xg.qb],z(function(a){this.s.Mb(a).ib(b)},a))}
g.Ye=function(a){this.v!=a&&(this.v=a,this.Ha(a),U(this,Lj.Yb))};g.Df=function(a){I(a,this.c)&&(this.c=a,this.reset(),this.Ha(!0),U(this,Lj.Gb))};var Lj={Tb:"axis",Gb:"time window",nb:"active",Yb:"enabled"},Mj=Lj;var Pj=db||cb||hb;function Qj(a,b){this.width=a;this.height=b}g=Qj.prototype;g.je=function(){return this.width*this.height};g.aspectRatio=function(){return this.width/this.height};g.qa=function(){return!this.je()};g.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};g.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
g.scale=function(a,b){b=y(b)?b:a;this.width*=a;this.height*=b;return this};function Rj(){var a=window.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Qj(a.clientWidth,a.clientHeight)}function Sj(a){var b;if(Pj&&!(db&&nb("9")&&!nb("10")&&ha.SVGElement&&a instanceof ha.SVGElement)&&(b=a.parentElement))return b;b=a.parentNode;return na(b)&&1==b.nodeType?b:null};function Tj(a,b,c,d){this.g=a;this.a=b;this.h=c;this.c=b();a=null;na(d)?(b=Sj(d),null!=b&&"LABEL"==b.tagName&&(a=b)):(d=document.createElement("input"),d.type="checkbox",a=document.createElement("LABEL"),a.appendChild(d),a.appendChild(document.createTextNode(this.g)));this.b=d;this.b.checked=this.c;this.i=null!==a?a:this.b;F(this.b,"change",this.j,!0,this)}Tj.prototype.toString=function(){return""};Tj.prototype.V=function(){return this.i};Tj.prototype.j=function(){Uj(this,!this.a())};
Tj.prototype.X=function(){Uj(this,this.a())};function Uj(a,b){a.a()!=b&&a.h(b);a.c!=a.a()&&(a.c=a.a(),a.b.checked=a.c)};function Vj(a,b){Tj.call(this,a.getName(!0),z(a.G,a),z(a.Nb,a),b);this.f=a;mc(this.f.T(),this)}p(Vj,Tj);Vj.prototype.toString=function(){return""};Vj.prototype.X=function(a){a==this.f&&Tj.prototype.X.call(this,a)};function Wj(a,b,c){this.a=a;this.c=b;this.f=c}Wj.prototype.toString=function(){return""};Wj.prototype.getName=function(a){return a?Xj.oa+"-"+this.f.getName(!0):H(Yj.oa)+"_"+this.f.getName(!1)};Wj.prototype.K=function(a){return this.getName()==H(a)};
Wj.prototype.b=function(a){Xd(this.a);var b=this.a.R(),c=a,d;this.a.ga();var e=Te(We(this.c)),f=K,h=K,k=!0;if(1E-15>a)return null;do{var l=b;if(!k&&(Zd(this.a),this.a.ga(),We(this.c),c/=5,1E-15>c))throw Error("time step too small "+c);for(d=0;l<b+a;){var m=c;l+m>b+a-1E-10&&(m=b+a-l);d++;var n=this.f.b(m);this.a.ga();if(null!=n)return n;l+=m}d=Te(We(this.c));d=Math.abs(e-d);k||(h=Math.abs(d-f));f=d;k=!1}while(1E-6<h);return null};var Yj={oa:"Adaptive Step"},Xj=Yj;function Zj(a){this.f=a;this.a=[];this.c=[]}Zj.prototype.toString=function(){return""};Zj.prototype.getName=function(a){return a?ak.oa:H(bk.oa)};Zj.prototype.K=function(a){return this.getName()==H(a)};Zj.prototype.b=function(a){var b,c=this.f.U(),d=Cd(c),e=d.length;this.a.length!=e&&(this.a=Array(e),this.c=Array(e));var f=this.a,h=this.c;for(b=0;b<e;b++)f[b]=d[b];fc(h);b=this.f.xa(f,h,0);if(null!==b)return b;for(b=0;b<e;b++)d[b]+=h[b]*a;Fd(c,d,!0);return null};var bk={oa:"Eulers Method"},ak=bk;function ck(a){this.c=a;this.a=[];this.f=[];this.g=[]}ck.prototype.toString=function(){return""};ck.prototype.getName=function(a){return a?dk.oa:H(ek.oa)};ck.prototype.K=function(a){return this.getName()==H(a)};
ck.prototype.b=function(a){var b,c=this.c.U(),d=Cd(c),e=d.length;this.a.length!=e&&(this.a=Array(e),this.f=Array(e),this.g=Array(e));var f=this.a,h=this.f,k=this.g;for(b=0;b<e;b++)f[b]=d[b];fc(h);b=this.c.xa(f,h,0);if(null!==b)return b;for(b=0;b<e;b++)f[b]=d[b]+h[b]*a;fc(k);b=this.c.xa(f,k,a);if(null!==b)return b;for(b=0;b<e;b++)d[b]+=(h[b]+k[b])*a/2;Fd(c,d,!0);return null};var ek={oa:"Modified Euler"},dk=ek;function fk(a,b,c,d){T.call(this,d||"DIFF_EQ_SUBJECT");this.b=a;this.f=b;this.c=c;this.a=[];this.a.push(new Zj(this.b));this.a.push(new ck(this.b));this.a.push(new Md(this.b));null!=this.f&&(a=new Wj(this.b,this.f,new ck(this.b)),this.a.push(a),a=new Wj(this.b,this.f,new Md(this.b)),this.a.push(a));a=za(this.a,function(a){return a.getName(!0)});b=za(this.a,function(a){return a.getName()});this.D(new Qc(this,gk.sb,hk.sb,z(this.g,this),z(this.h,this),a,b))}p(fk,T);fk.prototype.toString=function(){return""};
fk.prototype.g=function(){return this.c.i.getName()};fk.prototype.h=function(a){if(!this.c.i.K(a)){var b=Ca(this.a,function(b){return b.K(a)});if(null!=b)this.c.i=b,U(this,gk.sb);else throw Error("unknown solver: "+a);}};var gk={sb:"Diff Eq Solver"},hk=gk;function ik(a){T.call(this,"ELASTICITY_SETTER");this.b=a;this.a=0;mc(a,this);this.D(Pc(Oc(new Q(this,jk.bb,kk.bb,z(this.c,this),z(this.f,this)),3)))}p(ik,T);ik.prototype.toString=function(){return""};ik.prototype.c=function(){return this.a=lk(this)};function lk(a){var b=Ka(a.b.a);return 0==b.length?a.a:Aa(b,function(a,b){return Math.min(a,b.w)},1)}ik.prototype.f=function(a){C(Ka(this.b.a),function(b){b.w=a});this.a=a;U(this,jk.bb)};
ik.prototype.X=function(a){a.T()==this.b&&a.K("ELASTICITY_SET")&&(a=lk(this),this.a!=a&&(this.a=a,U(this,jk.bb)))};var jk={bb:"elasticity"},kk=jk;function mk(a,b,c,d){this.s=a;this.o=b;this.w=c;this.a=b();if(!y(this.a))throw Error("not a number "+this.a);this.c=3;this.f=-1;this.g=Math.max(8,1+this.c);a=null;na(d)?(b=Sj(d),null!=b&&"LABEL"==b.tagName&&(a=b)):(d=document.createElement("input"),d.type="text",d.size=this.g,a=document.createElement("LABEL"),a.appendChild(document.createTextNode(this.s)),a.appendChild(d));this.b=d;this.u=null!==a?a:this.b;this.j="";this.b.b="right";F(this.b,"change",this.Jf,!0,this);F(this.b,"focus",this.Ve,!1,this);
F(this.b,"click",this.ne,!1,this);this.i=!1;nk(this)}g=mk.prototype;g.toString=function(){return""};function ok(a,b,c){if(-1<a.f)return a.f;a=c-1-pk(b);16<a&&(a=16);return 0<a?a:0}g.ne=function(){this.i&&(this.b.select(),this.i=!1)};function nk(a){var b=a.a;var c=pk(b);b=2+ok(a,b,a.c)+(0<c?c:0);a.j=a.a.toFixed(ok(a,a.a,a.c));a.b.value=a.j;b!=a.g&&(a.g=b,a.b.size=a.g)}g.Ve=function(){this.i=!0};g.V=function(){return this.u};g.G=function(){return this.a};
function pk(a){return 1E-15>Math.abs(a)?0:Math.floor(Math.LOG10E*Math.log(Math.abs(a)))}g.X=function(){qk(this,this.o())};function qk(a,b){if(b!=a.a){try{if(isNaN(b))throw Error("not a number "+b);a.a=b;a.w(b)}catch(c){alert(c),a.a=a.o()}nk(a)}}g.Jf=function(){var a=this.b.value.replace(/^\s*|\s*$/g,"");if(a!=this.j){var b=parseFloat(a);isNaN(b)?(alert("not a number: "+a),nk(this)):qk(this,b)}};function rk(a,b){mk.call(this,a.getName(!0),z(a.G,a),z(a.wd,a),b);this.h=a;b=a.g;this.c!=b&&(this.c=b,nk(this));a=a.f;this.f!=a&&(this.f=-1<a?a:-1,nk(this));mc(this.h.T(),this)}p(rk,mk);rk.prototype.toString=function(){return""};rk.prototype.X=function(a){a==this.h&&(mk.prototype.X.call(this,a),a=this.h.g,this.c!=a&&(this.c=a,nk(this)),a=this.h.f,this.f!=a&&(this.f=-1<a?a:-1,nk(this)))};function sk(a,b){b=new ni(b,void 0);Ki(b,new ai(new L(-a,0)));var c=new L(-a,0);c=new ii(b,si(b),new ai(c,!0),N,!1,!0);ri(b,c);Ei(b);Fi(b,N);b.S=a*a/2;b.w=.8;return b}function tk(a,b,c,d){c=new ni(c,d);d=a/2;var e=b/2;Ki(c,new ai(new L(-d,-e)));ui(c,new L(d,-e),!1);ui(c,new L(d,e),!0);ui(c,new L(-d,e),!0);ui(c,new L(-d,-e),!1);Ei(c);Fi(c,N);c.S=(a*a+b*b)/12;c.w=.8;return c}function uk(a,b,c,d,e){if(0>c||3<c)throw Error();a=tk(a,b,d,e);Ji(a,c,0==c||2==c?a.J()/2:a.I()/2);return a}new Li;function vk(a,b){this.a=a;this.g=b;this.c=null;this.h=sd(1,"mouse position").Na(K);this.b=-1;this.f=!1;this.i=this.j=0}vk.prototype.toString=function(){return""};function wk(a,b,c){if(!a.g.a&&-1<a.b){var d=Vi(a.a,a.b);a.f?d.aa(d.b,a.i+Math.atan2(b.l()-d.b.l(),b.m()-d.b.m())-a.j):d.aa(M(b,c));Ui(a.a,d)}else a.h.aa(b)}function xk(a){var b=a.c;if(null!=b){var c=a.a;b.ud();c.U().jb(1,2,3);Fa(c.f,b);a.a.c.remove(b);a.c=null}a.b=-1}var yk={Mf:"click",Hc:"drag"};function zk(){}g=zk.prototype;g.toString=function(){return""};g.Ia=function(){return!1};g.Ja=function(){};g.Ca=function(){return!1};g.Ba=function(){return[]};g.Ka=function(){return N};g.pa=function(){return[]};g.W=function(){return void 0!==this.a?this.a:10};g.ja=function(){return this};g.ya=function(){};function Ak(a){var b=new zk;b.b=a;return b}g.ka=function(a){this.a=a};function Bk(a,b){this.b=null!=a?a:new Jc("proto");this.a=null!=b?b:null}g=Bk.prototype;g.toString=function(){return""};g.Ia=function(){return!1};g.Ja=function(a,b){if(0<Ck(this)){var c=ne(b,this.b.P());b=ne(b,this.b.ba());if(!(1E-6>rc(c,b))){a.save();var d=Dk(this);0<d.length&&a.setLineDash&&a.setLineDash(d);a.lineWidth=Ck(this);a.strokeStyle=Ek(this);a.beginPath();a.moveTo(c.m(),c.l());a.lineTo(b.m(),b.l());a.stroke();a.restore()}}};
function Ek(a){return void 0!==a.c?a.c:null!=a.a?Ek(a.a):"gray"}function Dk(a){return void 0!==a.h?a.h:null!=a.a?Dk(a.a):[]}g.Ba=function(){return[]};g.Ka=function(){return xc(this.b.P().add(this.b.ba()),.5)};g.pa=function(){return[this.b]};function Ck(a){return void 0!==a.f?a.f:null!=a.a?Ck(a.a):4}g.W=function(){return void 0!==this.g?this.g:null!=this.a?this.a.W():0};g.Ca=function(){return!1};g.ja=function(a){this.c=a;return this};g.ya=function(){};function Fk(a){var b=new Bk;b.f=a;return b}
g.ka=function(a){this.g=a};function Gk(a,b){this.a=b;this.j=a;b=Ka(a.a);C(b,z(this.c,this));mc(a,this);this.b=[];this.i=Fk(1).ja("blue");this.i.ka(10);this.g=Fk(1).ja("red");this.g.ka(10);this.A=Fk(2).ja("magenta");this.o=Fk(8);a=Hf(3);a.c=.75;this.F=a;a=Hf(2);a.c=.5;this.s=a;this.B=new mf;a=Bf(new mf,"");a.i="red";this.f=a;this.f.ka(10);this.v=new mf;this.h=Bf(Bf(new mf,""),"lightGray");this.h.ka(-1);this.w=Ak(2).ja("blue");this.w.ka(10);this.u=Ak(3).ja("red");this.u.ka(10)}Gk.prototype.toString=function(){return""};
function Hk(a,b,c){"over"==Ik?a.a.add(b):Nf(a.a,b);a.b.push({Ff:c,me:b})}
Gk.prototype.c=function(a){if(null==Mf(this.a,a))if(a instanceof ni){var b=a;isFinite(b.a)?Hk(this,new mf(b,this.B),a):Hk(this,new mf(b,this.h),a)}else a instanceof Dh?null==a.getName().match(/^IMPULSE2/)&&null!=a.getName().match(/^IMPULSE1/)&&(b=sd(Math.max(.02,Math.abs(2*Math.sqrt(Math.abs(5*a.a)/Math.PI))),a.getName()).Na(0),b.aa(a.P()),Hk(this,new mf(b,this.f),a)):a instanceof td?null==a.getName().match(/^CONTACT_FORCE2/)&&(null!=a.getName().match(/^CONTACT_FORCE1/)?Hk(this,new Bk(a,this.g),a):
null!=a.getName().match(/^THRUSTER/)?Hk(this,new Bk(a,this.A),a):Hk(this,new Bk(a,this.i),a)):a instanceof od?Hk(this,new mf(a,this.v),a):a instanceof ud?(b=a,b.K(yk.Hc)?Hk(this,new Cf(b,this.s),a):Hk(this,new Cf(b,this.F),a)):a instanceof Jc&&Hk(this,new Bk(a,this.o),a)};function Jk(a,b){var c=Ca(a.b,function(a){return a.Ff==b});null!=c&&(a.a.remove(c.me),Fa(a.b,c))}Gk.prototype.X=function(a){if(a.T()==this.j){var b=a.G();a.K("OBJECT_ADDED")?this.c(b):a.K("OBJECT_REMOVED")&&Jk(this,b)}};var Ik="over";function Kk(a,b,c,d,e){if(null==a&&null==e)throw Error();this.h=a;this.j=b;this.a=e;this.g=!1;this.f=null;null!=a&&(b=a.pa(),0<b.length&&(this.f=b[0]));this.c=c;this.i=d;this.b=N;null!=a&&(this.b=M(c,a.Ka()))};function Lk(a,b){this.a=a;this.b=a.g;this.c=ne(this.b,Cc(a.c));this.f=b}function Mk(a,b){b=M(a.f,b);var c=le(a.b,a.c.add(b)),d=a.a.c;b=d.I();d=d.J();var e=c.m();c=c.l();b=new O(e-b/2,c-d/2,e+b/2,c+d/2);Cg(a.a,b)};function Nk(a,b,c){this.a=a;this.h=b||null;this.g=null!==c;this.j=null!=c?1==c.control:!1;this.o=null!=c?1==c.pd:!1;this.s=null!=c?1==c.shift:!1;this.i=null!=c?1==c.alt:!0;this.c=!1;this.f=this.b=null;F(a.a,"mousedown",this.hf,!1,this);F(document,"mousemove",this.jf,!1,this);F(document,"mouseup",this.yd,!1,this);F(document,"keydown",this.Qe,!1,this);F(document,"keyup",this.Re,!1,this);F(document,"touchstart",this.If,!1,this);F(document,"touchmove",this.Hf,!1,this);F(document,"touchend",this.Gf,!1,
this)}g=Nk.prototype;g.toString=function(){return""};g.hf=function(a){Ok(this,a,a.clientX,a.clientY)};
function Ok(a,b,c,d){if(b.target==a.a.a)if(a.a.a.focus(),a.c=!0,c=Pk(a,c,d),a.g&&a.j==b.ctrlKey&&a.o==b.metaKey&&a.s==b.shiftKey&&a.i==b.altKey)b=a.a.f,null!=b&&(a.f=new Lk(b,c),Mk(a.f,c));else{a:{var e=a.a;d=a.h;var f=null,h=null,k=K,l=Ka(e.g),m=l.length-1;b:for(;0<=m;m--){var n=l[m],q=n.g,r=le(q,c);var w=n.h;Kf(w);w=Ka(w.a);var A=w.length-1;c:for(;0<=A;A--){var u=w[A];if(!u.Ca())continue c;var v=u.Ba();if(!(1<v.length))if(0==v.length){if(u.Ia(r)){f=u;var B=n;var D=r;h=N;break b}}else{v=v[0];for(var Z=
Ka(v.C),pa=Z.length-1;0<=pa;pa--){var R=V(v,Z[pa]);R=rc(c,ne(q,R));R<=k&&(k=R,f=u,B=n,h=Z[pa],D=r)}}}}if(null==f){B=e.f;if(null!=B)D=le(B.g,c);else{c=null;break a}if(null==d){c=null;break a}}c=t(B)&&t(D)?new Kk(f,B,D,h,d):null}a.b=c;if(null!=a.b){a=a.b;if(null!=a.a){c=a.a;f=a.f;B=a.c;D=a.b;d=a.i;c.f=b.altKey||b.metaKey||b.ctrlKey;xk(c);b=Ka(c.a.a).length;for(h=0;h<b;h++)f===Vi(c.a,h)&&(c.b=h);-1<c.b&&((b=Vi(c.a,c.b),c.g.a)?null!=d&&(c.c=new ud(yk.Hc,b,d,c.h,N,0,3),wk(c,B,D),Yi(c.a,c.c),c.a.c.add(c.c)):
c.f&&(c.i=b.F,c.j=Math.atan2(D.l(),D.m())));b=-1<c.b}else b=!1;a.g=b}}}function Pk(a,b,c){var d=a.a.a,e=d.getBoundingClientRect();return sc(new L(b-e.left,c-e.top),d.offsetWidth/a.a.I())}g.jf=function(a){Qk(this,a,a.clientX,a.clientY)};function Qk(a,b,c,d){var e=a.a.a;null!=e.offsetParent&&(c=Pk(a,c,d),(b.target==e||b.target==document.body)&&a.c&&b.b(),null!=a.f?Mk(a.f,c):null!=a.b&&(a=a.b,a.c=le(a.j.g,c),null==a.h||null!=a.f&&a.g?null!=a.a&&a.g&&wk(a.a,a.c,a.b):a.h.ya(M(a.c,a.b))))}
g.yd=function(a){var b=this.a.a;null!=b.offsetParent&&((a.target==b||a.target==document.body)&&this.c&&a.b(),sg(this))};function sg(a){if(null==a.f&&null!=a.b){var b=a.b;null!=b.a&&xk(b.a)}a.b=null;a.f=null;a.c=!1}g.Qe=function(){};g.Re=function(){};g.If=function(a){if(a.target==this.a.a){var b=a.f;null!=b&&((b=b.touches)&&1==b.length?Ok(this,a,b[0].clientX,b[0].clientY):sg(this))}};g.Hf=function(a){var b=a.f;b=null!=b?b.touches:[];this.c&&b&&1==b.length?Qk(this,a,b[0].clientX,b[0].clientY):sg(this)};
g.Gf=function(a){this.c&&this.yd(a)};function Rk(a){if(t(a)&&!Ij(a))throw Error("not a GraphLine "+a);this.a=t(a)?[a]:[];this.f=Ta(this.a.length);this.h=this.c=null;this.g=fe;this.b=!1;this.i=!0;this.j=0}g=Rk.prototype;g.toString=function(){return""};function Sk(a,b){if(Ij(b))E(a.a,b)||(a.a.push(b),a.f.push(-1));else throw Error("not a GraphLine "+b);}g.Ia=function(){return!1};
g.Ja=function(a,b){if(!this.g.qa()){a.save();if(null==this.h||this.h!=b)this.h=b,this.b=!0;for(var c=0,d=this.a.length;c<d;c++)if(this.f[c]>sj(this.a[c].c)){this.reset();break}if(this.i){c=this.g.I();d=this.g.J();null==this.c&&(this.c=document.createElement("canvas"),this.c.width=c,this.c.height=d,this.b=!0);var e=this.c.getContext("2d");this.b?(e.clearRect(0,0,c,d),this.f=Ta(this.a.length),Tk(this,e,b),this.b=!1):Tk(this,e,b);a.drawImage(this.c,0,0,c,d)}else this.b=!0,this.f=Ta(this.a.length),Tk(this,
a,b),this.b=!1;c=0;for(d=this.a.length;c<d;c++){e=a;var f=b,h=uj(this.a[c].c);if(null!=h){var k=oe(f,h.m());f=pe(f,h.l());e.fillStyle="red";e.fillRect(k-2,f-2,5,5)}}a.restore()}};g.Ba=function(){return[]};g.Ka=function(){return N};g.pa=function(){return[]};g.W=function(){return this.j};
function Tk(a,b,c){for(var d=0,e=a.a.length;d<e;d++){var f=a.f,h=d;var k=b;var l=c,m=a.f[d],n=a.a[d],q=me(l,a.g),r=new wj(n.c,m);if(yj(r)){m=zj(r);var w=Jj(n,xj(r));if("dots"==w.c){var A=oe(l,m.a),u=pe(l,m.b),v=w.b;k.fillStyle=w.a;k.fillRect(A,u,v,v)}for(;yj(r);)if(u=m,m=zj(r),m.a!=u.a||m.b!=u.b)if(w=Jj(n,xj(r)),A=m.c==u.c&&m.f==u.f,"dots"!=w.c&&A){if(Fc(q,u,m)){A=oe(l,u.a);u=pe(l,u.b);v=oe(l,m.a);var B=pe(l,m.b);k.strokeStyle=w.a;k.lineWidth=w.b;k.beginPath();k.moveTo(A,u);k.lineTo(v,B);k.stroke()}}else Bc(q,
m)&&(A=oe(l,m.a),u=pe(l,m.b),v=w.b,k.fillStyle=w.a,k.fillRect(A,u,v,v));k=xj(r)}else k=m;f[h]=k}}g.Ca=function(){return!1};g.reset=function(){this.f=Ta(this.a.length);this.b=!0};g.ya=function(){};function Uk(a,b){a.g=b;a.c=null}function Vk(a,b){a.i=b;a.i||(a.c=null)}g.ka=function(a){this.j=t(a)?a:0};var Wk={Dd:"aqua",ob:"black",Ed:"blue",Hd:"fuchsia",Id:"gray",Jd:"green",Ld:"lime",Pd:"maroon",Qd:"navy",Rd:"olive",Td:"purple",Ud:"red",Xd:"silver",$d:"teal",Hb:"white",ie:"yellow"};function Xk(a,b,c,d,e,f){T.call(this,"GRAPH_LAYOUT");this.g=f||"block";ng(e,b);this.view=new wg("X_Y_GRAPH_VIEW",new O(0,0,1,1));Ag(this.view,"FULL");zg(this.view,"FULL");Rf(b,this.view);this.i=this.view.h;this.a=new Ej("X_Y_GRAPH_LINE",a);this.a.Oa(0);this.a.za(1);this.a.ja("lime");this.view.ea(this.a);this.f=Gg(this.view);a=z(function(a){if(a.K(Y.Aa)){var b=this.f;var c=this.a;c=-1<c.a?Dd(c.b,c.a).getName(!0):"";b.qc=c}a.K(Y.va)&&(a=this.f,b=this.a,b=-1<b.f?Dd(b.b,b.f).getName(!0):"",a.Rb=b)},this);
new bf(this.a,a);a(new P(this.a,Fj.Aa));this.c=new Kj("X_Y_AUTO_SCALE",this.a,this.view);this.c.h=.05;this.b=new Rk(this.a);Uk(this.b,this.view.f);Vk(this.b,!0);Nf(this.i,this.b);new bf(this.view,z(function(a){a.K("SCREEN_RECT_CHANGED")&&Uk(this.b,this.view.f)},this));this.h=[];this.j=c;Yk(this,Lg(e));c=Uc(this.a,Y.va);Yk(this,new lc(c,"Y:"));c=Uc(this.a,Y.Aa);Yk(this,new lc(c,"X:"));Yk(this,new ae(Fj.Gc,z(this.a.reset,this.a)));c=Vc(this.a,Y.vb);Yk(this,new lc(c,void 0,[Wk.Dd,Wk.ob,Wk.Ed,Wk.Hd,Wk.Id,
Wk.Jd,Wk.Ld,Wk.Pd,Wk.Qd,Wk.Rd,Wk.Td,Wk.Ud,Wk.Xd,Wk.$d,Wk.Hb,Wk.ie],"aqua black blue fuchsia gray green lime maroon navy olive purple red silver teal white yellow".split(" ")));c=Uc(this.a,Y.LINE_WIDTH);Yk(this,new rk(c));c=Vc(this.a,Y.tb);Yk(this,new lc(c));new Nk(b,null,{alt:!1,control:!1,pd:!1,shift:!1});b=Kg(this.view,z(function(){this.c.Ha(!0)},this));d.appendChild(b);d=Pg(b,this);Yk(this,new Vj(d))}p(Xk,T);Xk.prototype.toString=function(){return""};
Xk.prototype.Ta=function(){return[this,this.a,this.view,this.c]};function Yk(a,b){var c=b.V();c.style.display=a.g;a.j.appendChild(c);a.h.push(b)};function Zk(a){a.style[db?"styleFloat":"cssFloat"]="left"};function $k(a,b,c){T.call(this,"TAB_LAYOUT");b=b||800;c=c||800;this.v=this.u=this.C=1;Yb(a.images_dir);this.O=al(a,"tab_list");this.f=bl(this);""==this.f&&(this.f=cl,dl(this,this.f));F(this.O,"click",z(function(a){a=a.target;if(void 0===a)throw Error("event target is undefined ");if(null!=a&&"LI"==a.tagName&&!(-1<a.className.indexOf("selected"))){a=a.className;a=a.toLowerCase().trim();switch(a){case el:a=fl;break;case gl:a=hl;break;case il:a=jl}this.Ma(a)}},this));F(window,"resize",z(this.Ua,this));
F(window,"orientationchange",z(this.Ua,this));var d=kl(a,"term_output");this.S=kl(a,"term_input");this.ha=new xe(this.S,d);this.B=al(a,"container");this.c=al(a,"sim_applet");this.c.style.position="relative";d=document.createElement("canvas");d.tabIndex=0;this.s=new Of(d,"SIM_CANVAS");Wf(this.s,b,c);this.c.appendChild(this.s.a);this.g=al(a,"show_sim");d=Sj(this.g);if(null==d||"LABEL"!=d.tagName)throw Error();this.o=d;F(this.g,"click",z(function(){var a=this.g.checked;switch(this.f){case "":case cl:break;
case el:a&&this.Ma(fl);break;case fl:a||this.Ma(el);break;case gl:a&&this.Ma(hl);break;case hl:a||this.Ma(gl);break;case il:a&&this.Ma(jl);break;case jl:a||this.Ma(il);break;default:throw Error('showSim: no such layout "'+this.f+'"');}},this));this.a=al(a,"div_graph");this.a.style.position="relative";d=document.createElement("canvas");this.H=new Of(d,"GRAPH_CANVAS");b=Math.max(b,c);Wf(this.H,b,b);this.a.appendChild(d);this.i=al(a,"graph_controls");this.ta=[];this.h=al(a,"sim_controls");this.h.style.marginLeft=
"10px";this.da=al(a,"div_terminal");this.da.style.display="none";al(a,"label_terminal").style.display="inline";this.A=al(a,"show_terminal");F(this.A,"click",z(function(){this.Bd(this.A.checked)},this));this.b=al(a,"div_time_graph");this.b.style.position="relative";c=document.createElement("canvas");this.Z=new Of(c,"TIME_GRAPH_CANVAS");Wf(this.Z,b,b);this.b.appendChild(c);this.j=al(a,"time_graph_controls");this.Ua();this.D(new Q(this,ll.ic,ml.ic,z(this.Je,this),z(this.Af,this)));this.D(new Q(this,
ll.ac,ml.ac,z(this.ze,this),z(this.uf,this)));this.D(new Q(this,ll.jc,ml.jc,z(this.Ke,this),z(this.Bf,this)));this.D(new Qc(this,ll.Ic,ml.Ic,z(this.Be,this),z(this.Ma,this),[cl,el,fl,gl,hl,il,jl],[cl,el,fl,gl,hl,il,jl]));this.D(new Kc(this,ll.Oc,ml.Oc,z(function(){return this.A.checked},this),z(this.Bd,this)))}p($k,T);g=$k.prototype;g.toString=function(){return""};
function al(a,b){a=a[b];if(!x(a))throw Error("unknown elementId: "+b);b=document.getElementById(a);if(!na(b))throw Error("not found: element with id="+a);return b}function kl(a,b){a=a[b];if(!x(a))throw Error("unknown elementId: "+b);return document.getElementById(a)}
function nl(a,b,c,d){b.style.display="block";c.style.display="inline-block";c.style.a="1";c.style.MozColumnCount="1";c.style.webkitColumnCount="1";c.style.width="auto";var e=c.getBoundingClientRect().width;e=150<e?e:300;b=b.offsetWidth||b.getBoundingClientRect().width;null!=d&&(d.style.display="block",b+=d.offsetWidth||d.getBoundingClientRect().width);a=a.B.offsetWidth||a.B.getBoundingClientRect().width;a-b-2<e&&a>2*e&&(c.style.width="100%",c.style.a="2",c.style.MozColumnCount="2",c.style.webkitColumnCount=
"2")}g.ze=function(){return this.u};g.Be=function(){return this.f};function bl(a){a=Ca(a.O.childNodes,function(a){return a.nodeType!=Node.ELEMENT_NODE||"LI"!=a.tagName?!1:null!=a.className.match(/.*selected/)});return null==a?"":a.className.replace(/[ ]*selected/,"")}g.Je=function(){return this.C};g.Ta=function(){return[this,this.s,this.H,this.Z]};g.Ke=function(){return this.v};
g.Ua=function(){var a=Rj();Zk(this.c);Zk(this.a);Zk(this.b);switch(this.f){case "":case cl:this.a.style.display="none";this.i.style.display="none";this.b.style.display="none";this.j.style.display="none";ol(this,.95*this.C,this.a);nl(this,this.c,this.h);this.o.style.display="none";break;case el:this.c.style.display="none";this.h.style.display="none";this.b.style.display="none";this.j.style.display="none";ol(this,.95*this.u,this.a);nl(this,this.a,this.i);this.g.checked=!1;this.o.style.display="inline";
break;case fl:this.b.style.display="none";this.h.style.display="none";this.j.style.display="none";600<a.width?ol(this,.49,this.a):ol(this,.95*this.u,this.a);nl(this,this.a,this.i,this.c);this.g.checked=!0;this.o.style.display="inline";break;case gl:this.a.style.display="none";this.i.style.display="none";this.c.style.display="none";this.h.style.display="none";ol(this,.95*this.v,this.b);nl(this,this.b,this.j);this.g.checked=!1;this.o.style.display="inline";break;case hl:this.a.style.display="none";
this.h.style.display="none";this.i.style.display="none";600<a.width?ol(this,.49,this.b):ol(this,.95*this.v,this.b);nl(this,this.b,this.j,this.c);this.g.checked=!0;this.o.style.display="inline";break;case il:this.a.style.display="block";this.b.style.display="block";this.c.style.display="none";this.h.style.display="none";this.i.style.display="none";this.j.style.display="none";ol(this,.49,this.a);ol(this,.49,this.b);this.g.checked=!1;this.o.style.display="inline";break;case jl:this.a.style.display="block";
this.b.style.display="block";this.c.style.display="block";this.h.style.display="none";this.i.style.display="none";this.j.style.display="none";ol(this,.49,this.a);ol(this,.49,this.b);this.g.checked=!0;this.o.style.display="inline";break;default:throw Error('redoLayout: no such layout "'+this.f+'"');}};
function ol(a,b,c){var d=Rj().height-80,e=a.B.offsetWidth||a.B.getBoundingClientRect().width,f=Tf(a.s);b=Math.min(b,d/e*(f.I()/f.J()));b=Math.floor(100*b)+"%";a.c.style.width=b;a.c.style.height="auto";c.style.width=b;c.style.height="auto"}g.uf=function(a){I(a,this.u)&&(this.u=a);this.Ua();U(this,ll.ac)};g.Ma=function(a){a=a.toLowerCase().trim();if(this.f!=a){a=this.f=a;switch(a){case fl:a=el;break;case hl:a=gl;break;case jl:a=il}dl(this,a);this.Ua()}};
function dl(a,b){bl(a)!=b&&C(a.O.childNodes,function(a){a.nodeType==Node.ELEMENT_NODE&&"LI"==a.tagName&&(a.className.trim()==b?a.className+=" selected":-1<a.className.indexOf("selected")&&(a.className=a.className.replace(/[ ]*selected/,"")))},a)}g.Af=function(a){I(a,this.C)&&(this.C=a);this.Ua();U(this,ll.ic)};g.Bf=function(a){I(a,this.v)&&(this.v=a);this.Ua();U(this,ll.jc)};g.Bd=function(a){this.da.style.display=a?"block":"none";(this.A.checked=a)&&this.S&&!this.ha.j&&this.S.focus()};
var cl="sim",el="graph",fl="sim+graph",gl="time_graph",hl="sim+time_graph",il="multi_graph",jl="sim+multi_graph",ll={ic:"sim-width",ac:"graph-width",jc:"time-graph-width",Ic:"layout",Oc:"show terminal"},ml=ll;function pl(a,b,c,d,e){T.call(this,"TIME_GRAPH_LAYOUT");ng(e,b);this.view=new wg("TIME_GRAPH_VIEW",new O(0,0,1,1));Ag(this.view,"FULL");zg(this.view,"FULL");Rf(b,this.view);Gg(this.view);this.a=new Ej("TIME_GRAPH_LINE_1",a);this.a.ja("lime");this.view.ea(this.a);this.f=new Kj("TIME_GRAPH_AUTO_SCALE",this.a,this.view);this.f.h=.05;this.g=new Rk(this.a);Uk(this.g,this.view.f);Nf(this.view.h,this.g);new bf(this.view,z(function(a){a.K("SCREEN_RECT_CHANGED")&&Uk(this.g,this.view.f)},this));var f=this.a.U().b;
this.a.Oa(f);this.a.za(0);Vk(this.g,this.a.a!=f);this.b=new Ej("TIME_GRAPH_LINE_2",a);Oj(this.f,this.b);this.view.ea(this.b);this.b.Oa(f);this.b.za(1);this.b.ja("red");Sk(this.g,this.b);this.c=new Ej("TIME_GRAPH_LINE_3",a);Oj(this.f,this.c);this.view.ea(this.c);this.c.Oa(f);this.c.za(-1);this.c.ja("blue");Sk(this.g,this.c);this.h=[];this.i=c;ql(this,Lg(e));a=Uc(this.a,Y.va);ql(this,new lc(a,rl.Md));a=Uc(this.b,Y.va);ql(this,new lc(a,rl.Nd));a=Uc(this.c,Y.va);ql(this,new lc(a,rl.Od));a=Uc(this.a,Y.Aa);
ql(this,new lc(a,"X:"));a=Uc(this.f,Lj.Gb);ql(this,new rk(a));a=new ae(Fj.Gc,z(function(){this.a.reset();this.b.reset();this.c.reset()},this));ql(this,a);new bf(this.a,z(function(){Vk(this.g,this.a.a!=f);this.b.Oa(this.a.a);this.c.Oa(this.a.a)},this));new Nk(b,null,{alt:!1,control:!1,pd:!1,shift:!1});this.view.Ad(!1);new bf(e,z(function(a){a.K("RESET")&&(this.view.Pb(this.view.I()/2),this.f.Ha(!0))},this));b=Kg(this.view,z(function(){this.f.Ha(!0)},this));d.appendChild(b);d=Pg(b,this);ql(this,new Vj(d))}
p(pl,T);pl.prototype.toString=function(){return""};function ql(a,b){var c=b.V();c.style.display="block";a.i.appendChild(c);a.h.push(b)}pl.prototype.Ta=function(){return[this,this.a,this.b,this.c,this.view,this.f]};var rl={Md:"line 1",Nd:"line 2",Od:"line 3"};function sl(a,b,c,d,e){Wb();T.call(this,e||"APP");this.o=b;this.b=new $k(a,800,Math.round(800*this.o.J()/this.o.I()));this.h=this.b.ha;a=this.b.s;this.i=c;Je(this.h,z(c.ga,c));new bf(c,z(function(){c.ga()},this));c.Qb(!1);this.Ab=c.c;this.O=c.U();this.f=new wg("SIM_VIEW",this.o);this.Z=this.f.h;Rf(a,this.f);this.s=new wg("STATUS_VIEW",new O(-10,-10,10,10));Rf(a,this.s);Gg(this.f,!0);this.a=new kg(d);ng(this.a,a);this.g=this.a.a;this.da=new vk(c,this.g);this.xb=new Nk(a,this.da);og(this.a,this.xb);
new Gk(this.Ab,this.Z);this.C=new ik(c);this.S=new Ve(c);this.ta=Og(this.S,this.s,this);this.A=new ue(z(c.R,c),z(this.g.Ib,this.g));this.A.ya(new L(8,4));this.ha=Ng(this.A,this.s,this);a=Kg(this.f,z(function(){Cg(this.f,this.o)},this));this.b.c.appendChild(a);this.H=Pg(a,this);this.H.Nb(!1);this.B=new fk(c,c,d);this.c=new Xk(c.U(),this.b.H,this.b.i,this.b.a,this.a);this.j=new pl(c.U(),this.b.Z,this.b.j,this.b.b,this.a)}p(sl,T);sl.prototype.toString=function(){return""};sl.prototype.le=function(){};
sl.prototype.defineNames=sl.prototype.le;sl.prototype.Ta=function(){return Ia([this,this.i,this.C,this.B,this.a,this.g,this.f,this.s,this.O],this.b.Ta(),this.c.Ta(),this.j.Ta())};sl.prototype.kd=function(a){null!=a||(a=Ca(Ka(this.i.a),function(a){return isFinite(a.a)}));null!=a&&(0>this.c.a.a&&this.c.a.Oa(a.o),0>this.c.a.f&&this.c.a.za(a.o+2));this.j.a.za(1);this.j.b.za(2);this.j.c.za(3)};sl.prototype.graphSetup=sl.prototype.kd;
function tl(a,b){a=a.b;var c=b.V();c.style.display="block";a.h.appendChild(c);a.ta.push(b)}sl.prototype.eval=function(a,b){try{return this.h.eval(a,b)}catch(c){a=this.h,b=c,a.w?console.log(b):(a.w=!0,alert(b))}};sl.prototype.eval=sl.prototype.eval;
sl.prototype.Ef=function(){dg(this.g);var a=this.h;if(null!=a.h){var b=a.h;b.s=Pe(b,!1).split(";");b.i=Pe(b,!0).split(";")}b=window.location.href;var c=b.indexOf("?");-1<c?(b=b.slice(c+1),b=decodeURIComponent(b),a.eval(b),b=!0):b=!1;b||Ie(a);vg(this.i);this.i.ga();this.a.la()};sl.prototype.setup=sl.prototype.Ef;sl.prototype.start=function(){ig(this.a.b)};sl.prototype.start=sl.prototype.start;function ul(a){var b,c=[];for(b=0;4>b;b++){var d=null;switch(b){case 0:d=uk(12.02,.01,2,vl.Vc,wl.Vc);d.aa(new L(N.m(),N.l()-6-.005),0);hd(d);break;case 1:d=uk(.01,12.02,3,vl.Xc,wl.Xc);d.aa(new L(N.m()+6.005,N.l()),0);break;case 2:d=uk(12.02,.01,0,vl.Yc,wl.Yc);d.aa(new L(N.m(),N.l()+6.005),0);break;case 3:d=uk(.01,12.02,1,vl.Wc,wl.Wc),d.aa(new L(N.m()-6-.005,N.l()),0)}null!=d&&(d.Na(K),d.w=1,c.push(d),a.Ea(d))}for(b=0;b<c.length;b++){a=c[b];a.H=Ja(a.H,c);a=a.H;d={};for(var e=0,f=0;f<a.length;){var h=
a[f++];var k=h;k=na(k)?"o"+(k[oa]||(k[oa]=++qa)):(typeof k).charAt(0)+k;Object.prototype.hasOwnProperty.call(d,k)||(d[k]=!0,a[e++]=h)}a.length=e}}var vl={Vc:"wall bottom",Xc:"wall right",Wc:"wall left",Yc:"wall top"},wl=vl;function xl(a,b,c){Yi(a,new Ni(void 0===c?.05:c,.15,a.c));a instanceof ij&&(a.sd(.01),a.td(.5),jj(a,"velocity_and_distance"));a.zd(.6);bj(a,"serial grouped lastpass");b.i=new Md(a);b.A=!0;b.v=.025}function yl(a,b){xl(a,b);b=sk(.2,"fast_ball");b.Na(.1);b.aa(new L(-5,0),0);md(b,new L(200,153),0);b.w=.95;a.Ea(b);ul(a)}ua("module$exports$myphysicslab$test$SpeedTest.ball_vs_wall_setup",yl);
ua("module$exports$myphysicslab$test$SpeedTest.ball_vs_circle_setup",function(a,b){xl(a,b);b=sk(.2,"fast_ball");b.Na(.1);b.aa(new L(-5,0),0);md(b,new L(200,153),0);a.Ea(b);ul(a);b=sk(4,"fixBall");b.Na(K);b.aa(new L(0,0),0);a.Ea(b);$i(a,.95)});
ua("module$exports$myphysicslab$test$SpeedTest.small_small_setup",function(a,b){xl(a,b,0);new O(-32,-12,32,12);b.i=new ck(a);b.v=.1;b=tk(1,1,"block0");b.aa(new L(-30,0),Math.PI/4);md(b,new L(100,0),0);var c=tk(1,1.3,"block1");c.aa(new L(5,0));a.Ea(b);a.Ea(c);$i(a,1)});function zl(a){var b=new O(-6,-6,6,6),c=new ij,d=new Pd(c);sl.call(this,a,b,c,d);this.v=c;yl(this.v,d);tl(this,Lg(this.a));a=Uc(this.C,jk.bb);tl(this,new rk(a));a=Tc(this.i,Si.Db);tl(this,new Vj(a));tl(this,new Vj(this.ta));tl(this,new Vj(this.ha));tl(this,new Vj(this.H));a=Uc(this.a,lg.Fb);tl(this,new rk(a));a=Uc(this.a.a,Yf.Eb);tl(this,new rk(a));a=Vc(this.B,gk.sb);tl(this,new lc(a));a=Hg(this.b.s);tl(this,a);a=Vc(this.v,Si.rb);tl(this,new lc(a));a=Vc(this.v,Si.ub);tl(this,new lc(a));a=[this.O];
ka(void 0)&&(a=Ia(a,void 0));this.u=Mg(this.Ta(),a,this.a,this.h);tl(this,Qg(this.u,this.a));Yk(this.c,Qg(this.u,this.a));ql(this.j,Qg(this.u,this.a));this.kd()}p(zl,sl);zl.prototype.toString=function(){return""};ua("makeSingleViewerApp",function(a){return new zl(a)});}).call(window)

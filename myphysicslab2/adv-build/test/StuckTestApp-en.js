(/*Copyright_2016_Erik_Neumann_All_Rights_Reserved_www.myphysicslab.com*/function(){'use strict';var g,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ba;if("function"==typeof Object.setPrototypeOf)ba=Object.setPrototypeOf;else{var ca;a:{var da={O:!0},fa={};try{fa.__proto__=da;ca=fa.O;break a}catch(a){}ca=!1}ba=ca?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ha=ba;
function p(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(ha)ha(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Hd=b.prototype}var ia=this;function r(a){return void 0!==a}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function ja(){}
function ka(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function la(a){return"array"==ka(a)}function ma(a){var b=ka(a);return"array"==b||"object"==b&&"number"==typeof a.length}function na(a){return"function"==ka(a)}function oa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var pa="closure_uid_"+(1E9*Math.random()>>>0),qa=0;function ra(a,b,c){return a.call.apply(a.bind,arguments)}
function sa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function x(a,b,c){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ra:sa;return x.apply(null,arguments)}var ta=Date.now||function(){return+new Date};
function ua(a,b){a=a.split(".");var c=ia;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&r(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}}function wa(a,b){function c(){}c.prototype=b.prototype;a.Hd=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Zf=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};var xa=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(u(a))return u(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},z=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=u(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function ya(a,b,c){var d=a.length,e=u(a)?a.split(""):a;for(--d;0<=d;--d)d in e&&b.call(c,e[d],d,a)}
var za=Array.prototype.filter?function(a,b,c){return Array.prototype.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,h=u(a)?a.split(""):a,l=0;l<d;l++)if(l in h){var k=h[l];b.call(c,k,l,a)&&(e[f++]=k)}return e},Aa=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=u(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ba=Array.prototype.reduce?function(a,b,c){return Array.prototype.reduce.call(a,
b,c)}:function(a,b,c){var d=c;z(a,function(c,f){d=b.call(void 0,d,c,f,a)});return d};function Ca(a,b){var c=0;z(a,function(a,e,f){b.call(void 0,a,e,f)&&++c},void 0);return c}function Da(a,b){b=Ea(a,b,void 0);return 0>b?null:u(a)?a.charAt(b):a[b]}function Ea(a,b,c){for(var d=a.length,e=u(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function A(a,b){return 0<=xa(a,b)}function Fa(a){if(!la(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}
function Ga(a,b){b=xa(a,b);var c;(c=0<=b)&&Ha(a,b);return c}function Ha(a,b){return 1==Array.prototype.splice.call(a,b,1).length}function Ia(a,b,c){var d=0;ya(a,function(e,f){b.call(c,e,f,a)&&Ha(a,f)&&d++})}function Ja(a){return Array.prototype.concat.apply([],arguments)}function Ka(a){return Array.prototype.concat.apply([],arguments)}function B(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function La(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(ma(d)){var e=a.length||0,f=d.length||0;a.length=e+f;for(var h=0;h<f;h++)a[e+h]=d[h]}else a.push(d)}}function Ma(a,b,c,d){Array.prototype.splice.apply(a,Na(arguments,1))}function Na(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Oa(a,b){a.sort(b||Pa)}
function Qa(a,b){for(var c=Array(a.length),d=0;d<a.length;d++)c[d]={index:d,value:a[d]};var e=b||Pa;Oa(c,function(a,b){return e(a.value,b.value)||a.index-b.index});for(d=0;d<a.length;d++)a[d]=c[d].value}function Ra(a,b){if(!ma(a)||!ma(b)||a.length!=b.length)return!1;for(var c=a.length,d=Sa,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function Pa(a,b){return a>b?1:a<b?-1:0}function Sa(a,b){return a===b}function Ta(a){for(var b=[],c=0;c<a;c++)b[c]=-1;return b};var Ua=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function Va(a,b){return a<b?-1:a>b?1:0};var Wa;a:{var Xa=ia.navigator;if(Xa){var Ya=Xa.userAgent;if(Ya){Wa=Ya;break a}}Wa=""};function Za(a){Za[" "](a);return a}Za[" "]=ja;function $a(a,b){var c=ab;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var bb=-1!=Wa.indexOf("Opera"),cb=-1!=Wa.indexOf("Trident")||-1!=Wa.indexOf("MSIE"),db=-1!=Wa.indexOf("Edge"),eb=-1!=Wa.indexOf("Gecko")&&!(-1!=Wa.toLowerCase().indexOf("webkit")&&-1==Wa.indexOf("Edge"))&&!(-1!=Wa.indexOf("Trident")||-1!=Wa.indexOf("MSIE"))&&-1==Wa.indexOf("Edge"),fb=-1!=Wa.toLowerCase().indexOf("webkit")&&-1==Wa.indexOf("Edge");function gb(){var a=ia.document;return a?a.documentMode:void 0}var hb;
a:{var ib="",kb=function(){var a=Wa;if(eb)return/rv:([^\);]+)(\)|;)/.exec(a);if(db)return/Edge\/([\d\.]+)/.exec(a);if(cb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(fb)return/WebKit\/(\S+)/.exec(a);if(bb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();kb&&(ib=kb?kb[1]:"");if(cb){var lb=gb();if(null!=lb&&lb>parseFloat(ib)){hb=String(lb);break a}}hb=ib}var ab={};
function mb(a){return $a(a,function(){for(var b=0,c=Ua(String(hb)).split("."),d=Ua(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",l=d[f]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""];if(0==h[0].length&&0==l[0].length)break;b=Va(0==h[1].length?0:parseInt(h[1],10),0==l[1].length?0:parseInt(l[1],10))||Va(0==h[2].length,0==l[2].length)||Va(h[2],l[2]);h=h[3];l=l[3]}while(0==b)}return 0<=b})}var nb;var ob=ia.document;
nb=ob&&cb?gb()||("CSS1Compat"==ob.compatMode?parseInt(hb,10):5):void 0;var pb;(pb=!cb)||(pb=9<=Number(nb));var qb=pb,rb=cb&&!mb("9"),sb=function(){if(!ia.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});ia.addEventListener("test",ja,b);ia.removeEventListener("test",ja,b);return a}();function tb(a,b){this.type=a;this.c=this.target=b}tb.prototype.b=function(){};function ub(a,b){tb.call(this,a?a.type:"");this.relatedTarget=this.c=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.a=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.f=null;if(a){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.c=b;if(b=a.relatedTarget){if(eb){a:{try{Za(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==
c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;null===d?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.a=a.keyCode||0;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=
a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType=u(a.pointerType)?a.pointerType:vb[a.pointerType]||"";this.f=a;a.defaultPrevented&&this.b()}}wa(ub,tb);var vb={2:"touch",3:"pen",4:"mouse"};ub.prototype.b=function(){ub.Hd.b.call(this);var a=this.f;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,rb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var wb="closure_listenable_"+(1E6*Math.random()|0),xb=0;function yb(a,b,c,d,e){this.listener=a;this.a=null;this.src=b;this.type=c;this.capture=!!d;this.c=e;this.key=++xb;this.ib=this.b=!1}function zb(a){a.ib=!0;a.listener=null;a.a=null;a.src=null;a.c=null};function Ab(a){this.src=a;this.a={};this.b=0}Ab.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var h=Bb(a,b,d,e);-1<h?(b=a[h],c||(b.b=!1)):(b=new yb(b,this.src,f,!!d,e),b.b=c,a.push(b));return b};Ab.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.a))return!1;var e=this.a[a];b=Bb(e,b,c,d);return-1<b?(zb(e[b]),Ha(e,b),0==e.length&&(delete this.a[a],this.b--),!0):!1};
function Cb(a,b){var c=b.type;c in a.a&&Ga(a.a[c],b)&&(zb(b),0==a.a[c].length&&(delete a.a[c],a.b--))}function Bb(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.ib&&f.listener==b&&f.capture==!!c&&f.c==d)return e}return-1};var Db="closure_lm_"+(1E6*Math.random()|0),Eb={},Fb=0;function C(a,b,c,d,e){if(d&&d.once)Gb(a,b,c,d,e);else if(la(b))for(var f=0;f<b.length;f++)C(a,b[f],c,d,e);else c=Hb(c),a&&a[wb]?a.a.add(String(b),c,!1,oa(d)?!!d.capture:!!d,e):Ib(a,b,c,!1,d,e)}
function Ib(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var h=oa(e)?!!e.capture:!!e,l=Jb(a);l||(a[Db]=l=new Ab(a));c=l.add(b,c,d,h,f);if(!c.a){d=Kb();c.a=d;d.src=a;d.listener=c;if(a.addEventListener)sb||(e=h),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(Lb(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");Fb++}}
function Kb(){var a=Mb,b=qb?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function Gb(a,b,c,d,e){if(la(b))for(var f=0;f<b.length;f++)Gb(a,b[f],c,d,e);else c=Hb(c),a&&a[wb]?a.a.add(String(b),c,!0,oa(d)?!!d.capture:!!d,e):Ib(a,b,c,!0,d,e)}function Lb(a){return a in Eb?Eb[a]:Eb[a]="on"+a}
function Nb(a,b,c,d){var e=!0;if(a=Jb(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.ib&&(f=Ob(f,d),e=e&&!1!==f)}return e}
function Ob(a,b){var c=a.listener,d=a.c||a.src;if(a.b&&!v(a)&&a&&!a.ib){var e=a.src;if(e&&e[wb])Cb(e.a,a);else{var f=a.type,h=a.a;e.removeEventListener?e.removeEventListener(f,h,a.capture):e.detachEvent?e.detachEvent(Lb(f),h):e.addListener&&e.removeListener&&e.removeListener(h);Fb--;(f=Jb(e))?(Cb(f,a),0==f.b&&(f.src=null,e[Db]=null)):zb(a)}}return c.call(d,b)}
function Mb(a,b){if(a.ib)return!0;if(!qb){if(!b)a:{b=["window","event"];for(var c=ia,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new ub(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(h){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.c;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;0<=e;e--){b.c=d[e];var f=Nb(d[e],a,!0,b);c=c&&f}for(e=0;e<d.length;e++)b.c=d[e],f=Nb(d[e],a,!1,b),c=c&&f}return c}return Ob(a,
new ub(b,this))}function Jb(a){a=a[Db];return a instanceof Ab?a:null}var Pb="__closure_events_fn_"+(1E9*Math.random()>>>0);function Hb(a){if(na(a))return a;a[Pb]||(a[Pb]=function(b){return a.handleEvent(b)});return a[Pb]};function Qb(a){var b=document.createElement("img");b.src=a;b.width=30;b.height=r(void 0)?void 0:30;return b}function Rb(a){for(var b=Array(a),c=0;c<a;c++)b[c]=!1;return b}function D(a){for(var b=Array(a),c=0;c<a;c++)b[c]=0;return b}function Sb(a){return null!=a?a.toExponential(7):null===a?"null":"undefined"}
function Tb(a){var b,c;v(b)||(b=2);u(c)||(c="  ");var d=String(a),e="",f=0,h=d.length,l=!1,k=[],m="",n=0;a:for(;n<h;n++){var q=d.charAt(n);if(l)if(" "==q)continue;else l=!1;if("{"==q||"["==q){f++;if(f<=b){e+=q+"\n";for(var t=0;t<f;t++)e+=c;l=!0}else e+=q;k.push(m);m="{"==q?"}":"]"}else if(q==m){if(f<=b)for(f--,e+="\n",t=0;t<f;t++)e+=c;else f--;e+=q;m=k.pop();if(0>f)throw Error("unbalanced "+m+" at "+n+" in "+a);}else{if('"'==q||"'"==q){t=q;var w=n;for(e+=q;++n<h;)if(q=d.charAt(n),e+=q,q==t)continue a;
throw Error("unbalanced quote at "+w+" in "+a);}if((","==q||";"==q)&&f<=b){e+=q+"\n";for(t=0;t<f;t++)e+=c;l=!0}else e+=q}}return e=e.replace(/^\s+\n/gm,"")}function Ub(){window.onerror=function(a,b,c){3>Vb++&&alert(a+"\n"+b+":"+c)}}function Wb(a){void 0!==a&&(Xb=a)}function Yb(){return Zb&&!$b?.001*performance.now():.001*ta()}function ac(a){if(!isFinite(a))throw Error("not a finite number "+a);return a}function bc(a){if(isNaN(a))throw Error("not a number "+a);return a}
function E(a){return a.toUpperCase().replace(/[ -]/g,"_")}function cc(a){if(!a.match(/^[A-Z_][A-Z_0-9]*$/))throw Error("not a valid name: "+a);return a}function F(a,b,c){c=c||1E-14;if(0>=c)throw Error("epsilon must be positive "+c);var d=d||1;if(0>=d)throw Error("magnitude must be positive "+d);var e=Math.max(Math.abs(a),Math.abs(b));return Math.abs(a-b)>(e>d?e:d)*c}function dc(a){for(var b=a.length,c=0;c<b;c++)a[c]=0}
var Xb=".",ec=Math.pow(2,53),$b=!1,Zb=oa(performance)&&na(performance.now),G=Number.NaN,fc=Number.NEGATIVE_INFINITY,Vb=0,I=Number.POSITIVE_INFINITY;function gc(a,b,c,d,e){this.h=c;this.o=d;this.g=a;this.c=b;this.b=xa(this.c,c());this.a=document.createElement("select");hc(this);this.i=u(e)?e:"";a=null;0<this.i.length&&(a=document.createElement("LABEL"),a.appendChild(document.createTextNode(this.i)),a.appendChild(this.a));this.a.selectedIndex=this.b;this.s=null!==a?a:this.a;C(this.a,"change",this.j,!0,this)}gc.prototype.toString=function(){return""};
function hc(a){for(var b=a.a.options.length=0,c=a.g.length;b<c;b++)a.a.options[b]=new Option(a.g[b])}gc.prototype.Z=function(){return this.s};gc.prototype.j=function(){this.a.selectedIndex!==this.b&&ic(this,this.a.selectedIndex)};gc.prototype.X=function(){var a=xa(this.c,this.h());ic(this,a)};
function ic(a,b){if(a.b!==b){var c=a.a.options.length;if(a.c.length!=c)throw Error("ChoiceControl: values_.length="+a.c.length+" but menu.options.length="+c);try{-1>b?b=-1:b>c-1&&(b=c-1),a.b=b,-1<b&&a.o(a.c[b])}catch(d){alert(d),a.b=xa(a.c,a.h())}a.a.selectedIndex=a.b}};function jc(a,b,c,d){c=void 0!==c?c:a.eb();d=void 0!==d?d:a.gb();b=void 0!==b?b:a.getName(!0);gc.call(this,c,d,x(a.Mb,a),x(a.jb,a),b);this.f=a;kc(this.f.W(),this)}p(jc,gc);jc.prototype.toString=function(){return""};jc.prototype.X=function(a){a.G()==this.f&&a.I("CHOICES_MODIFIED")?setTimeout(x(this.v,this),50):a==this.f&&gc.prototype.X.call(this,a)};
jc.prototype.v=function(){var a=this.f.eb();if(!Ra(this.g,a)){var b=this.f.gb();if(a.length!=b.length)throw Error();this.g=a;this.c=b;this.b=xa(this.c,this.h());hc(this);this.a.selectedIndex=this.b}};function lc(){}lc.prototype.toString=function(){return""};lc.prototype.reset=function(){};function K(a,b,c){c=v(c)?c:0;this.a=bc(a);this.b=bc(b);this.c=bc(c)}g=K.prototype;g.toString=function(){return""};function mc(a){return a instanceof K?a:new K(a.m(),a.l(),a.da())}g.add=function(a){return new K(this.a+a.m(),this.b+a.l(),this.c+a.da())};function nc(a,b){var c=a.a-b.m(),d=a.b-b.l();a=a.c-b.da();return c*c+d*d+a*a}function oc(a,b){return Math.sqrt(nc(a,b))}
function pc(a,b){if(1===b)return a;if(1E-10>b)throw Error("Vector.divide by near zero factor "+Sb(b));return new K(a.a/b,a.b/b,a.c/b)}function qc(a,b){a=a.a*b.m()+a.b*b.l()+a.c*b.da();if(isNaN(a))throw Error("");return a}g.Na=function(a){return null===a?!1:a.m()===this.a&&a.l()===this.b&&a.da()===this.c};function rc(a){return Math.atan2(a.b,a.a)}g.m=function(){return this.a};g.l=function(){return this.b};g.da=function(){return this.c};g.length=function(){return Math.sqrt(sc(this))};
function tc(a){var b=Math.abs(a.a)+Math.abs(a.b);return 0==a.c?b:b+Math.abs(a.c)}function sc(a){return 0===a.c?a.a*a.a+a.b*a.b:a.a*a.a+a.b*a.b+a.c*a.c}function uc(a,b){return 1===b?a:new K(b*a.a,b*a.b,b*a.c)}g.na=function(a,b){return F(this.a,a.m(),b)||F(this.b,a.l(),b)||F(this.c,a.da(),b)?!1:!0};function vc(a){return pc(a,a.length())}function wc(a,b,c){if(r(c))var d=b;else d=Math.cos(b),c=Math.sin(b);if(1E-12<Math.abs(d*d+c*c-1))throw Error();return new K(a.a*d-a.b*c,a.a*c+a.b*d,a.c)}
function L(a,b){return new K(a.a-b.m(),a.b-b.l(),a.c-b.da())}new K(1,0);var xc=new K(0,1),M=new K(0,0);new K(0,-1);new K(-1,0);function N(a,b,c,d){this.c=bc(a);this.a=bc(c);this.b=bc(b);this.f=bc(d);if(a>c)throw Error("DoubleRect: left > right "+a+" > "+c);if(b>d)throw Error("DoubleRect: bottom > top "+b+" > "+d);}g=N.prototype;g.toString=function(){return""};function yc(a,b){return b.m()>=a.c&&b.m()<=a.a&&b.l()>=a.b&&b.l()<=a.f}g.Na=function(a){return a===this?!0:a instanceof N?a.ga()==this.c&&a.a==this.a&&a.b==this.b&&a.aa()==this.f:!1};function zc(a){return new K(Ac(a),Bc(a))}function Ac(a){return(a.c+a.a)/2}
function Bc(a){return(a.b+a.f)/2}g.K=function(){return this.f-this.b};g.ga=function(){return this.c};g.aa=function(){return this.f};g.J=function(){return this.a-this.c};g.sa=function(){return 1E-16>this.J()||1E-16>this.K()};function Cc(a,b,c){if(yc(a,b)||yc(a,c))return!0;var d=b.m();b=b.l();var e=c.m();c=c.l();var f=a.c;if(d<f&&e<f)return!1;f=a.a;if(d>f&&e>f)return!1;f=a.b;if(b<f&&c<f)return!1;f=a.f;return b>f&&c>f?!1:!0}
g.na=function(a,b){return F(this.c,a.ga(),b)||F(this.b,a.b,b)||F(this.a,a.a,b)||F(this.f,a.aa(),b)?!1:!0};g.scale=function(a,b){b=void 0===b?a:b;var c=Ac(this),d=Bc(this),e=this.J(),f=this.K();return new N(c-a*e/2,d-b*f/2,c+a*e/2,d+b*f/2)};g.translate=function(a,b){v(a)||(b=a.l(),a=a.m());if(!v(a)||!v(b))throw Error();return new N(this.c+a,this.b+b,this.a+a,this.f+b)};var Dc=new N(0,0,0,0);function Ec(a,b){a=a||"SIM_OBJ"+Fc++;this.Tc=cc(E(a));this.je=b||a;this.U=I}g=Ec.prototype;g.toString=function(){return""};g.getName=function(a){return a?this.je:this.Tc};g.Ib=function(){return!1};g.I=function(a){return this.Tc==E(a)};g.kb=function(a){return a==this};var Fc=1;function Gc(a,b,c){Ec.call(this,a);this.b=oa(b)?b:M;this.a=oa(c)?c:M}p(Gc,Ec);g=Gc.prototype;g.toString=function(){return""};g.ca=function(){return this.a};g.R=function(){return this.b};g.wa=function(){return L(this.ca(),this.R())};g.kb=function(a,b){return a instanceof Gc&&a.R().na(this.R(),b)?a.ca().na(this.ca(),b):!1};function O(a,b,c){this.a=cc(E(b));this.b=a;this.c=c}g=O.prototype;g.toString=function(){return""};g.getName=function(){return this.a};g.W=function(){return this.b};g.G=function(){return this.c};g.I=function(a){return this.a==E(a)};function Hc(a,b,c,d,e){this.i=a;this.b=cc(E(b));this.g=c;this.f=d;this.h=e;this.a=!1;this.c=[];this.j=[]}g=Hc.prototype;g.toString=function(){return""};g.Mb=function(){return this.G().toString()};g.eb=function(){return B(this.c)};g.getName=function(a){return a?this.g:this.b};g.W=function(){return this.i};g.G=function(){return this.f()};g.gb=function(){return Aa(this.j,function(a){return a.toString()})};g.Ya=function(){return this.a};g.I=function(a){return this.b==E(a)};g.hb=function(a){this.a=a};
g.jb=function(a){this.$a("true"==a||"TRUE"==a)};g.$a=function(a){if("boolean"!=typeof a)throw Error("non-boolean value: "+a);a!==this.G()&&this.h(a)};function Q(a,b,c,d,e){this.h=a;this.o=cc(E(b));this.v=c;this.s=d;this.u=e;this.j=!1;this.g=3;this.f=-1;this.a=0;this.b=I;this.i=[];this.c=[]}g=Q.prototype;g.toString=function(){return""};g.Mb=function(){return this.G().toString()};g.eb=function(){return B(this.i)};g.getName=function(a){return a?this.v:this.o};g.W=function(){return this.h};g.G=function(){return this.s()};g.gb=function(){return Aa(this.c,function(a){return a.toString()})};g.Ya=function(){return this.j};
g.I=function(a){return this.o==E(a)};function Ic(a,b,c){if(c.length!==b.length)throw Error("choices and values not same length");a.i=b;a.c=c;b=new O(a.h,"CHOICES_MODIFIED",a);R(a.h,b)}g.hb=function(a){this.j=a};function Jc(a){a.f=0;return a}g.jb=function(a){var b=Number(a);if(isNaN(b))throw Error("not a number: "+a);this.Ad(b)};function Kc(a,b){if(b>a.G()||b>a.b)throw Error("out of range: "+b+" value="+a.G()+" upper="+a.b);a.a=b;return a}function Lc(a,b){a.g=b;return a}
function Mc(a){if(1<a.G()||1<a.a)throw Error("out of range: 1 value="+a.G()+" lower="+a.a);a.b=1;return a}g.Ad=function(a){if(!v(a))throw Error("not a number: "+a);if(a<this.a||a>this.b)throw Error("out of range. "+a+" is not between "+this.a+" and "+this.b);if(0<this.c.length&&!A(this.c,a))throw Error(a+" is not an allowed value among: ["+this.c.join(",")+"]");a!==this.G()&&this.u(a)};function Nc(a,b,c,d,e,f,h){this.o=a;this.g=cc(E(b));this.i=c;this.h=d;this.j=e;this.f=!1;this.b=I;this.c=[];this.a=[];if(null!=f)if(null!=h){this.c=f;if(h.length!==f.length)throw Error("different lengths choices:"+f+" values:"+h);this.a=h}else throw Error("values is not defined");}g=Nc.prototype;g.toString=function(){return""};g.Mb=function(){return this.G()};g.eb=function(){return B(this.c)};g.getName=function(a){return a?this.i:this.g};g.W=function(){return this.o};g.G=function(){return this.h()};
g.gb=function(){return B(this.a)};g.Ya=function(){return this.f};g.I=function(a){return this.g==E(a)};g.hb=function(a){this.f=a};g.jb=function(a){if(!u(a))throw Error("non-string value: "+a);if(a.length>this.b)throw Error("string too long: "+a+" maxLength="+this.b);if(0<this.a.length&&!A(this.a,a))throw Error('"'+a+'" is not an allowed value among: ['+this.a.join(",")+"]");a!==this.G()&&this.j(a)};function S(a){if(!a)throw Error("no name");this.qa=cc(E(a));this.F=[];this.P=[];this.M=!1;this.v=[]}g=S.prototype;g.toString=function(){return""};function kc(a,b){a.v.push({action:!0,Ob:b});Oc(a)}function Oc(a){if(!a.M){for(var b=0,c=a.v.length;b<c;b++){var d=a.v[b];d.action?A(a.F,d.Ob)||a.F.push(d.Ob):Ga(a.F,d.Ob)}a.v=[]}}g.D=function(a){var b=a.getName(),c=Pc(this,b);if(null!=c)throw Error("parameter "+b+" already exists: "+c);this.P.push(a)};
function R(a,b){a.M=!0;try{z(a.F,function(a){a.X(b)})}finally{a.M=!1,Oc(a)}}function T(a,b){var c=Pc(a,b);if(null==c)throw Error("unknown Parameter "+b);R(a,c)}g.getName=function(){return this.qa};function Pc(a,b){b=E(b);return Da(a.P,function(a){return a.getName()==b})}g.Nb=function(a){var b=Pc(this,a);if(null!=b)return b;throw Error("Parameter not found "+a);};function Qc(a,b){a=Pc(a,b);if(a instanceof Hc)return a;throw Error("ParameterBoolean not found "+b);}
function Rc(a,b){a=Pc(a,b);if(a instanceof Q)return a;throw Error("ParameterNumber not found "+b);}function Sc(a,b){a=Pc(a,b);if(a instanceof Nc)return a;throw Error("ParameterString not found "+b);}g.getParameters=function(){return B(this.P)};function Tc(a,b){a.v.push({action:!1,Ob:b});Oc(a)};function Uc(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.f=d;this.g=e;this.h=f}Uc.prototype.toString=function(){return""};function Vc(a,b){b.transform(a.a,a.b,a.c,a.f,a.g,a.h)}function Wc(a,b){return new Uc(a.a*b.a+a.c*b.b,a.b*b.a+a.f*b.b,a.a*b.c+a.c*b.f,a.b*b.c+a.f*b.f,a.a*b.g+a.c*b.h+a.g,a.b*b.g+a.f*b.h+a.h)}function Xc(a,b,c,d){a=Yc(a,b,c);d.lineTo(a.m(),a.l())}function Zc(a,b){var c=Math.cos(b);b=Math.sin(b);return new Uc(c*a.a+b*a.c,c*a.b+b*a.f,-b*a.a+c*a.c,-b*a.b+c*a.f,a.g,a.h)}
Uc.prototype.scale=function(a,b){return new Uc(this.a*a,this.b*a,this.c*b,this.f*b,this.g,this.h)};function $c(a,b){b.setTransform(a.a,a.b,a.c,a.f,a.g,a.h)}function Yc(a,b,c){v(b)||(c=b.l(),b=b.m());if(!v(b)||!v(c))throw Error();return new K(a.a*b+a.c*c+a.g,a.b*b+a.f*c+a.h)}Uc.prototype.translate=function(a,b){v(a)||(b=a.l(),a=a.m());if(!v(a)||!v(b))throw Error();return new Uc(this.a,this.b,this.c,this.f,this.g+this.a*a+this.c*b,this.h+this.b*a+this.f*b)};var ad=new Uc(1,0,0,1,0,0);function bd(a,b){Ec.call(this,a,b);this.a=1;this.b=M;this.w=this.A=0;this.u=1;this.T=M;this.s=0;this.c=M;this.Qc=null;this.L=[M];this.v=0;this.o=G}p(bd,Ec);g=bd.prototype;g.toString=function(){return""};function U(a,b){var c=b.m()-a.c.m();b=b.l()-a.c.l();return new K(a.b.m()+(c*a.u-b*a.w),a.b.l()+(c*a.w+b*a.u))}function cd(a){var b=new Uc(1,0,0,1,a.b.m(),a.b.l());b=Zc(b,a.A);return b.translate(-a.c.m(),-a.c.l())}function dd(a){return U(a,a.Kb())}g.K=function(){return this.Ea()-this.ma()};
function ed(a){var b=fc;z(a.nd(),function(a){a=U(this,a);a.l()>b&&(b=a.l())},a);return b}g.J=function(){return this.Qa()-this.ia()};function fd(a){if(r(void 0)){var b=gd(a,L(mc(void 0),a.c));return new K(a.T.m()-b.l()*a.s,a.T.l()+b.m()*a.s)}return a.T}g.Ib=function(){return!0};function gd(a,b){return wc(mc(b),a.u,a.w)}function hd(a,b){return wc(mc(b),a.u,-a.w)}function id(a,b,c){a.c=new K(b,c);a.o=G}g.Va=function(a){if(0>=a||!v(a))throw Error("mass must be positive "+a);this.a=a;return this};
g.H=function(a,b){this.b=mc(a);r(b)&&this.A!=b&&(this.A=b,this.w=Math.sin(b),this.u=Math.cos(b))};function jd(a,b,c){a.T=mc(b);if(r(c)){if(!isFinite(c))throw Error("angular velocity must be finite "+c);a.s=c}}function kd(a,b){var c=b.m()-a.b.m();b=b.l()-a.b.l();var d=-a.w,e=a.u;return new K(a.c.m()+(c*e-b*d),a.c.l()+(c*d+b*e))};function ld(a,b){r(a)&&""!=a?b=b?b:a:(b=md++,a=nd.Mc+b,b=od.Mc+b);bd.call(this,a,b);this.f=this.g=this.a=1}p(ld,bd);g=ld.prototype;g.toString=function(){return""};function pd(a,b){b=new ld(b,void 0);b.g=a;b.f=a;return b}g.gd=function(a){a.beginPath();var b=this.f/2,c=this.g/2;na(a.ellipse)?(a.moveTo(c,0),a.ellipse(0,0,c,b,0,0,2*Math.PI,!1)):(a.arc(0,0,Math.min(c,b),0,2*Math.PI,!1),a.closePath())};g.ma=function(){return-this.f/2};g.Kb=function(){return M};
g.Pa=function(){var a=this.g/2,b=this.f/2;return Math.sqrt(a*a+b*b)};g.ia=function(){return-this.g/2};g.Xa=function(){if(isNaN(this.o)){var a=this.c.m(),b=this.c.l(),c=b-this.ma(),d=a-this.ia();d<c&&(c=d);d=this.Ea()-b;d<c&&(c=d);d=this.Qa()-a;d<c&&(c=d);this.o=c}return this.o};g.Qa=function(){return this.g/2};g.Ea=function(){return this.f/2};g.nd=function(){var a=this.g/2,b=this.f/2;return[new K(-a,-b),new K(a,-b),new K(a,b),new K(-a,b)]};
g.Va=function(a){if(0>a||!v(a))throw Error("mass must be non-negative "+a);this.a=a;return this};g.kb=function(a,b){return a instanceof ld&&a.b.na(this.b,b)&&!F(a.g,this.g,b)&&!F(a.f,this.f,b)?!0:!1};var md=1,nd={Mc:"PointMass"},od=nd;function qd(a,b,c,d,e,f,h){Ec.call(this,a);this.a=b;this.c=c;this.b=e;this.g=d;this.f=f;this.h=void 0===h?0:h}p(qd,Ec);g=qd.prototype;g.toString=function(){return""};g.ca=function(){return this.R().add(this.wa())};g.R=function(){return 0==this.g?U(this.a,this.c):this.c};g.wa=function(){return 0==this.f?gd(this.a,this.b):this.b};g.kb=function(a,b){return a instanceof qd&&a.getName()==this.getName()&&this.R().na(a.R(),b)?this.wa().na(a.wa(),b):!1};function rd(a,b,c,d,e,f,h,l){Ec.call(this,a);this.b=b;this.g=mc(c);this.c=d;this.h=mc(e);this.a=f;this.f=void 0===h?0:h;this.i=l||!1}p(rd,Ec);g=rd.prototype;g.toString=function(){return""};g.Fb=function(){var a=this.R(),b=this.ca(),c=L(b,a),d=c.length(),e=-this.f*(d-this.a);c=new K(c.m()/d*-e,c.l()/d*-e,0);return[new qd("spring",this.b,a,1,c,1),new qd("spring",this.c,b,1,uc(c,-1),1)]};g.Lb=function(){};
g.ca=function(){if(null==this.h||null==this.c)throw Error();var a=U(this.c,this.h);if(this.i){var b=this.R(),c=this.a;if(oc(b,a)<=c)return a;a=vc(L(a,b));return b.add(uc(a,c))}return a};g.Gb=function(){var a=oc(this.ca(),this.R())-this.a;return.5*this.f*a*a};g.R=function(){if(null==this.g||null==this.b)throw Error();return U(this.b,this.g)};g.wa=function(){return L(this.ca(),this.R())};function sd(){S.call(this,"SIM_LIST");this.a=[]}p(sd,S);g=sd.prototype;g.toString=function(){return""};g.add=function(a){for(var b=0;b<arguments.length;b++){var c=arguments[b];if(null==c)throw Error("cannot add invalid SimObject");if(isFinite(c.U))for(var d;d=td(this,c);)this.remove(d);A(this.a,c)||(this.a.push(c),R(this,new O(this,"OBJECT_ADDED",c)))}};
g.get=function(a){if(v(a)){if(0<=a&&a<this.a.length)return this.a[a]}else if(u(a)){a=E(a);var b=Da(this.a,function(b){return b.getName()==a});if(null!=b)return b}throw Error("SimList did not find "+a);};function td(a,b){return Da(a.a,function(a){return a.kb(b,.1)})}g.indexOf=function(a){return xa(this.a,a)};g.length=function(){return this.a.length};g.remove=function(a){Ga(this.a,a)&&R(this,new O(this,"OBJECT_REMOVED",a))};
function ud(a,b){for(var c=a.a.length-1;0<=c;c--){var d=a.a[c];d.U<b&&(a.a.splice(c,1),R(a,new O(a,"OBJECT_REMOVED",d)))}};function vd(a,b,c){this.h=a;this.f=cc(E(b));this.g=c;this.a=0;this.c=!1;this.b=0}g=vd.prototype;g.toString=function(){return""};g.Mb=function(){return this.a.toString()};g.eb=function(){return[]};g.getName=function(a){return a?this.g:this.f};g.W=function(){return this.h};g.G=function(){return this.a};g.gb=function(){return[]};g.Ya=function(){return this.c};g.I=function(a){return this.f==E(a)};g.hb=function(a){this.c=a};
g.jb=function(a){var b=Number(a);if(isNaN(b))throw Error("not a number: "+a+" (ConcreteVariable)");this.a!=b&&(this.a=b,this.b++)};function wd(a,b,c){S.call(this,r(c)?c:"VARIABLES");this.b=-1;if(a.length!=b.length)throw Error("varNames and localNames are different lengths");c=0;for(var d=a.length;c<d;c++){var e=a[c];if(!u(e))throw Error("variable name "+e+" is not a string i="+c);e=cc(E(e));a[c]=e;"TIME"==e&&(this.b=c)}a:{c=a.length;if(1<c){d=Array(c);for(e=0;e<c;e++)d[e]=a[e];Oa(d);var f=d[0];for(e=1;e<c;e++){if(f==d[e]){c=!1;break a}f=d[e]}}c=!0}if(!c)throw Error("duplicate variable names");this.a=[];c=0;for(d=a.length;c<d;c++)this.a.push(new vd(this,
a[c],b[c]))}p(wd,S);g=wd.prototype;g.toString=function(){return""};g.D=function(){throw Error("addParameter not allowed on VarsList");};
function xd(a,b,c){var d=b.length;if(0==d)throw Error();if(b.length!=c.length)throw Error("names and localNames are different lengths");a:{if(0>d)throw Error();var e=0;var f=-1;for(var h=0,l=a.a.length;h<l;h++)if("DELETED"==a.a[h].getName()){if(-1==f&&(f=h),e++,e>=d)break a}else f=-1,e=0;0<e?e=d-e:(f=a.a.length,e=d);for(h=0;h<e;h++)a.a.push(new vd(a,"DELETED","DELETED"))}for(h=0;h<d;h++){e=cc(E(b[h]));if("DELETED"==e)throw Error("variable cannot be named ''+VarsList.DELETED+''");l=f+h;a.a[l]=new vd(a,
e,c[h]);"TIME"==e&&(a.b=l)}R(a,new O(a,"VARS_MODIFIED"));return f}function yd(a,b){if(0>b||b>=a.a.length)throw Error("bad variable index="+b+"; numVars="+a.a.length);}g.Nb=function(a){a=E(a);var b=Da(this.a,function(b){return b.getName()==a});if(null!=b)return b;throw Error("Parameter not found "+a);};g.getParameters=function(){return B(this.a)};g.G=function(a){yd(this,a);return this.a[a].G()};function zd(a){return Aa(a.a,function(a){return a.Ya()?NaN:a.G()})}
function Ad(a,b){if(v(b))var c=b;else if(u(b)){if(b=E(b),c=Ea(a.a,function(a){return a.getName()==b}),0>c)throw Error("unknown variable name "+b);}else throw Error();yd(a,c);return a.a[c]}g.Za=function(a){if(0==arguments.length)for(var b=0,c=this.a.length;b<c;b++)this.a[b].b++;else for(b=0,c=arguments.length;b<c;b++){var d=arguments[b];yd(this,d);this.a[d].b++}};g.jf=function(a){for(var b=0,c=arguments.length;b<c;b++){var d=arguments[b];yd(this,d);this.a[d].hb(!0)}};
function Bd(a,b,c,d){yd(a,b);a=a.a[b];if("DELETED"!=a.getName()){if(isNaN(c)&&!a.Ya())throw Error("cannot set variable "+a.getName()+" to NaN");d?a.a=c:a.a!=c&&(a.a=c,a.b++)}}function Cd(a,b,c){var d=a.a.length,e=b.length;if(e>d)throw Error("setValues bad length n="+e+" > N="+d);for(var f=0;f<d;f++)f<e&&Bd(a,f,b[f],c)}var Dd={Uc:"time"};function Ed(){this.c=this.g=0;this.b=this.a=this.f=I}Ed.prototype.toString=function(){return""};function Fd(a){a.g=0;a.c=0;a.f=I;a.a=I;a.b=I}function Gd(a,b){Fd(a);z(b,function(a){a.i?this.g++:Hd(a);Hd(a);a.L&&(this.c++,a.u<this.b&&(this.b=a.u));if((a.L||!Hd(a))&&0>Id(a)){var b=a.b;if(!isFinite(b))throw Error("distance is NaN "+a);b<this.f&&(this.f=b);isNaN(this.a)||(a=a.v,isNaN(a)?this.a=G:a<this.a&&(this.a=a))}},a);a.a==I&&(a.a=G);a.b==I&&(a.b=G)};function Jd(a){this.a=a;this.c=[];this.h=[];this.i=[];this.f=[];this.g=[]}Jd.prototype.toString=function(){return""};Jd.prototype.getName=function(a){return a?Kd.pa:E(Ld.pa)};Jd.prototype.I=function(a){return this.getName()==E(a)};
Jd.prototype.b=function(a){var b,c=this.a.S(),d=zd(c),e=d.length;this.c.length<e&&(this.c=Array(e),this.h=Array(e),this.i=Array(e),this.f=Array(e),this.g=Array(e));var f=this.c,h=this.h,l=this.i,k=this.f,m=this.g;for(b=0;b<e;b++)f[b]=d[b];dc(h);b=Md(this.a,f,h);if(null!==b)return b;for(b=0;b<e;b++)f[b]=d[b]+h[b]*a/2;dc(l);b=Md(this.a,f,l);if(null!==b)return b;for(b=0;b<e;b++)f[b]=d[b]+l[b]*a/2;dc(k);b=Md(this.a,f,k);if(null!==b)return b;for(b=0;b<e;b++)f[b]=d[b]+k[b]*a;dc(m);b=Md(this.a,f,m);if(null!==
b)return b;for(b=0;b<e;b++)d[b]+=(h[b]+2*l[b]+2*k[b]+m[b])*a/6;Cd(c,d,!0);return null};var Ld={pa:"Runge-Kutta"},Kd=Ld;function Nd(a){this.a=a;this.o=new Jd(a);this.s=.025;this.C=new lc;this.F=this.v=this.f=0;this.g=G;this.b=[];this.h=new Ed;this.B=[];this.c=!1;this.w=this.u=this.A=this.i=this.j=0}Nd.prototype.toString=function(){return""};
function Od(a,b,c){if(1E-16>b)a.a.ha();else for(ud(a.a.b,a.a.Y()+b),a.v=0,a.F=b,a.f=b,a.j=0,a.c=!1,a.g=G,a.i=0,a.A=0,a.w=0,a.u=0,Fd(a.h),a.b=[];a.v<a.F-1E-16;){Pd(a,a.f);Gd(a.h,a.b);var d=!1;if(0<a.h.c&&(Qd(a,a.f),d=!0,Gd(a.h,a.b),a.i++,3<=a.i&&(a.c||(a.c=!0),30<=a.i)))throw Error("collision was not resolved after "+a.i+" tries");a.u=Ca(a.b,function(a){var b;if(b=(a.L||!Hd(a))&&0>Id(a))b=d,b=Hd(a)?!0:b?0<a.b&&a.b<a.w+a.T:a.b>a.w-a.T&&a.b<a.w+a.T;return b});0<a.u&&(a.B=[],Rd(a),Sd(a,a.u),a.g=NaN,Gd(a.h,
a.B));d||(1E-7<a.f&&(a.i=0),a.v+=a.f,void 0!==c&&c.la(),a.c&&2<=++a.j?(a.c=!1,a.j=0):isFinite(a.g)&&(a.c=!0));Td(a,d)}}function Td(a,b){a.g=a.h.a;a.c||(a.g<a.a.Y()&&(a.c=!0),0<a.h.c&&isNaN(a.g)&&(a.c=!0));var c=a.F-a.v;a.c?(a.g=NaN,b&&(a.f/=2,a.j=0),a.f=Math.min(a.f,c)):isNaN(a.g)?a.f=c:(b=a.g-a.a.Y(),a.f=Math.min(b,c))}
function Pd(a,b){a.b=[];Ud(a.a);var c=a.o.b(b);a.a.ha();a.A++;null!=c?a.b=c:(c=zd(a.a.S()),Vd(a.a,a.b,c,b));Qa(a.b,function(a,b){a=Math.round(1E7*a.v);b=Math.round(1E7*b.v);return isNaN(a)?isNaN(b)?0:1:isNaN(b)?-1:a<b?-1:a>b?1:0});z(a.b,function(a){var b=Wd(a);a.L=b})}function Qd(a,b){Xd(a.a);a.a.ha();for(var c=a.a.Y(),d=a.b.length-1;0<=d;d--){var e=a.b[d];Wd(e)?e.Da(c):Ha(a.b,d)}c=zd(a.a.S());Vd(a.a,a.b,c,b)}
function Sd(a,b){if(Yd(a.a,a.b)){a.a.ha();var c=a.a.Y();z(a.b,function(a){a.Da(c)});a.w+=b;a.c=!1;a.j=0}else a.c=!0}function Rd(a){for(var b=a.b.length;0<b--;){var c=a.b[b];c.i||c.b<c.B||(Ha(a.b,b),a.B.push(c))}}Nd.prototype.reset=function(){this.a.reset();this.C.reset()};function Zd(){return"simultaneous;hybrid;serial grouped;serial grouped lastpass;serial separate;serial separate lastpass".split(";")}function $d(a){for(var b=Zd(),c=0,d=b.length;c<d;c++)if(a==b[c])return b[c];throw Error("not found "+a);};function ae(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}ae.prototype.a=8;ae.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};ae.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{ae.BYTES_PER_ELEMENT=8}catch(a){}ae.prototype.BYTES_PER_ELEMENT=ae.prototype.a;ae.prototype.set=ae.prototype.set;ae.prototype.toString=ae.prototype.toString;ua("Float64Array",ae)};function be(a,b){var c=v(void 0)?void 0:0;this.a=bc(a);this.b=bc(b);this.c=bc(c)}g=be.prototype;g.toString=function(){return""};g.add=function(a){this.a+=a.m();this.b+=a.l();this.c+=a.da();return this};function ce(a,b){var c=a.a-b.m(),d=a.b-b.l();a=a.c-b.da();return c*c+d*d+a*a}function de(a){a.a/=2;a.b/=2;a.c/=2;return a}g.Na=function(a){return null===a?!1:a.m()===this.a&&a.l()===this.b&&a.da()===this.c};g.m=function(){return this.a};g.l=function(){return this.b};g.da=function(){return this.c};
g.length=function(){return Math.sqrt(0===this.c?this.a*this.a+this.b*this.b:this.a*this.a+this.b*this.b+this.c*this.c)};function ee(a,b){a.a*=b;a.b*=b;a.c*=b;return a}g.na=function(a,b){return F(this.a,a.m(),b)||F(this.b,a.l(),b)||F(this.c,a.da(),b)?!1:!0};function fe(a,b){a.a=b.m();a.b=b.l();a.c=b.da();return a}function ge(a,b){a.a-=b.m();a.b-=b.l();a.c-=b.da()};function he(a,b){for(var c=0,d=0;d<b;d++)a[d]&&c++;return c}
function ie(a,b,c){var d;if(2>c.length)throw Error("");if(3!=a.length)throw Error("");var e=Array(3);for(d=0;3>d;d++)e[d]=b(a[d]);e[0]>e[1]&&je(e,a,0,1);e[1]>e[2]&&je(e,a,1,2);e[0]>e[1]&&je(e,a,0,1);d=new be(0,0);for(var f=new be(0,0),h=new be(0,0),l=new be(0,0),k=new be(0,0),m=new be(0,0),n=0;1E-6<ke(a);){n++;if(1E4<n)return c[0]=n,c[1]=1,mc(a[0]);de(fe(d,a[0]).add(a[1]));ge(ee(fe(f,d),2),a[2]);var q=b(f);if(q<e[1])if(q>=e[0])e[2]=q,fe(a[2],f),je(e,a,1,2);else{ge(ee(fe(h,f),2),d);var t=b(h);t<q?
(e[2]=t,fe(a[2],h)):(e[2]=q,fe(a[2],f));je(e,a,1,2);je(e,a,0,1)}else de(fe(l,a[2]).add(d)),q=b(l),fe(m,de(a[2])),ge(ee(fe(k,d),1.5),m),t=b(k),q<e[2]&&q<t?(e[2]=q,fe(a[2],l),e[2]<e[1]&&je(e,a,1,2),e[1]<e[0]&&je(e,a,0,1)):t<e[2]?(e[2]=t,fe(a[2],k),e[2]<e[1]&&je(e,a,1,2),e[1]<e[0]&&je(e,a,0,1)):(de(a[1].add(a[0])),de(a[2].add(a[0])),e[1]=b(a[1]),e[2]=b(a[2]),e[0]>e[1]&&je(e,a,0,1),e[1]>e[2]&&je(e,a,1,2),e[0]>e[1]&&je(e,a,0,1))}c[0]=n;c[1]=0;return mc(a[0])}
function le(a,b,c,d){var e=a.m();a=a.l();var f=b.m();b=b.l();var h=c.m();c=c.l();var l=d.m(),k=d.l();var m=e>f?e:f;if(h>m&&l>m)return null;m=e<f?e:f;if(h<m&&l<m)return null;m=a>b?a:b;if(c>m&&k>m)return null;m=a<b?a:b;if(c<m&&k<m)return null;if(1E-16>Math.abs(f-e)){if(1E-16>Math.abs(l-h))return null;var n=e;d=(k-c)/(l-h)*(n-h)+c;b<a&&(m=a,a=b,b=m);l<h&&(m=h,h=l,l=m);k<c&&(m=c,c=k,k=m);return a-1E-14<=d&&d<=b+1E-14&&h-1E-14<=n&&n<=l+1E-14&&c-1E-14<=d&&d<=k+1E-14?new K(n,d):null}if(1E-16>Math.abs(l-
h))return n=h,d=(b-a)/(f-e)*(n-e)+a,b<a&&(m=a,a=b,b=m),f<e&&(m=e,e=f,f=m),k<c&&(m=c,c=k,k=m),e-1E-14<=n&&n<=f+1E-14&&a-1E-14<=d&&d<=b+1E-14&&c-1E-14<=d&&d<=k+1E-14?new K(n,d):null;m=(b-a)/(f-e);n=(k-c)/(l-h);if(1E-16>Math.abs(n-m))return null;1E-16>Math.abs(n)?(d=(c+k)/2,n=(d-a)/m+e):1E-16>Math.abs(m)?(d=(a+b)/2,n=(d-c)/n+h):(n=(n*h-m*e-c+a)/(n-m),d=m*(n-e)+a);b<a&&(m=a,a=b,b=m);f<e&&(m=e,e=f,f=m);l<h&&(m=h,h=l,l=m);k<c&&(m=c,c=k,k=m);return e-1E-14<=n&&n<=f+1E-14&&a-1E-14<=d&&d<=b+1E-14&&h-1E-14<=
n&&n<=l+1E-14&&c-1E-14<=d&&d<=k+1E-14?new K(n,d):null}function ke(a){var b=ce(a[0],a[1]),c=ce(a[0],a[2]);c>b&&(b=c);c=ce(a[1],a[2]);c>b&&(b=c);return Math.sqrt(b)}function me(a,b){a+=" [";for(var c=0,d=b.length;c<d;c++)a+=b[c].toString()+", ";console.log(a+"]")}function ne(a,b,c){for(var d=b.length,e=Array(d),f=0;f<d;f++){for(var h=e[f]=0;h<d;h++)e[f]+=a[f][h]*b[h];c&&(e[f]+=-c[f])}return e}
function oe(a,b,c,d){var e=b.length,f,h,l,k=Array(e+1),m=Array(e);for(f=0;f<e;f++){d[f]=f;k[f]=f;for(h=m[f]=0;h<e;h++)Math.abs(a[f][h])>m[f]&&(m[f]=Math.abs(a[f][h]));if(1E-10>m[f])return f}k[e]=e;var n=0;f=0;a:for(;f<e;f++)for(l=0;;){var q=n;var t=Math.abs(a[d[q]][k[f]])/m[d[q]];for(h=n+1;h<e;h++){var w=Math.abs(a[d[h]][k[f]])/m[d[h]];w>t&&(t=w,q=h)}if(Math.abs(a[d[q]][k[f]])<c){if(l>=e-1-f)break a;t=k[f];for(h=f;h<e-1;h++)k[h]=k[h+1];k[e-1]=t;l++}else{d[n]!=d[q]&&(t=d[n],d[n]=d[q],d[q]=t);for(h=
n+1;h<e;h++)for(q=a[d[h]][k[f]]/a[d[n]][k[f]],l=0;l<e+1;l++)a[d[h]][k[l]]-=q*a[d[n]][k[l]];n++;break}}n--;if(n<e-1)for(f=n+1;f<e;f++)if(.1<Math.abs(a[d[f]][e]))return d[f];f=e-1;for(m=e;0<=n;){h=-1;for(l=f;l>=n;l--)Math.abs(a[d[n]][k[l]])>c&&(h=l);-1!=h&&h!=f&&(f=h);if(!(Math.abs(a[d[n]][k[f]])<c)){if(1<m-f)for(h=f+1;h<m;h++)b[k[h]]=0;m=f;l=0;for(h=f+1;h<e;h++)l+=a[d[n]][k[h]]*b[k[h]];b[k[f]]=(a[d[n]][e]-l)/a[d[n]][k[f]];f--}n--}return-1}
function pe(a,b,c){for(var d=I,e=0,f=0;f<b;f++){var h=Math.abs(a[c[f]][f]);h<d&&(d=h);h>e&&(e=h)}return.002>Math.abs(d)}function qe(a,b,c){if(a==G||b==G)throw Error();a=a==I?0<b?b:a:b==I?0<a?a:b:0<a&&0<b?a<b?a:b:0>a?-a:-b;return a==I?c:2*a*Math.sqrt(2*c/a)}function je(a,b,c,d){var e=a[c];a[c]=a[d];a[d]=e;a=b[c];b[c]=b[d];b[d]=a}function re(a,b){for(var c=a.length,d=Array(c),e=0;e<c;e++)d[e]=a[e]+b[e];return d};function se(a){this.B=!1;this.time=0;this.F=[];this.s=[];this.v=[];this.i=[];this.O=[];this.j=[];this.h=[];this.C=[];this.o=[];this.M=[];this.b=[];this.c=[];this.f=[];this.g=[];this.a=0;this.w=[];this.u=0;this.A=[];this.L=[];this.P=a}
function te(a,b,c,d,e,f){a.B=!1;a.time=f;a.a=d.length;if(1==a.a)return c[0]=e[0]||0>d[0]?-d[0]/b[0][0]:0,-1;a.o=b;a.M=d;a.i=c;a.g=e;a.O.length<a.a&&(b=a.a+10,a.O=D(b),a.b=Rb(b),a.c=Rb(b),a.f=Rb(b),a.h=D(b),a.j=D(b),a.C=Rb(b));Fa(a.F);b=0;a.A=[];a.L=[];for(c=0;c<a.a;c++)a.i[c]=0,a.O[c]=a.M[c],a.c[c]=!1,a.b[c]=!1,a.f[c]=!1;for(c=0;;){c++;a:{d=a;var h=ue(d.P,d.a);for(f=0;f<d.a;f++)if(e=h[f],d.g[e]&&!d.b[e]&&!d.c[e]&&!d.f[e]){d=e;break a}h=I;f=-1;for(e=0;e<d.a;e++)!(d.g[e]||d.b[e]||d.c[e]||d.f[e])&&d.O[e]<
h&&(h=d.O[e],f=e);if(-1<f)d=f;else{f=0;h=-1;for(e=0;e<d.a;e++)d.f[e]&&!A(d.F,e)&&(!d.g[e]&&d.O[e]<-f||d.g[e]&&Math.abs(d.O[e])>f)&&(f=Math.abs(d.O[e]),h=e);d=-1<h&&1E-8<f?h:-1}}if(0>d)break;a.f[d]&&a.F.push(d);a:{var l;e=a;f=d;var k=e.B;for(h=0;h<e.a;h++)if(!e.b[h]&&!e.c[h]&&!e.f[h]){e=!1;break a}var m=[];for(h=0;h<e.a;h++)m.push(e.b[h]?1:e.c[h]?2:3);m.push(f);k&&me("checkLoop state",m);f=!1;h=0;for(l=e.A.length;h<l;h++){var n=e.A[h];k&&me("state",m);Ra(m,n)&&(f=!0)}if(!f){e.A.push(m);h=e.O;for(m=
k=0;m<e.a;m++)if(e.g[m]||0>h[m])k+=h[m]*h[m];e.L.push(k)}e=f}if(e)break;e=ve(a,d);if(-1<e)a.b[e]=!1,a.c[e]=!1,a.f[e]=!0;else{if(-1>e)return e;Fa(a.F);a.f[d]&&(b++,a.f[d]=!1)}}return-1}function we(a,b,c){var d=a.length,e;if(b.length<d)throw Error();var f=!0;for(e=0;e<d;e++)c[e]||1E-10<Math.abs(a[e])?1E-4<Math.abs(b[e])&&(f=!1):-1E-4>b[e]&&(f=!1);return f}
function ve(a,b){var c;if(!a.g[b]&&-1E-10<=a.O[b]||a.g[b]&&1E-10>=Math.abs(a.O[b]))return a.c[b]=!0,-1;var d,e=he(a.b,a.a);e+=1;var f=xe(a,e),h=0;for(d=0;d<a.a;d++)if(a.b[d]||d==b){var l=0;for(c=0;c<a.a;c++)if(a.b[c]||c==b)f[h][l]=a.o[d][c],l++;f[h][e]=1;h++}d=D(e);c=D(e);oe(f,c,1E-9,d);if(c=(c=pe(f,e,d))&&!a.f[b])return b;for(c=0;c<a.a;c++)a.h[c]=0,a.j[c]=0,a.C[c]=!1;e=1E-10;for(f=0;!a.g[b]&&a.O[b]<-e||a.g[b]&&Math.abs(a.O[b])>e;){a:{var k;d=a;var m=b;for(k=0;k<d.a;k++)d.j[k]=0;d.j[m]=1;c=he(d.b,
d.a);if(0<c){h=xe(d,c);if(null==d.w||d.w.length<c)d.w=D(c+10);var n=0;for(k=0;k<d.a;k++)if(d.b[k]){var q=0;for(l=0;l<d.a;l++)d.b[l]&&(h[n][q]=d.o[k][l],q++);h[n][c]=-d.o[k][m];d.w[n]=-d.o[k][m];n++}l=D(c);ye(c,c+1,h,d.v);for(k=1E-9;;){n=D(c);if(-1!=oe(h,l,k,n)){d=-999999;break a}n=ne(d.v,l,d.w);m=void 0;q=0;m=m||n.length;for(var t=0;t<m;t++)Math.abs(n[t])>q&&(q=Math.abs(n[t]));if(1E-7>q)break;else if(k/=10,ye(c,c+1,d.v,h),1E-17>k)break}for(k=n=0;k<d.a;k++)d.b[k]&&(d.j[k]=l[n++])}for(k=0;k<d.a;k++)for(l=
d.h[k]=0;l<d.a;l++)d.h[k]+=d.o[k][l]*d.j[l];d=-1}if(-1!=d)return d;h=a;l=I;h.g[b]&&0<h.O[b]&&(l=fc);k=-1;h.g[b]?(k=b,l=-h.O[b]/h.h[b]):0<h.h[b]&&(k=b,l=-h.O[b]/h.h[b]);n=0<l?1:-1;for(c=0;c<h.a;c++)!h.g[c]&&h.b[c]&&-1E-14>h.j[c]*n&&(d=-h.i[c]/h.j[c],0>d*n&&(2E-10<Math.abs(h.i[c])&&(h.B=!0),d=0),d*n<l*n&&(l=d,k=c));for(c=0;c<h.a;c++)h.c[c]&&(!h.g[c]&&-1E-14>h.h[c]*n||h.g[c]&&1E-14<Math.abs(h.h[c]*n))&&(d=-h.O[c]/h.h[c],0>d*n&&(2E-10<Math.abs(h.O[c])&&(h.B=!0),d=0),d*n<l*n&&(l=d,k=c));h.u=l;d=k;if(0>
d||1E5<Math.abs(a.u)){if(1E-10>Math.abs(a.i[b]))return b;if(1E-5>Math.abs(a.O[b])){e=1.1*Math.abs(a.O[b]);continue}return-2}1E-12>Math.abs(a.u)&&(a.C[d]&&(a.b[d]=!1,a.c[d]=!1,a.f[d]=!0),a.C[d]=!0);for(c=0;c<a.a;c++)a.i[c]+=a.u*a.j[c],a.O[c]+=a.u*a.h[c];if(f++>10*a.a&&f>1E3*a.a)throw Error("drive_to_zero() loopCtr="+f+" d="+b+" a[d]="+a.O[b]);if(a.c[d]){n=a;m=b;q=d;c=he(n.b,n.a);c+=2;h=xe(n,c);for(k=t=0;k<n.a;k++)if(n.b[k]||k==m||k==q){var w=0;for(l=0;l<n.a;l++)if(n.b[l]||l==m||l==q)h[t][w]=n.o[k][l],
w++;h[t][c]=1;t++}l=D(c);k=D(c);oe(h,k,1E-9,l);if(c=(c=pe(h,c,l))&&!a.f[d]){a.b[d]=!1;a.c[d]=!1;a.f[d]=!0;continue}}if(a.b[d])if(1E-10<Math.abs(a.O[d])){if(1E-9<Math.abs(a.i[d]))throw Error("moving C to NC but f[j]="+Sb(a.i[d]));a.b[d]=!1;a.c[d]=!1;a.f[d]=!0}else a.b[d]=!1,a.c[d]=!0;else a.c[d]&&(1E-10<Math.abs(a.i[d])?(a.b[d]=!1,a.c[d]=!1,a.f[d]=!0):(a.b[d]=!0,a.c[d]=!1))}a.b[b]=1E-10<Math.abs(a.i[b]);a.c[b]=!a.b[b];return-1}
function xe(a,b){if(null==a.s||a.s.length<b){b=10*(2+b/10);a.s=Array(b);a.v=Array(b);for(var c=0;c<b;c++)a.s[c]=new Float64Array(b+1),a.v[c]=new Float64Array(b+1)}return a.s}function ye(a,b,c,d){for(var e=0;e<a;e++)for(var f=b,h=c[e],l=d[e],k=0;k<f;k++)l[k]=h[k]};function ze(){this.b=this.a=M;this.f=0;this.c=1}ze.prototype.toString=function(){return""};function Ae(a,b){var c=b.m()-a.a.m();b=b.l()-a.a.l();return new K(a.b.m()+(c*a.c-b*a.f),a.b.l()+(c*a.f+b*a.c))}ze.prototype.set=function(a,b,c,d){this.a=a;this.b=b;this.f=c;this.c=d};function Be(a,b){var c=b.m()-a.b.m();b=b.l()-a.b.l();var d=-a.f,e=a.c;return new K(a.a.m()+(c*e-b*d),a.a.l()+(c*d+b*e))};function Ce(a,b,c){this.c=a;this.a=b;this.i=c;this.B=Math.max(a.j,b.j);this.w=c?0:this.B/2;c=Math.max(a.ea,b.ea);if(0>=c||1<c)throw Error("accuracy must be between 0 and 1, is "+c);this.T=c*this.B/2;this.ea=Math.max(a.V,b.V);this.U=Math.min(a.g,b.g);this.o=this.F=this.L=!1;this.g=M;this.b=G;this.f=xc;this.ba=this.V=this.h=this.j=G;this.s="";this.oa=this.v=this.u=G}g=Ce.prototype;g.toString=function(){return""};function Hd(a){return a.i||Math.abs(Id(a))<a.ea&&0<a.b&&a.b<a.B}
function Id(a){if(isNaN(a.V)){var b=a.f,c,d=c=0,e=0,f=0;if(isFinite(a.c.a)){c=a.md();d=c.m();c=c.l();var h=fd(a.c),l=a.c.s;c=h.m()-l*c;d=h.l()+l*d}isFinite(a.a.a)&&(e=a.pc(),f=e.m(),e=e.l(),h=fd(a.a),l=a.a.s,e=h.m()-l*e,f=h.l()+l*f);c=new K(c-e,d-f);a.V=qc(b,c)}return a.V}function De(a){return L(a.g,a.c.b)}function Ee(a){return L(a.g,a.a.b)}g.md=function(){return De(this)};g.pc=function(){return Ee(this)};function Fe(a,b){return a.c==b||a.a==b}g.Oa=function(){return!1};g.fb=function(){return!1};
function Wd(a){return a.i?!1:0>a.b||Id(a)<-a.ea&&a.b<a.w-a.T?!0:!1}function Ge(a,b){if(isFinite(a.u))throw Error("detectedTime_ already set "+a);a.u=b;var c=Id(a);a.ba=c;a.v=G;!a.i&&-.001>c&&(a.v=b+(a.w-a.b)/c)}
g.Da=function(a){if(!isFinite(this.b))throw Error("distance is NaN "+this);this.V=G;if((this.L||!Hd(this))&&0>Id(this)){var b=this.u,c=this.b,d=Id(this),e=this.ba,f=b-a;1E-12>=f||(e=(e-d)/f,1E-12>Math.abs(e)||(f=Math.sqrt(d*d-2*e*(c-this.w)),c=a+(-d+f)/e,d=a+(-d-f)/e,e=!1,c>a&&c<b&&(this.v=c,e=!0),d>a&&d<b&&(!e||d<c)&&(this.v=d)))}else this.v=G};function He(a,b,c,d,e,f){Ec.call(this,a);this.g=b;this.a=c;this.c=d;this.b=e;this.f=f}p(He,Ec);g=He.prototype;g.toString=function(){return""};g.ca=function(){return this.c.add(this.b)};g.R=function(){return this.c};g.wa=function(){return this.b};g.kb=function(a,b){return a instanceof He&&a.getName()==this.getName()&&this.c.na(a.R(),b)&&!F(this.a,a.a,b)&&this.b.na(a.wa(),b)?this.f.na(a.f,b):!1};function Ie(a,b,c){this.g=b;this.c=c;this.v=uc(this.g.a.add(this.c.a),.5);this.u=null;this.o=G;this.b=a;this.B=!1}Ie.prototype.toString=function(){return""};function Je(a){isNaN(a.o)&&(a.o=1.25*a.rd(a.v));return a.o}function Ke(a){null==a.u&&(a.u=U(a.b,a.v));return a.u}Ie.prototype.kd=function(){return[]};Ie.prototype.tc=function(a,b){var c=Ke(this),d=Ke(a);c=sc(L(c,d));a=Je(a)+Je(this)+b;return c<a*a};function Le(a,b,c){a=a.Ca(b);return b.add(uc(a,c))};function Me(a,b){Ce.call(this,a.b,b.b,!1);this.P=a;this.M=b;this.A=this.C=null}p(Me,Ce);g=Me.prototype;g.toString=function(){return""};g.md=function(){return null!=this.C?this.C:this.F?this.C=L(U(this.c,this.P.i),this.c.b):De(this)};g.pc=function(){return null!=this.A?this.A:this.o?this.A=L(U(this.a,this.M.i),this.a.b):Ee(this)};g.Oa=function(a){return null==a?!1:a==this.M||a==this.P};
g.Dc=function(a){if(!(Fe(a,this.c)&&Fe(a,this.a)&&a.Oa(this.M)&&a.Oa(this.P)))return!1;var b=qe(this.j,this.h,this.B);return sc(L(this.g,a.g))>b*b||.9>Math.abs(qc(this.f,a.f))?!1:!0};g.Da=function(a){this.A=this.C=null;this.P.sc(this,this.M);Ce.prototype.Da.call(this,a)};function Ne(a,b){var c=Oe(a);if(null==c)throw Error("CornerEdgeCollision: null edge; vertex="+a);Ce.call(this,c.b,b.b,!1);this.M=a;this.A=b;this.P=c;this.C=null;this.qa=a.f?Pe(a):null;this.j=Qe(a);this.F=!1}p(Ne,Ce);g=Ne.prototype;g.toString=function(){return""};g.pc=function(){if(null!=this.C)return this.C;if(this.o){kd(this.a,this.g);var a=this.A.jd();if(null!=a)return this.C=L(U(this.a,a),this.a.b)}return Ee(this)};g.Oa=function(a){return null==a?!1:a==this.A||a==this.P||this.qa==a};
g.fb=function(a){return a==this.M};g.Dc=function(a){if(!Fe(a,this.c)||!Fe(a,this.a))return!1;if(a.fb(this.M))return!0;if(!a.Oa(this.A)||!a.Oa(this.P)&&!a.Oa(this.qa))return!1;var b=qe(this.j,this.h,this.B);return sc(L(this.g,a.g))>b*b||.9>Math.abs(qc(this.f,a.f))?!1:!0};g.Da=function(a){this.C=null;var b=U(this.c,this.M.a);b=kd(this.a,b);var c=this.A.ld(b);null!=c&&(this.g=U(this.a,c[0]),this.f=gd(this.a,c[1]),this.b=this.A.Wa(b),Ce.prototype.Da.call(this,a))};function Re(a,b){if(null==b)throw Error();var c=[],d=!0;if(!b.i){if(!isFinite(b.b))throw Error("distance is NaN "+b);z(a,function(a){if(b.Dc(a)){var e=a.u,h=b.u;e>h+1E-14?d=!1:h>e+1E-14?c.push(a):b.b<a.b?c.push(a):d=!1}})}0<c.length&&z(c,function(b){Ga(a,b)});d&&a.push(b)}
function Se(a,b,c,d){var e=kd(c,dd(b)),f=Te(b);null!=f&&(f=hd(c,f));z(c.F,function(h){if(!Ue(Oe(h))||!Ue(Pe(h))){var l=kd(b,U(c,h.a)),k=l,m=0,n=b.i,q=c.i;if(null!=n&&null!=q)k=Be(n,Ae(q,h.a)),m=nc(l,k);else if(null!=n||null!=q)throw Error("problem with old copy in checkVertexes");m=.01<m?Math.sqrt(m):.1;if(null!=f){if(n=qc(L(h.a,e),f),n>b.Pa()+b.j)return}else if(n=b.Pa()+b.j+m,q=n*n,n=sc(L(h.a,e)),n>q)return;Ve(a,b,h,l,k,m,d)}})}
function We(a,b,c){var d=Te(a);if(null==d)throw Error();return qc(L(dd(b),dd(a)),d)<b.Pa()+a.Pa()+c}function Xe(a,b,c,d,e,f){var h=new Ne(c,b);if(null==Oe(c))throw Error();c=b.b;h.b=b.Wa(e);e=U(c,d);h.g=e;d=gd(c,b.Ca(d));h.f=d;h.h=b.Jb();h.o=isFinite(h.h);h.s="";Ge(h,f);Re(a,h)}
function Ye(a,b,c,d,e){var f;if(0==a.length)return[];var h=[];h.push(b);var l=[];isFinite(b.c.a)&&l.push(b.c);isFinite(b.a.a)&&l.push(b.a);if(c)for(c=0,f=a.length;c<f;c++){var k=a[c];A(h,k)||k.i||!(d[c]<e)||k.c!=b.c&&k.a!=b.a&&k.c!=b.a&&k.a!=b.c||(h.push(k),A(l,k.c)||l.push(k.c),A(l,k.a)||l.push(k.a))}do for(b=h.length,c=0,f=a.length;c<f;c++)k=a[c],A(h,k)||(A(l,k.c)&&k.i?(h.push(k),isFinite(k.a.a)&&!A(l,k.a)&&l.push(k.a)):A(l,k.a)&&k.i&&(h.push(k),isFinite(k.c.a)&&!A(l,k.c)&&l.push(k.c)));while(b<
h.length);return h}function Ve(a,b,c,d,e,f,h){if(null==Oe(c))throw Error("");var l=b.j;if(!(d.m()<b.ia()-l&&e.m()<b.ia()||d.m()>b.Qa()+l&&e.m()>b.Qa()||d.l()<b.ma()-l&&e.l()<b.ma()||d.l()>b.Ea()+l&&e.l()>b.Ea()))for(;;){var k=null,m=null,n=I;z(b.h,function(b){if(!Ue(b)){var q=Je(b)+l+f;nc(b.v,d)>q*q||(q=b.yc(d,e),null==q?c.f&&(q=b.hd(c,d,l),null!=q&&(Ge(q,h),Re(a,q))):z(q,function(a){var c=L(e,a).length();c<n&&(n=c,m=a,k=b)}))}});null!=k&&null!=m&&Xe(a,k,c,m,d,h);break}};function Ze(a,b,c){var d=b.b,e=c.b;if(c.f||b.f){U(e,c.i);d=U(d,b.i);d=kd(e,d);d=$e(c,d);var f=d.length();if(c.f&&b.f)a.b=f-(c.a+b.a);else if(!c.f&&b.f)a.b=c.a-b.a-f;else if(c.f&&!b.f)a.b=b.a-c.a-f;else throw Error();b=uc(d,1/f);d=af(c,uc(b,c.a));a.g=d;c.f||(b=uc(b,-1));a.f=gd(e,b)}}
function bf(a,b,c,d,e,f,h,l){var k=new Me(d,c);k.b=e;k.o=!0;k.F=!0;k.s="";f=uc(h,1/f);h=af(c,uc(f,c.a));k.g=h;c.f||(f=uc(f,-1));k.f=gd(c.b,f);k.j=(d.f?1:-1)*d.a;k.h=(c.f?1:-1)*c.a;a&&(k.j+=e/2,k.h+=e/2);Ge(k,l);Re(b,k)};function cf(a,b,c,d,e,f,h,l){var k=new Me(d,c);k.o=!1;k.F=!0;k.j=d.a;k.h=I;a&&(k.j+=e);k.b=e;k.g=f;k.s="";k.f=gd(c.b,c.Ca(h));Ge(k,l);Re(b,k)};function df(a,b,c){this.a=a;this.f=r(b)?b:!0;this.c=r(c)?c:null;this.b=null;ef++}df.prototype.toString=function(){return""};function W(a){return a.a.m()}function X(a){return a.a.l()}function Qe(a){var b=I;null!=a.c&&(b=a.c.Jb(),null!=a.b&&(a=a.b.Jb(),Math.abs(a)<Math.abs(b)&&(b=a)));return b}function Oe(a){if(null!=a.c)return a.c;throw Error();}function Pe(a){if(null!=a.b)return a.b;if(null!=a.c)return a.c;throw Error();}function ff(a,b){if(null==a.c)a.c=b;else throw Error();}var ef=1;function gf(a,b){var c=Oe(a),d=Oe(b);if(null==c||null==d)throw Error("CornerCornerCollision: null edge; vertex="+a+"; normalVertex="+b);Ce.call(this,c.b,d.b,!1);this.C=a;this.A=b}p(gf,Ce);gf.prototype.toString=function(){return""};gf.prototype.fb=function(a){return a==this.C||a==this.A};gf.prototype.Dc=function(a){return Fe(a,this.c)&&Fe(a,this.a)?a.fb(this.C)||a.fb(this.A)?!0:!1:!1};
gf.prototype.Da=function(a){var b=U(this.c,this.C.a);b=kd(this.a,b);this.g=U(this.a,this.A.a);this.b=oc(this.A.a,b);if(!isFinite(this.b))throw Error();b=vc(L(b,this.A.a));if(null==b)throw Error();this.f=gd(this.a,b);Ce.prototype.Da.call(this,a)};function hf(a,b,c,d){Ie.call(this,a,b,c);this.a=d;if(null==b.b)b.b=this;else throw Error();ff(c,this);this.B=!0}p(hf,Ie);g=hf.prototype;g.toString=function(){return""};g.ud=function(a){a.lineTo(W(this.c),X(this.c))};function jf(a,b,c,d){var e=oc(a.g.a,c);if(1E-6<=e&&e<=.6*d)return kf(a,a.g,b,c,e);e=oc(a.c.a,c);return 1E-6<=e&&e<=.6*d?kf(a,a.c,b,c,e):null}g.fd=function(){return 0};
g.Wa=function(a){var b=a.m();a=a.l();var c=W(this.g),d=W(this.c),e=X(this.g),f=X(this.c);1E-10>Math.abs(d-c)?a=this.a?b-c:c-b:1E-10>Math.abs(f-e)?a=this.a?a-e:e-a:(f=(f-e)/(d-c),d=(-e+a+b/f+f*c)/(1/f+f),c=e+f*(d-c),b-=d,e=a-c,b=Math.sqrt(b*b+e*e),a<c&&(b=-b),a=this.a?b:-b);if(isNaN(a))throw Error("");return a};
g.oc=function(a){var b=a.m();a=a.l();var c=W(this.g),d=W(this.c),e=X(this.g),f=X(this.c);if(1E-10>Math.abs(d-c))return e>f&&(a>e||a<f)||f>e&&(a>f||a<e)?I:this.a?b-c:c-b;if(1E-10>Math.abs(f-e))return c>d&&(b>c||b<d)||d>c&&(b>d||b<c)?I:this.a?a-e:e-a;var h=(f-e)/(d-c);f=(-e+a+b/h+h*c)/(1/h+h);e+=h*(f-c);if(c<d&&(f<c||f>d)||d<c&&(f<d||f>c))return I;b-=f;c=a-e;b=Math.sqrt(b*b+c*c);a<e&&(b=-b);return this.a?b:-b};
g.hd=function(a,b,c){var d=b.m(),e=b.l(),f=W(this.g),h=W(this.c),l=X(this.g),k=X(this.c);if(1E-10>Math.abs(h-f)){var m=(f+h)/2;if(l>k&&(e>l||e<k)||k>l&&(e>k||e<l))return jf(this,a,b,c);b=this.a?d-m:m-d;if(0>b||b>c)return null;a=new Ne(a,this);a.b=b;e=U(this.b,new K(m,e));a.g=e;e=gd(this.b,new K(this.a?1:-1,0));a.f=e;a.o=!1;a.h=I;a.s="";return a}if(1E-10>Math.abs(k-l)){k=(l+k)/2;if(f>h&&(d>f||d<h)||h>f&&(d>h||d<f))return jf(this,a,b,c);b=this.a?e-k:k-e;if(0>b||b>c)return null;a=new Ne(a,this);a.b=
b;e=U(this.b,new K(d,k));a.g=e;e=gd(this.b,new K(0,this.a?1:-1));a.f=e;a.o=!1;a.h=I;a.s="";return a}k=(k-l)/(h-f);m=(-l+e+d/k+k*f)/(1/k+k);l+=k*(m-f);if(f<h&&(m<f||m>h)||h<f&&(m<h||m>f))return jf(this,a,b,c);d-=m;b=e-l;b=Math.sqrt(d*d+b*b);e<l&&(b=-b);b=this.a?b:-b;if(0>b||b>c)return null;a=new Ne(a,this);a.b=b;e=U(this.b,new K(m,l));a.g=e;e=Math.sqrt(1+k*k);e=gd(this.b,new K(-k/e,1/e));this.a||(e=uc(e,-1));a.f=e;a.o=!1;a.h=I;a.s="";return a};
g.uc=function(){var a=X(this.g),b=X(this.c);return a<b?a:b};g.jd=function(){return null};g.Jb=function(){return I};g.vc=function(){var a=W(this.g),b=W(this.c);return a<b?a:b};g.Ca=function(){var a=W(this.g),b=W(this.c),c=X(this.g),d=X(this.c);if(1E-10>Math.abs(b-a))return new K(this.a?1:-1,0);if(1E-10>Math.abs(d-c))return new K(0,this.a?1:-1);b=(d-c)/(b-a);a=Math.sqrt(1+b*b);b=-b/a;a=1/a;this.a||(b=-b,a=-a);return new K(b,a)};g.ld=function(a){var b=lf(this,a);a=this.Ca(a);return[b,a]};
g.wc=function(){var a=W(this.g),b=W(this.c);return a>b?a:b};g.xc=function(){var a=X(this.g),b=X(this.c);return a>b?a:b};g.sc=function(a,b){b.B||b.sc(a,this)};g.yc=function(a,b){if(a==b)return null;a=le(this.g.a,this.c.a,a,b);return null==a?null:[a]};g.tc=function(a,b){return a.B?!1:Ie.prototype.tc.call(this,a,b)};function kf(a,b,c,d,e){c=new gf(c,b);c.b=e;var f=U(a.b,b.a);c.g=f;b=vc(L(d,b.a));if(null==b)return null;a=gd(a.b,b);c.f=a;c.F=!1;c.j=G;c.o=!0;c.h=e;c.s="";return Hd(c)?c:null}
g.rd=function(a){var b=oc(this.g.a,a);a=oc(this.c.a,a);return b>a?b:a};function lf(a,b){var c=b.m(),d=b.l();b=W(a.g);var e=W(a.c),f=X(a.g);a=X(a.c);if(1E-10>Math.abs(e-b))return new K(b,d);if(1E-10>Math.abs(a-f))return new K(c,f);a=(a-f)/(e-b);c=(-f+d+c/a+a*b)/(1/a+a);return new K(c,f+a*(c-b))}g.Ec=function(a,b,c){b.B||b.Ec(a,this,c)};function mf(a,b,c,d,e,f,h){Ie.call(this,a,b,c);this.i=d;this.f=f;this.a=oc(d,b.a);if(Math.abs(1E-10<this.a-oc(c.a,d)))throw Error("center is not equidistant from the two end points");this.A=e;this.F=rc(L(b.a,d));this.w=rc(L(c.a,d));1E-10>Math.abs(this.F-this.w)&&(this.w=this.F+2*Math.PI);a=this.F;d=this.w;e=this.A;1E-10>Math.abs(a-d)?(e=a,a=e+2*Math.PI):1E-10>Math.abs(Math.abs(a-d)-2*Math.PI)?(e=Math.min(a,d),a=e+2*Math.PI):a>d?e?e=d:(e=a,a=d+2*Math.PI):e?(e=d,a+=2*Math.PI):(e=a,a=d);a=[e,a];this.h=
a[0];this.j=a[1];d=this.j-this.h;a=Math.sin(d/2)-Math.sin(d)/2;d=Math.cos(d/2)-(1+Math.cos(d))/2;this.s=this.a*Math.sqrt(a*a+d*d);h=Math.max(Math.ceil((this.j-this.h)/(Math.PI/4)),Math.ceil((this.j-this.h)*this.a/(void 0===h?.3:h)));this.L=a=(this.j-this.h)/h;this.M=[];for(d=1;d<h;d++)e=this.A?this.j-d*a:this.h+d*a,e=new K(this.i.m()+this.a*Math.cos(e),this.i.l()+this.a*Math.sin(e)),e=new df(e,!1,this),this.M.push(e);if(null==b.b)b.b=this;else throw Error();ff(c,this);this.j-this.h>=Math.PI?(this.v=
this.i,this.o=this.a):this.o=oc(this.v,b.a);this.f||(this.o*=1.2);this.C=1E-6>Math.abs(2*Math.PI-(this.j-this.h))}p(mf,Ie);g=mf.prototype;g.toString=function(){return""};g.ud=function(a){a.arc(this.i.m(),this.i.l(),this.a,this.F,this.w,this.A)};function $e(a,b){return L(b,a.i)}g.fd=function(){return this.a*(1-Math.sqrt(1-this.L*this.L/4))};g.Wa=function(a){a=$e(this,a);return(this.f?1:-1)*(a.length()-this.a)};g.oc=function(a){a=$e(this,a);return nf(this,a)?(this.f?1:-1)*(a.length()-this.a):I};
function of(a,b){return b.add(a.i)}function af(a,b){return U(a.b,b.add(a.i))}g.hd=function(a,b,c){var d=$e(this,b);if(!nf(this,d))return null;var e=d.length();b=(this.f?1:-1)*(e-this.a);if(0>b||b>c)return null;c=new Ne(a,this);c.b=b;if(1E-10>e)throw Error("cannot get normal for point at center of circle");d=uc(d,1/e*(this.f?1:-1));c.f=gd(this.b,d);c.h=(this.f?1:-1)*this.a;c.h+=b;b=U(this.b,of(this,uc(d,c.h)));c.g=b;c.o=!0;c.j=Qe(a);c.s="";return c};
g.uc=function(){var a=-Math.PI/2;a+=a<this.h?2*Math.PI:0;return this.h<=a&&a<=this.j?this.i.l()-this.a:X(this.g)<X(this.c)?X(this.g):X(this.c)};g.jd=function(){return this.i};g.Jb=function(){return(this.f?1:-1)*this.a};g.kd=function(){return this.M};g.vc=function(){var a=Math.PI;a+=a<this.h?2*Math.PI:0;return this.h<=a&&a<=this.j?this.i.m()-this.a:W(this.g)<W(this.c)?W(this.g):W(this.c)};g.Ca=function(a){a=$e(this,a);var b=a.length();if(1E-10>b)throw Error("");return uc(a,this.f?1/b:-1/b)};
g.ld=function(a){a=this.Ca(a);return[of(this,uc(a,(this.f?1:-1)*this.a)),a]};g.wc=function(){var a=0;a+=a<this.h?2*Math.PI:0;return this.h<=a&&a<=this.j?this.i.m()+this.a:W(this.g)>W(this.c)?W(this.g):W(this.c)};g.xc=function(){var a=Math.PI/2;a+=a<this.h?2*Math.PI:0;return this.h<=a&&a<=this.j?this.i.l()+this.a:X(this.g)>X(this.c)?X(this.g):X(this.c)};
g.sc=function(a,b){if(b instanceof hf){var c=b.b,d=U(this.b,this.i),e=kd(c,d);d=Le(b,e,-this.a);var f=Hd(a)?lf(b,e):d;e=U(c,f);f=b.Ca(f);c=gd(c,f);a.b=b.Wa(d);a.g=e;a.f=c}else if(b instanceof mf)a.a==b.b?Ze(a,this,b):Ze(a,b,this);else throw Error();};
g.yc=function(a,b){if(a==b)return null;var c=$e(this,a),d=$e(this,b);a=b=null;if(1E-10>Math.abs(d.m()-c.m())){var e=(c.m()+d.m())/2;if(Math.abs(e)>this.a)return null;var f=Math.sqrt(this.a*this.a-e*e),h=c.l()<d.l()?c.l():d.l();c=c.l()>d.l()?c.l():d.l();h<=f&&f<=c&&(b=new K(e,f));h<=-f&&-f<=c&&(a=new K(e,-f))}else{h=(d.l()-c.l())/(d.m()-c.m());var l=1+h*h,k=c.l()-h*c.m(),m=l*this.a*this.a-k*k;if(0>m)return null;m=Math.sqrt(m);e=-(h*k+m)/l;f=(h*-k+m)/l;var n=(k-h*m)/l;l=(k+h*m)/l;k=c.m()<d.m()?c.m():
d.m();m=c.m()>d.m()?c.m():d.m();h=c.l()<d.l()?c.l():d.l();c=c.l()>d.l()?c.l():d.l();k<=e&&e<=m&&h<=n&&n<=c&&(b=new K(e,n));k<=f&&f<=m&&h<=l&&l<=c&&(a=new K(f,l))}d=c=null;null!=b&&nf(this,b)&&(c=of(this,b));null!=a&&nf(this,a)&&(d=of(this,a));return null==c&&null==d?null:null!=c&&null!=d?[c,d]:null!=c?[c]:[d]};function pf(a,b,c){a=rc(a);a<b&&(a+=2*Math.PI);return b<=a&&a<=c}function nf(a,b){return a.C?!0:pf(b,a.h,a.j)}function qf(a,b){if(a.C)return!0;b=$e(a,kd(a.b,b));return pf(b,a.h,a.j)}
g.rd=function(a){return oc(this.i,a)+this.a};
g.Ec=function(a,b,c){if(b instanceof hf){if(this.f){var d=U(this.b,this.i),e=kd(b.b,d);d=Le(b,e,-this.a);var f=U(b.b,d),h=b.Wa(d);if(0<h)h>b.b.j||b.oc(d)==I||!qf(this,f)||(d=lf(b,e),f=U(b.b,d),cf(!0,a,b,this,h,f,d,c));else{e=this.b.i;var l=b.b.i;if(null==e||null==l){if(null!=l||null!=e)throw Error("problem with old copy in CircleStraight");}else{var k=Ae(e,this.i);k=Be(l,k);k=Le(b,k,-this.a);k=Ae(l,k);k=Be(e,k);var m=rc($e(this,k)),n=m+(m<this.h?2*Math.PI:0);this.h<=n&&n<=this.j||(k=(m<this.h?this.h-
m:this.h-(m-2*Math.PI))<(m>this.j?m-this.j:2*Math.PI+m-this.j)?this.h:this.j,k=of(this,new K(this.a*Math.cos(k),this.a*Math.sin(k))));k=Ae(e,k);k=Be(l,k);0>b.Wa(k)||qf(this,f)&&null!=b.yc(d,k)&&cf(!1,a,b,this,h,f,d,c)}}}}else if(b instanceof mf){if(b.f||this.f)if(b.f&&this.f)d=U(b.b,b.i),qf(this,d)&&(d=U(this.b,this.i),d=kd(b.b,d),d=$e(b,d),nf(b,d)&&(e=d.length(),h=e-(this.a+b.a),h>b.b.j||(0<h?bf(!0,a,b,this,h,e,d,c):h<-(this.s>b.s?this.s:b.s)||bf(!1,a,b,this,h,e,d,c))));else if(d=b.f?b:this,f=b.f?
this:b,!(d.a>f.a)){h=U(f.b,f.i);h=$e(d,kd(d.b,h));if(null==h)h=!1;else{for(h=rc(h);h<d.h+Math.PI;)h+=2*Math.PI;h=d.h+Math.PI<=h&&h<=d.j+Math.PI}h&&(h=U(d.b,d.i),h=kd(f.b,h),l=$e(f,h),nf(f,l)&&(e=l.length(),h=f.a-d.a-e,h>b.b.j||(0<h?bf(!0,a,f,d,h,e,l,c):h<-d.s||bf(!1,a,f,d,h,e,l,c))))}}else throw Error();};function rf(a,b){r(a)&&""!=a?b=b?b:a:(b=sf++,a=tf.Nc+b,b=uf.Nc+b);bd.call(this,a,b);this.F=[];this.h=[];this.C=!1;this.f=null;this.oa=[];this.g=1;this.P=[];this.M=null;this.qa=G;this.ba=this.cb=null;this.ub=this.Zc=this.Yc=this.Oc=G;this.B=-1;this.i=null;this.he=new ze;this.j=.01;this.V=.5;this.ea=.6}p(rf,bd);g=rf.prototype;g.toString=function(){return""};function vf(a,b,c){b=new mf(a,wf(a),new df(b,!0),c,!1,!0);xf(a,b)}
function xf(a,b){if(a.C)throw Error("cannot add edges to finished Polygon");if(null==a.f)throw Error("Polygon does not have an open path to add edges to");if(b.c!=wf(a))throw Error("edge is not connected to open path");a.h.push(b);La(a.F,b.kd());b.c==a.f?yf(a):a.F.push(b.c)}function zf(a,b,c){b=new hf(a,wf(a),new df(b,!0),c);xf(a,b)}
function Af(a){var b=I,c=fc,d=I,e=fc;z(a.h,function(a){a.vc()<b&&(b=a.vc());a.wc()>c&&(c=a.wc());a.uc()<d&&(d=a.uc());a.xc()>e&&(e=a.xc())});a.Oc=b;a.Yc=c;a.ub=d;a.Zc=e}function Bf(a,b,c,d){Se(b,a,c,d);Se(b,c,a,d);z(a.h,function(a){Ue(a)||z(B(c.h),function(c){Ue(c)||a.tc(c,this.j)&&a.Ec(b,c,d)},this)},a)}function Cf(a){if(!a.C)throw Error("Polygon construction is not finished.");z(a.oa,function(a){var b=a;do{b=Pe(b);if(null==b)throw Error();b=b.c}while(b!=a)})}
function yf(a){if(a.C)throw Error("Polygon construction is finished.");if(null!=a.f){var b=Df(a);if(null!=b){if(b.c!=a.f){var c=a.f;b=b.c;if(1E-8<oc(c.a,b.a))throw Error("");var d=Oe(b);if(null==d)throw Error("v2.edge1 is null; v2="+b+"; this="+a);ff(c,d);d.c=c;Ga(a.F,b)}a.oa.push(a.f);a.f=null}}}g.gd=function(a){a.beginPath();z(this.oa,function(b){a.moveTo(W(b),X(b));var c=b;do{var d=Pe(c);if(null==d)throw Error();c=d.c;d.ud(a)}while(c!=b);a.closePath()})};
function Ef(a){var b=Array(2),c=.1*Math.max(a.J(),a.K()),d=Array(3);d[0]=new be(a.c.m()+c,a.c.l());d[1]=new be(a.c.m(),a.c.l()+c);d[2]=new be(a.c.m()-c,a.c.l()-c);c=ie(d,function(b){return Ff(a,mc(b))},b);if(0!=b[1])throw Error("");return c}
function Gf(a){if(a.C)throw Error("Polygon construction is finished.");null!=a.f&&yf(a);a.C=!0;Cf(a);Af(a);id(a,a.ia()+a.J()/2,a.ma()+a.K()/2);var b=a.J()<=a.K()?[new K(a.ia()+.5*a.J(),a.ma()+.8*a.K()),new K(a.ia()+.5*a.J(),a.ma()+.2*a.K())]:[new K(a.ia()+.8*a.J(),a.ma()+.5*a.K()),new K(a.ia()+.2*a.J(),a.ma()+.5*a.K())];a.L=B(b);b=a.J();var c=a.K();a.v=(b*b+c*c)/12;a.ba=null;a.Kb()}g.ma=function(){return this.ub};g.Kb=function(){null==this.M&&(this.M=Ef(this),Hf(this,this.M));return this.M};
g.Pa=function(){return this.qa};g.ia=function(){return this.Oc};g.Xa=function(){if(isNaN(this.o)){var a=I;z(this.h,function(b){b=b.oc(this.c);b!=I&&(0<b?a=0:(b=-b,b<a&&(a=b)))},this);a==I&&(a=If(this));this.o=a}return this.o};function If(a){if(isNaN(a.o)){for(var b=I,c,d=0;3>=d;d++){switch(d){case 0:c=a.c.l()-a.ma();break;case 1:c=a.Qa()-a.c.m();break;case 2:c=a.Ea()-a.c.l();break;case 3:c=a.c.m()-a.ia();break;default:c=I}c<b&&(b=c)}a.o=b}return a.o}g.Qa=function(){return this.Yc};
function Te(a){var b=a.cb;if(null==b)return null;var c=a.ba;null==c&&(c=gd(a,b.Ca(M)),a.ba=c);return c}g.Ea=function(){return this.Zc};function Jf(a,b,c){a=a.getName(c)+" ";switch(b){case 0:a+="X "+(c?uf.vb:tf.vb);break;case 1:a+="X "+(c?uf.Db:tf.Db);break;case 2:a+="Y "+(c?uf.vb:tf.vb);break;case 3:a+="Y "+(c?uf.Db:tf.Db);break;case 4:a+=c?uf.Fc:tf.Fc;break;case 5:a+=c?uf.Gc:tf.Gc;break;default:throw Error();}return a}g.nd=function(){return Aa(this.F,function(a){return a.a})};
function Df(a){if(null==a.f)throw Error();var b=a.f.b;if(null==b)return null;for(;;){var c=b.c,d=c.b;if(null==d)break;b=d;if(c==a.f)throw Error();}return b}function wf(a){if(null==a.f)throw Error("Polygon does not have an open path to add edges to");var b=Df(a);return null==b?a.f:b.c}function Ff(a,b){var c=0;z(a.F,function(a){a=oc(b,a.a);a>c&&(c=a)});var d=0;z(a.h,function(a){a=a.fd();a>d&&(d=a)});c+=d;return c*c}function Ue(a){return null==a?!0:!1}
function Kf(a){null==a.i&&(a.i=a.he);a.i.set(a.c,a.b,a.w,a.u)}function Lf(a,b){if(0>=b||1<b)throw Error("accuracy must be between 0 and 1, is "+b);a.ea=b}function Hf(a,b){if(null!=a.f)throw Error("setCentroid called before finish, while creating Polygon");a.M=b;a.qa=Math.sqrt(Ff(a,b))}g.Va=function(a){if(0>=a||!v(a))throw Error("mass must be positive "+a);this.a=a;return this};
g.H=function(a,b){this.b=mc(a);r(b)&&isFinite(b)&&this.A!=b&&(this.A=b,this.w=Math.sin(b),this.u=Math.cos(b),this.ba=null);a=0;for(b=this.h.length;a<b;a++)this.h[a].u=null};function Mf(a,b,c){if(4!=a.h.length)throw Error("");if(0>b||3<b)throw Error();a.cb=a.h[b];a.qa=c;z(a.h,function(a){a!=this.cb&&(a.o=0)},a)}
function Nf(a,b){if(a.C)throw Error("Polygon construction is finished.");if(null!=a.f)throw Error("there is already an open path");b instanceof df?(a.f=b,a.F.push(a.f)):(a.f=b.g,a.F.push(a.f),a.h.push(b))}var tf={Nc:"polygon",Fc:"angle",Gc:"angular velocity",vb:"position",Db:"velocity"},uf=tf,sf=1;function Of(){var a;this.a=a=Math.floor(Math.abs(0))%4294967296;Pf(this.a)}Of.prototype.toString=function(){return""};function Pf(a){if(0>a)throw Error("random seed must be 0 or greater "+a);if(4294967296<=a)throw Error("random seed must be less than 4294967296 was "+a);if(a!=Math.floor(a))throw Error("random seed must be an integer "+a);}
function ue(a,b){for(var c=Array(b),d=Array(b),e=0;e<b;e++)c[e]=-1,d[e]=e;e=b;var f=0;do{var h=e--;if(0>=h)throw Error("n must be positive");var l=a,k=1664525*l.a+1013904223;l.a=k-4294967296*Math.floor(k/4294967296);Pf(l.a);h=Math.floor(l.a/4294967296*h);for(k=l=0;k<b;k++)if(!(0>d[k])&&l++==h){c[f++]=d[k];d[k]=-1;break}}while(0>c[b-1]);return c};function Qf(a,b,c){var d=Rf++;S.call(this,"DAMPING_LAW"+(0<d?"_"+d:""));this.a=a;this.f=b||1;this.b=[];this.c=null;null!=c&&(a=B(c.a),z(a,x(this.xd,this)),kc(c,this),this.c=c);this.D(Lc(new Q(this,Sf.Vb,Tf.Vb,x(this.bf,this),x(this.cf,this)),3));this.D(Lc(new Q(this,Sf.gc,Tf.gc,x(this.He,this),x(this.Ef,this)),3))}p(Qf,S);g=Qf.prototype;g.toString=function(){return""};g.xd=function(a){if(a.Ib()&&!A(this.b,a)){var b=a.a;0<b&&isFinite(b)&&this.b.push(a)}};
g.Fb=function(){var a=[];if(0==this.a)return a;z(this.b,function(b){isFinite(b.a)&&(b=new qd("damping",b,b.b,1,uc(fd(b),-this.a),1,-this.a*this.f*b.s),a.push(b))},this);return a};g.Lb=function(){null!=this.c&&Tc(this.c,this)};g.bf=function(){return this.a};g.Gb=function(){return 0};g.He=function(){return this.f};g.X=function(a){a.I("OBJECT_ADDED")?(a=a.G(),this.xd(a)):a.I("OBJECT_REMOVED")&&(a=a.G(),Ga(this.b,a))};g.cf=function(a){this.a=a;T(this,Sf.Vb)};g.Ef=function(a){this.f=a;T(this,Sf.gc)};
var Rf=0,Sf={Vb:"damping",gc:"rotate ratio"},Tf=Sf;function Uf(a,b,c){this.b=a||0;this.c=b||0;this.a=void 0===c?G:c}Uf.prototype.toString=function(){return""};function Vf(a){var b=a.b+a.c;isNaN(a.a)||(b+=a.a);return b};var Wf={wb:"potential energy",Xc:"translational energy",tb:"kinetic energy",Pc:"rotational energy",Vc:"total",Wc:"total energy"};function Xf(a,b){var c=Yf++;S.call(this,"GRAVITY_LAW"+(0<c?"_"+c:""));this.b=a;this.f=0;this.a=[];this.c=null;null!=b&&(a=B(b.a),z(a,x(this.zd,this)),kc(b,this),this.c=b);this.D(Lc(new Q(this,Zf.Ma,$f.Ma,x(this.ff,this),x(this.hf,this)),4));this.D(Kc(new Q(this,Zf.nc,$f.nc,x(this.gf,this),x(this.zc,this)),fc))}p(Xf,S);g=Xf.prototype;g.toString=function(){return""};g.zd=function(a){if(a.Ib()&&!A(this.a,a)){var b=a.a;0<b&&isFinite(b)&&this.a.push(a)}};
g.Fb=function(){var a=[];z(this.a,x(function(b){isFinite(b.a)&&a.push(new qd("gravity",b,b.b,1,new K(0,-this.b*b.a,0),1))},this));return a};g.Lb=function(){null!=this.c&&(Tc(this.c,this),this.c=null)};g.ff=function(){return this.b};g.Gb=function(){var a=0;z(this.a,function(b){if(isFinite(b.a)){var c=b.Qc;c=null!=c?c:this.f;a+=(b.b.l()-c)*b.a*this.b}},this);return a};g.gf=function(){return this.f};g.X=function(a){var b=a.G();a.I("OBJECT_ADDED")?this.zd(b):a.I("OBJECT_REMOVED")&&Ga(this.a,b)};
g.hf=function(a){this.b=a;T(this,Zf.Ma)};g.zc=function(a){this.f=a;T(this,Zf.nc)};var Yf=0,Zf={Ma:"gravity",nc:"zero energy level"},$f=Zf;function ag(a){S.call(this,a||"SIM");this.a=[];this.w=!1;this.f=[];this.b=new sd;this.c=new wd([Dd.Uc,Wf.tb,Wf.wb,Wf.Wc],[Dd.Uc,Wf.tb,Wf.wb,Wf.Wc],this.getName()+"_VARS");this.S().jf(1,2,3);this.u=this.h=null;this.D(new Hc(this,bg.zb,cg.zb,x(this.Ke,this),x(this.Qb,this)))}p(ag,S);g=ag.prototype;g.toString=function(){return""};g.S=function(){return this.c};g.Y=function(){var a=this.c;if(0>a.b)throw Error("no time variable");return a.G(a.b)};g.Ke=function(){return this.w};
g.Qb=function(a){this.w=a;T(this,bg.zb)};g.reset=function(){null!=this.h&&this.h.length==this.c.a.length&&Cd(this.c,this.h);z(this.a,function(a){a.i=null});ud(this.b,I);this.ha();R(this,new O(this,"RESET"))};function dg(a){a.h=zd(a.c);R(a,new O(a,"INITIAL_STATE_SAVED"))}function Ud(a){a.u=zd(a.c);z(a.a,function(a){Kf(a)})}function Xd(a){null!=a.u&&Cd(a.c,a.u,!0);z(a.a,function(a){a.i=null})}
g.N=function(a){if(!A(this.a,a)){for(var b=[],c=0;6>c;c++)b.push(Jf(a,c,!1));var d=[];for(c=0;6>c;c++)d.push(Jf(a,c,!0));b=xd(this.c,b,d);a.B=b;this.a.push(a);this.b.add(a)}eg(this,a);z(this.a,function(a){a.i=null})};function fg(a,b){var c=null;if(u(b)){var d=E(b);c=Da(a.a,function(a){return a.getName()==d})}else b<a.a.length&&0<=b&&(c=a.a[b]);if(null==c)throw Error("no body "+b);return c}
function eg(a,b){b.i=null;var c=b.B;if(0>c)throw Error("unknown body "+b);var d=a.c;Bd(d,c,b.b.m());Bd(d,2+c,b.b.l());Bd(d,4+c,b.A);Bd(d,1+c,fd(b).m());Bd(d,3+c,fd(b).l());Bd(d,5+c,b.s);a.S().Za(1,2,3)}g.ha=function(){var a=this.c,b=zd(a);gg(this,b);b=hg(this);Bd(a,1,b.c+b.a,!0);Bd(a,2,b.b,!0);Bd(a,3,Vf(b),!0)};
function ig(a,b){var c=Da(a.f,function(a){return b instanceof Qf?a instanceof Qf:b instanceof Xf?a instanceof Xf:!1});if(null!=c)throw Error("cannot add DampingLaw or GravityLaw twice "+c);A(a.f,b)||a.f.push(b);a.S().Za(1,2,3)}g.Dd=function(a){a.Lb();this.S().Za(1,2,3);return Ga(this.f,a)};function jg(a){var b=zd(a.S());gg(a,b);return hg(a)}
function hg(a){var b=0,c=0,d=0;z(a.a,function(a){isFinite(a.a)&&(c+=.5*a.a*a.v*a.s*a.s,d+=.5*a.a*sc(a.T))});z(a.f,function(a){b+=a.Gb()});return new Uf(b,d,c)}function gg(a,b){z(a.a,function(a){var c=a.B;0>c||(a.H(new K(b[c],b[c+2]),b[c+4]),jd(a,new K(b[c+1],b[c+3]),b[c+5]))},a)}
function Md(a,b,c){gg(a,b);z(a.a,function(a){var d=a.B;if(!(0>d))if(a.a==I)for(a=0;6>a;a++)c[d+a]=0;else c[d]=b[d+1],c[d+2]=b[d+3],c[d+4]=b[d+5],c[d+1]=0,c[d+3]=0,c[d+5]=0},a);z(a.f,function(a){a=a.Fb();z(a,function(a){var b=a.a;if(A(this.a,b)){var d=b.B;if(!(0>d)){var e=a.wa(),k=a.R(),m=b.a;c[d+1]+=e.m()/m;c[d+3]+=e.l()/m;c[d+5]+=((k.m()-b.b.m())*e.l()-(k.l()-b.b.l())*e.m())/(b.a*b.v);e=a.h;0!=e&&(c[d+5]+=e/(b.a*b.v));this.w&&(b=this.Y(),a.U=b,this.b.add(a))}}},this)},a);c[a.c.b]=1;return null}
function kg(a,b){if(0==a.a.length)throw Error("setElasticity: no bodies");z(a.a,function(a){a.g=b});R(a,new O(a,"ELASTICITY_SET",b))}var bg={pb:"collision method",Ub:"collision accuracy",Xb:"distance tolerance",Tf:"extra accel",fc:"random seed",zb:"show forces",Yf:"show collisions",lc:"velocity tolerance"},cg=bg;function lg(a){ag.call(this,a);this.A=!0;this.g="serial grouped lastpass";this.j=new Of;this.B=new se(this.j);this.i=.01;this.s=.5;this.o=.6;this.D(new Nc(this,bg.pb,cg.pb,x(this.we,this),x(function(a){mg(this,$d(a))},this),Zd(),Zd()));this.D(Lc(new Q(this,bg.Xb,cg.Xb,x(this.Ye,this),x(this.vd,this)),5));this.D(Lc(new Q(this,bg.lc,cg.lc,x(this.Ze,this),x(this.wd,this)),3));this.D(Mc(Lc(new Q(this,bg.Ub,cg.Ub,x(this.ve,this),x(this.Cc,this)),3)));this.D(Kc(Jc(new Q(this,bg.fc,cg.fc,x(this.Ge,this),
x(this.Ed,this))),fc))}p(lg,ag);g=lg.prototype;g.Ge=function(){return this.j.a};g.Ed=function(a){var b=this.j;Pf(a);b.a=a;T(this,bg.fc)};g.we=function(){return this.g};function mg(a,b){b=$d(b);a.g!=b&&(a.g=b,T(a,bg.pb))}g.ve=function(){return this.o};g.Cc=function(a){if(0>=a||1<a)throw Error("accuracy must be between 0 and 1, is "+a);this.o=a;z(this.a,function(b){Lf(b,a)});T(this,bg.Ub)};g.Ye=function(){return this.i};g.vd=function(a){this.i=a;z(this.a,function(b){b.j=a});T(this,bg.Xb)};g.Ze=function(){return this.s};
g.wd=function(a){this.s=a;z(this.a,function(b){b.V=a});T(this,bg.lc)};g.Qb=function(a){ag.prototype.Qb.call(this,a);this.A=a};g.N=function(a){ag.prototype.N.call(this,a);a.j=this.i;a.V=this.s;Lf(a,this.o)};
function Vd(a,b,c,d){c=c[a.c.b];var e;var f=0;for(e=a.a.length;f<e;f++){var h=a.a[f];var l=f+1;a:for(;l<e;l++){var k=a.a[l];if(A(h.P,k)||A(k.P,h))continue a;if(h.a==I&&k.a==I)continue a;var m=2*(h.Xa()+k.Xa())/d;if(!(m=tc(fd(h))+tc(fd(k))>m)){var n=h,q=k,t=a.i;null!=Te(n)?m=We(n,q,t):null!=Te(q)?m=We(q,n,t):(m=sc(L(dd(q),dd(n))),n=q.Pa()+n.Pa()+t,m=m<n*n)}if(!m)continue a;Bf(h,b,k,c)}}}
function ng(a,b,c){if(!isFinite(c.a))return 0;if(a.c==c){var d=De(a);var e=d.m();var f=d.l()}else if(a.a==c)d=Ee(a),e=d.m(),f=d.l();else return 0;if(b.c==c){d=De(b);var h=d.m();d=d.l();var l=1}else if(b.a==c)d=Ee(b),h=d.m(),d=d.l(),l=-1;else return 0;return l*(a.f.m()*(b.f.m()/c.a-f*(h*b.f.l()-d*b.f.m())/(c.a*c.v))+a.f.l()*(b.f.l()/c.a+e*(h*b.f.l()-d*b.f.m())/(c.a*c.v)))}
function og(a){for(var b=a.length,c=Array(b),d=0;d<b;d++)c[d]=new Float64Array(b);for(var e=0;e<b;e++){var f=a[e];for(d=0;d<b;d++){var h=a[d];c[e][d]+=ng(f,h,f.c);c[e][d]-=ng(f,h,f.a)}}return c}
function Yd(a,b){if(0==b.length)throw Error("empty array passed to handleCollisions");switch(a.g){case "simultaneous":for(var c=b.length,d=D(c),e=D(c),f=D(c),h=Rb(c),l=!1,k=0;k<c;k++){var m=b[k];d[k]=Id(m);f[k]=Hd(m)?1:1+m.U;d[k]*=Hd(m)?1:1+m.U;h[k]=m.i;l=l||!m.i}f=og(b);te(a.B,f,e,d,h,a.Y());d=!1;for(h=0;h<c;h++)f=b[h],1E-12<e[h]&&(d=!0),pg(a,f,e[h]);l&&d&&a.S().Za(1,3);a.ha();a=d;break;case "hybrid":a=qg(a,b,!0);break;case "serial separate":a=qg(a,b,!1,!1,!1);break;case "serial grouped":a=qg(a,
b,!1,!0,!1);break;case "serial separate lastpass":a=qg(a,b,!1,!1,!0);break;case "serial grouped lastpass":a=qg(a,b,!1,!0,!0);break;default:throw Error("");}return a}
function qg(a,b,c,d,e){d=r(d)?d:!0;e=r(e)?e:!0;var f=f||1E-5;var h=r(h)?h:!0;var l=b.length,k,m=0,n=20*l,q=n,t=D(l),w=D(l),H=D(l);var y=D(l);var J=Rb(l),V=!1;for(k=0;k<l;k++){var P=b[k];J[k]=P.i;t[k]=d?J[k]?0:P.U:P.U;w[k]=Id(P);y[k]=w[k];V=V||!P.i}k=og(b);do{m++;h&&m>q&&(f*=2,q+=n);var va=f,jb=J,ea=w,Nh=ea.length,Oh=-1,Ak=ue(a.j,Nh);for(y=0;y<Nh;y++)if(P=Ak[y],!jb[P]&&ea[P]<-va||jb[P]&&Math.abs(ea[P])>va){Oh=P;break}y=Oh;if(-1==y&&!e)break;rg(a,c,d,f,y,J,t,w,H,b,k)}while(-1<y);d=!1;for(k=0;k<l;k++)c=
b[k],1E-12<H[k]&&(d=!0),pg(a,c,H[k]);V&&d&&a.S().Za(1,3);a.ha();return d}
function rg(a,b,c,d,e,f,h,l,k,m,n){var q,t=l.length,w=Rb(t);if(-1==e)for(b=0;b<t;b++)w[b]=!0;else if(b||c)for(c=Ye(m,m[e],b,l,-d),d=c.length,b=0;b<d;b++){var H=c[b],y=Ea(m,function(a){return a==H});w[y]=!0}else for(b=0;b<t;b++)w[b]=b==e;m=0;c=D(t);for(b=0;b<t;b++)c[b]=w[b]?m:-1,m+=w[b]?1:0;d=D(m);for(b=0;b<t;b++)w[b]&&(d[c[b]]=b);y=null;var J=D(m);var V=Array(m);for(b=0;b<m;b++)V[b]=new Float64Array(m);y=D(m);var P=Rb(m);for(b=0;b<t;b++)if(w[b])for(y[c[b]]=l[b],P[c[b]]=f[b],q=0;q<t;q++)w[q]&&(V[c[b]][c[q]]=
n[b][q]);for(b=0;b<m;b++)-1!=e&&(y[b]*=1+h[d[b]]),J[b]=0;if(-1!=te(a.B,V,J,y,P,a.Y())&&(a=ne(V,J),a=re(a,y),!we(J,a,P)))throw Error("");for(b=0;b<m;b++)k[d[b]]+=J[b];for(b=0;b<t;b++)for(q=0;q<t;q++)w[q]&&(l[b]+=n[b][q]*J[c[q]])}function pg(a,b,c){if(!b.i&&0>c){if(-1E-12>c)throw Error("");c=0}b.oa=c;0!=c&&(sg(a,new He("IMPULSE1",b.c,c,b.g,b.f,De(b))),sg(a,new He("IMPULSE2",b.a,-c,b.g,b.f,Ee(b))))}
function sg(a,b){var c=b.g,d=c.a;if(isFinite(d)){var e=b.a,f=1E-4>Math.abs(e),h=a.S(),l=c.a*c.v;c=c.B;var k=b.wa(),m=b.f;if(-1<c){var n=1+c;Bd(h,n,h.G(n)+k.m()*e/d,f);n=3+c;Bd(h,n,h.G(n)+k.l()*e/d,f);n=5+c;Bd(h,n,h.G(n)+e*(m.m()*k.l()-m.l()*k.m())/l,f)}}a.A&&(d=a.Y()+.1,b.U=d,a.b.add(b))};var tg={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ug(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(vg.test(c))return b.qc=wg(c),b.type="hex",b;a:{var d=a.match(xg);if(d){c=Number(d[1]);var e=Number(d[2]);d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length){e=c[0];a=c[1];c=c[2];e=Number(e);a=Number(a);c=Number(c);if(e!=(e&255)||a!=(a&255)||c!=(c&255))throw Error('"('+e+","+a+","+c+'") is not a valid RGB color');e=yg(e.toString(16));a=yg(a.toString(16));c=yg(c.toString(16));b.qc="#"+
e+a+c;b.type="rgb";return b}if(tg&&(c=tg[a.toLowerCase()]))return b.qc=c,b.type="named",b;throw Error(a+" is not a valid color string");}var zg=/#(.)(.)(.)/;function wg(a){if(!vg.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(zg,"#$1$1$2$2$3$3"));return a.toLowerCase()}var vg=/^#(?:[0-9a-f]{3}){1,2}$/i,xg=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function yg(a){return 1==a.length?"0"+a:a};function Ag(){return["LEFT","MIDDLE","RIGHT","FULL","VALUE"]}function Bg(a){for(var b=Ag(),c=0,d=b.length;c<d;c++)if(a===b[c])return b[c];throw Error("invalid HorizAlign value:  "+a);}var Cg={Pd:"left",cc:"middle",ae:"right",$b:"full",kc:"value"};function Dg(a,b){if(!(v(0)&&v(0)&&v(a)&&v(b)))throw Error();if(0>a||0>b)throw Error();this.b=a;this.a=b}g=Dg.prototype;g.toString=function(){return""};g.Na=function(a){return this.b==a.b&&this.a==a.a};g.K=function(){return this.a};g.ga=function(){return 0};g.aa=function(){return 0};g.J=function(){return this.b};g.sa=function(){return 1E-14>this.b||1E-14>this.a};g.na=function(a,b){return F(0,0,b)||F(0,0,b)||F(this.b,a.b,b)||F(this.a,a.a,b)?!1:!0};var Eg=new Dg(0,0);function Fg(){return["TOP","MIDDLE","BOTTOM","FULL","VALUE"]}function Gg(a){for(var b=Fg(),c=0,d=b.length;c<d;c++)if(a===b[c])return b[c];throw Error("invalid VerticalAlign value: "+a);}var Hg={fe:"top",cc:"middle",Kd:"bottom",$b:"full",kc:"value"};function Ig(a,b,c,d,e,f){this.f=ac(a);this.c=ac(b);this.h=ac(c);this.g=ac(d);this.a=ac(e);this.b=ac(f);a=ad;a=a.translate(this.f,this.c);a=a.scale(this.a,-this.b);this.i=a=a.translate(-this.h,-this.g)}Ig.prototype.toString=function(){return""};
function Jg(a,b,c,d,e){c=Bg(c||"MIDDLE");d=Gg(d||"MIDDLE");e=e||1;if(1E-15>e||!isFinite(e))throw Error("bad aspectRatio "+e);var f=b.ga(),h=b.b,l=b.a-f,k=b.aa()-h;if(1E-15>l||1E-15>k)throw Error("simRect cannot be empty "+b);b=a.aa();var m=a.ga(),n=a.J();a=a.K();var q=0,t=0,w=0,H=0;"FULL"==c&&(w=n/l,q=0);"FULL"==d&&(H=a/k,t=0);if("FULL"!=c||"FULL"!=d)if("FULL"==c?(H=w*e,q=!0):"FULL"==d?(w=H/e,q=!1):(w=n/l,H=w*e,q=!0,t=Math.floor(.5+H*k),a<t&&(H=a/k,w=H/e,q=!1)),q)switch(q=0,t=Math.floor(.5+k*H),d){case "BOTTOM":t=
0;break;case "MIDDLE":t=(a-t)/2;break;case "TOP":t=a-t;break;default:throw Error("unsupported alignment "+d);}else switch(t=0,d=Math.floor(.5+l*w),c){case "LEFT":q=0;break;case "MIDDLE":q=(n-d)/2;break;case "RIGHT":q=n-d;break;default:throw Error("unsupported alignment "+c);}return new Ig(m,b+a,f-q/w,h-t/H,w,H)}function Kg(a,b){if(v(b))var c=void 0;else c=b.l(),b=b.m();if(!v(b)||!v(c))throw Error();return new K(a.h+(b-a.f)/a.a,a.g+(a.c-c)/a.b)}
function Lg(a,b){return new N(a.h+(b.ga()-a.f)/a.a,a.g+(a.c-(b.aa()+b.K()))/a.b,a.h+(b.ga()+b.J()-a.f)/a.a,a.g+(a.c-b.aa())/a.b)}function Mg(a,b){return new K(Ng(a,b.m()),Og(a,b.l()))}function Ng(a,b){return a.f+(b-a.h)*a.a}function Og(a,b){return a.c-(b-a.g)*a.b};function Pg(a,b){this.b=null!=a?a:new ld("proto");this.a=null!=b?b:null;this.F=isFinite(this.b.a)&&0<B(this.b.L).length;this.f=Qg(this);this.c=Rg(this.f)}g=Pg.prototype;g.toString=function(){return""};g.Ga=function(a){a=kd(this.b,a);var b=this.b;b=new N(b.ia(),b.ma(),b.Qa(),b.Ea());return yc(b,a)};
function Rg(a){if(!u(a)||""==a)return!1;var b=a.match(/^rgba\((.*),\s*\d*\.?\d+\)/);null!=b&&(a="rgb("+b[1]+")");a=ug(a).qc;a=wg(a);var c=[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)];a=c[0];b=c[1];var d=c[2];c=Math.max(Math.max(a,b),d);var e=Math.min(Math.min(a,b),d);if(e==c)e=a=0;else{var f=c-e;e=f/c;a=60*(a==c?(b-d)/f:b==c?2+(d-a)/f:4+(a-b)/f);0>a&&(a+=360);360<a&&(a-=360)}a=[a,e,c];return.65>a[2]||.57<a[1]&&.11>Math.abs(a[0]-.677)}
g.Ha=function(a,b){a.save();var c=1/b.a,d=Wc(b.i,cd(this.b));$c(d,a);this.b.gd(a);Sg(this)&&a.clip();var e=Qg(this);e&&(a.fillStyle=e,a.fill());var f=Tg(this);if(f){a.lineWidth=Ug(this)/b.a;var h=Vg(this);0<h.length&&na(a.setLineDash)&&(h=Aa(h,function(a){return a/b.a}),a.setLineDash(h));a.strokeStyle=f;a.stroke();a.setLineDash([])}f=Wg(this);h=Xg(this);if(null!=f||null!=h)a.translate(this.b.ia(),this.b.Ea()),a.scale(c,-c),Vc(Yg(this),a),null!=f&&a.drawImage(f,0,0),null!=h&&h(a);if(this.b.a!=I){$c(d,
a);this.f!==e&&(this.f=e,this.c=Rg(e));e=1/b.a;a.lineWidth=e;if(Zg(this)){f=this.b.c;a.strokeStyle=this.c?"#ccc":"black";h=.2*Math.min(this.b.J(),this.b.K());var l=8*e;h>l&&(h=l);a.beginPath();a.moveTo(f.m()-h,f.l());a.lineTo(f.m()+h,f.l());a.stroke();a.beginPath();a.moveTo(f.m(),f.l()-h);a.lineTo(f.m(),f.l()+h);a.stroke()}if($g(this)){var k=4*e;e=.15*Math.min(this.b.J(),this.b.K());e<k&&(k=e);z(B(this.b.L),function(b){a.fillStyle=this.c?"#ccc":"gray";a.beginPath();a.arc(b.m(),b.l(),k,0,2*Math.PI,
!1);a.closePath();a.fill()},this)}}ah(this)&&(e=this.b.Kb(),d=d.translate(e),(e=bh(this))&&(d=Zc(d,e)),d=d.scale(c,-c),$c(d,a),a.fillStyle=ch(this),a.font=ah(this),a.textAlign="center",a.fillText(this.b.getName(!0),0,a.measureText("M").width/2));a.restore()};function Vg(a){return void 0!==a.j?a.j:null!=a.a?Vg(a.a):[]}function Zg(a){return void 0!==a.o?a.o:null!=a.a?Zg(a.a):!1}function $g(a){return void 0!==a.s?a.s:null!=a.a?$g(a.a):!1}
function Qg(a){return void 0!==a.g?a.g:null!=a.a?Qg(a.a):"lightGray"}function Wg(a){return void 0!==a.B?a.B:null!=a.a?Wg(a.a):null}function Yg(a){return void 0!==a.v?a.v:null!=a.a?Yg(a.a):ad}function Sg(a){return void 0!==a.u?a.u:null!=a.a?Sg(a.a):!1}function Xg(a){return void 0!==a.w?a.w:null!=a.a?Xg(a.a):null}g.Aa=function(){return[this.b]};function ch(a){return void 0!==a.C?a.C:null!=a.a?ch(a.a):"black"}function ah(a){return void 0!==a.L?a.L:null!=a.a?ah(a.a):""}
function bh(a){return void 0!==a.M?a.M:null!=a.a?bh(a.a):0}g.Ia=function(){return this.b.b};g.ra=function(){return[this.b]};function Tg(a){return void 0!==a.i?a.i:null!=a.a?Tg(a.a):""}function Ug(a){return void 0!==a.A?a.A:null!=a.a?Ug(a.a):1}g.$=function(){return void 0!==this.h?this.h:null!=this.a?this.a.$():0};g.Ba=function(){return this.F};function dh(a,b){a.g=b;return a}g.xa=function(a){this.b.H(a)};g.ka=function(a){this.h=a};function eh(a,b){var c=fh++;S.call(this,"GRAVITY_INVERSE_SQUARE_LAW"+(0<c?"_"+c:""));this.b=a;this.a=[];this.c=null;null!=b&&(a=B(b.a),z(a,x(this.yd,this)),kc(b,this),this.c=b);this.D(Lc(new Q(this,gh.Ma,hh.Ma,x(this.df,this),x(this.ef,this)),4))}p(eh,S);g=eh.prototype;g.toString=function(){return""};g.yd=function(a){if(a.Ib()&&!A(this.a,a)){var b=a.a;0<b&&isFinite(b)&&this.a.push(a)}};
g.Fb=function(){var a=B(this.a),b=[],c=0,d=a.length;z(this.a,function(e){c++;var f=e.a;if(!(0>=f)&&isFinite(f))for(var h=e.b,l=c;l<d;l++){var k=a[l],m=k.a;if(!(0>=m)&&isFinite(m)){var n=L(h,k.b),q=n.length();n=vc(n);null!=n&&(n=uc(n,this.b*f*m/(q*q)),b.push(new qd("gravity",e,e.b,1,uc(n,-1),1)),b.push(new qd("gravity",k,k.b,1,n,1)))}}},this);return b};g.Lb=function(){null!=this.c&&Tc(this.c,this)};g.df=function(){return this.b};
g.Gb=function(){var a=0,b=B(this.a),c=0,d=b.length;z(this.a,function(e){c++;var f=e.a;if(!(0>=f)&&isFinite(f)){var h=e.Xa();e=e.b;for(var l=c;l<d;l++){var k=b[l],m=k.a;if(!(0>=m)&&isFinite(m)){var n=k.Xa();k=L(e,k.b).length();a+=this.b*f*m*(1/(h+n)-1/k)}}}},this);return a};g.X=function(a){a.I("OBJECT_ADDED")?(a=a.G(),this.yd(a)):a.I("OBJECT_REMOVED")&&(a=a.G(),Ga(this.a,a))};g.ef=function(a){this.b=a;T(this,gh.Ma)};var fh=0,gh={Ma:"gravity"},hh=gh;function ih(a,b){b=new rf(b,void 0);Nf(b,new df(new K(-a,0)));vf(b,new K(-a,0),M);Gf(b);Hf(b,M);b.v=a*a/2;b.g=.8;return b}function jh(a,b,c,d){c=new rf(c,d);d=a/2;var e=b/2;Nf(c,new df(new K(-d,-e)));zf(c,new K(d,-e),!1);zf(c,new K(d,e),!0);zf(c,new K(-d,e),!0);zf(c,new K(-d,-e),!1);Gf(c);Hf(c,M);c.v=(a*a+b*b)/12;c.g=.8;return c}function kh(a,b,c,d,e){if(0>c||3<c)throw Error();a=jh(a,b,d,e);Mf(a,c,0==c||2==c?a.K()/2:a.J()/2);return a}new Of;function lh(){var a=new rf("concave_circle");Nf(a,new df(new K(0,-.5)));zf(a,new K(3,-.5),!1);zf(a,new K(3,1),!0);var b=new K(0,1);var c=wf(a);b=new df(b,!0);var d=(W(c)+W(b))/2;var e=(X(c)+X(b))/2;var f=W(c)-d;var h=X(c)-e;f=Math.sqrt(f*f+h*h);h=4-f*f;if(1E-10>h)throw Error("radius 2 is too small, must be >= "+f);h=Math.sqrt(h);1E-10>Math.abs(W(b)-W(c))?d=h+d:(f=(X(b)-X(c))/(W(b)-W(c)),h/=Math.sqrt(1+f*f),d=-f*h+d,e=h+e);c=new mf(a,c,b,new K(d,e),!0,!1);xf(a,c);zf(a,new K(0,-.5),!1);Gf(a);id(a,1.5,
0);a.g=.8;return a};function mh(a){var b,c=0,d=[];for(b=0;4>b;b++){var e=null;switch(b){case 0:e=kh(14,1,2,nh.$c,oh.$c);e.H(new K(M.m(),M.l()-6-.5),0);c=ed(e);break;case 1:e=kh(1,14,3,nh.bd,oh.bd);e.H(new K(M.m()+6.5,M.l()),0);break;case 2:e=kh(14,1,0,nh.cd,oh.cd);e.H(new K(M.m(),M.l()+6.5),0);break;case 3:e=kh(1,14,1,nh.ad,oh.ad),e.H(new K(M.m()-6-.5,M.l()),0)}null!=e&&(e.Va(I),e.g=1,d.push(e),a.N(e))}for(b=0;b<d.length;b++){a=d[b];a.P=Ka(a.P,d);a=a.P;e={};for(var f=0,h=0;h<a.length;){var l=a[h++];var k=l;k=oa(k)?"o"+
(k[pa]||(k[pa]=++qa)):(typeof k).charAt(0)+k;Object.prototype.hasOwnProperty.call(e,k)||(e[k]=!0,a[f++]=l)}a.length=f}return c}var nh={$c:"wall bottom",bd:"wall right",ad:"wall left",cd:"wall top"},oh=nh;function ph(a,b,c){ig(a,new Qf(void 0===c?0:c,.5,a.b));a.Cc(.6);mg(a,"serial grouped lastpass");a.Ed(99999);a.vd(.01);a.wd(.5);b.s=.025;b.o=new Jd(a)}ua("module$exports$myphysicslab$test$CircleStraightTest.ball_block_collide_setup",function(a,b){ph(a,b);b=ih(.75,"ball");id(b,0,.2);b.H(new K(-2,2),0);jd(b,new K(1,-1),1);a.N(b);b=jh(1,1,"block");b.H(new K(0,0),0);a.N(b);kg(a,1)});
ua("module$exports$myphysicslab$test$CircleStraightTest.ball_block_attract_setup",function(a,b){ph(a,b);b=ih(.75,"ball");id(b,0,.2);b.H(new K(-2,2),0);jd(b,new K(.1,-.1),1);a.N(b);b=jh(1,1,"block");b.H(new K(0,0),0);jd(b,new K(-.1,.1),-1);a.N(b);kg(a,.8);ig(a,new eh(3,a.b))});
ua("module$exports$myphysicslab$test$CircleStraightTest.ball_block_contact_setup",function(a,b){ph(a,b);b=ih(.75,"ball");id(b,0,.2);b.H(new K(-.2525,0),0);jd(b,new K(0,.6),1);a.N(b);b=jh(1,3,"block");b.H(new K(1,0),0);jd(b,new K(0,-.6),0);a.N(b);kg(a,.8);ig(a,new eh(3,a.b));b=[];Vd(a,b,zd(a.S()),0);Yd(a,b)});
ua("module$exports$myphysicslab$test$CircleStraightTest.circle_arc_block_setup",function(a,b){ph(a,b);b.s=.01;b=new rf("block-round-edge");Nf(b,new df(new K(0,0)));zf(b,new K(2,0),!1);zf(b,new K(2,1),!0);vf(b,new K(0,1),new K(1,-.3));zf(b,new K(0,0),!1);Gf(b);b.g=.8;b.H(new K(0,-1),0);a.N(b);b=jh(1,1,"block");b.H(new K(2.5,.3),Math.PI/8-Math.PI/24);a.N(b);kg(a,.8);ig(a,new eh(3,a.b))});
ua("module$exports$myphysicslab$test$CircleStraightTest.concave_ball_block_collide_setup",function(a,b){ph(a,b);b.s=.01;b=lh();b.H(new K(0,-2),0);a.N(b);b=jh(1,1,"block");b.H(new K(.5,-.22),Math.PI/8-Math.PI/24);a.N(b);kg(a,.8);ig(a,new eh(3,a.b))});
ua("module$exports$myphysicslab$test$CircleStraightTest.concave_ball_block_contact_setup",function(a,b){ph(a,b);b.s=.01;b=lh();b.H(new K(0,-2.3228757),0);b.g=.8;a.N(b);var c=jh(1,1,"block");c.g=.8;for(var d=Math.PI/16,e=1.5,f=I;1E-8<Math.abs(f);){c.H(new K(0,0),d);Kf(c);Kf(b);c.H(new K(e*Math.sin(d),-e*Math.cos(d)),d);var h=[];Bf(b,h,c,0);if(0==h.length)e+=.01;else{f=I;for(var l=0,k=h.length;l<k;l++){var m=h[l];m=m.b-m.w-.001;m<f&&(f=m)}e+=f}}a.N(c);ig(a,new eh(10,a.b))});
function qh(a,b){ph(a,b);b=ih(.75,"ball");b.H(new K(-.4,0),0);jd(b,new K(0,0),0);a.N(b);b=jh(1,3,"block");b.H(new K(1.5,0),-Math.PI/4);jd(b,new K(-.2,0),.5);a.N(b);kg(a,.8)}ua("module$exports$myphysicslab$test$CircleStraightTest.rotating_block_vs_ball_1_setup",function(a,b){qh(a,b);kg(a,1)});ua("module$exports$myphysicslab$test$CircleStraightTest.rotating_block_vs_ball_0_setup",function(a,b){qh(a,b);kg(a,0)});
function rh(a,b){ph(a,b);ya(a.f,a.Dd,a);a.S().Za(1,2,3);b=ih(.5,"ball");b.H(new K(0,0),0);a.N(b);var c=jh(10,1,"wall");c.Va(I);c.H(new K(0,-2.5),0);a.N(c);c=ed(c)+b.Xa();b.Qc=r(c)?c:b.b.l();b=new Xf(3,a.b);ig(a,b);kg(a,.8)}ua("module$exports$myphysicslab$test$CircleStraightTest.ball_falls_on_floor_setup",rh);
ua("module$exports$myphysicslab$test$CircleStraightTest.wedged_ball_setup",function(a,b){ph(a,b,0);a.C("velocity_and_distance");a.Cc(.6);b=ih(1.5,"ball");id(b,.4,.2);b.H(new K(-3.99,-3),0);a.N(b);b=jh(1,1,"fixed block");b.H(new K(-2.5,-5),0);b.Va(I);a.N(b);b=new Xf(3,a.b);ig(a,b);var c=mh(a);b.zc(c);kg(a,.8)});
ua("module$exports$myphysicslab$test$CircleStraightTest.elastic_balls_setup",function(a,b){ph(a,b,0);a.C("velocity_and_distance");b=ih(.8,"ball1");b.H(new K(-5,2));b.g=1;a.N(b);b=ih(.8,"ball2");b.H(new K(-3,2));b.g=.8;a.N(b);b=ih(.8,"ball3");b.H(new K(-1,2));b.g=.6;a.N(b);b=ih(.8,"ball4");b.H(new K(1,2));b.g=.4;a.N(b);b=ih(.8,"ball5");b.H(new K(3,2));b.g=.2;a.N(b);b=ih(.8,"ball6");b.H(new K(5,2));b.g=0;a.N(b);b=new Xf(3,a.b);ig(a,b);a=mh(a);b.zc(a)});function sh(a,b,c){this.b=document.createElement("button");this.b.type="button";r(c)?(this.b.className="icon",this.b.appendChild(c)):this.b.appendChild(document.createTextNode(a));this.f=b;C(this.b,"mousedown",this.We,!0,this);C(this.b,"mouseup",this.pd,!0,this);C(this.b,"dragleave",this.pd,!1,this);this.c=void 0;this.a=0}g=sh.prototype;g.toString=function(){return""};g.Z=function(){return this.b};g.We=function(){this.qd()};g.pd=function(){r(this.c)&&(clearTimeout(this.c),this.c=void 0)};
g.qd=function(){this.f();if(0<this.a){var a=r(this.c)?this.a:2*this.a;this.c=setTimeout(x(this.qd,this),a)}};function th(a){this.a=a||Dc;this.o="14pt sans-serif";this.c="gray";this.g=0;this.h="VALUE";this.j=0;this.b="VALUE";this.f=0;this.rc="x";this.Rb="y";this.i=100}g=th.prototype;g.toString=function(){return""};g.Ga=function(){return!1};
g.Ha=function(a,b){a.save();a.strokeStyle=this.c;a.fillStyle=this.c;a.font=this.o;a.textAlign="start";a.textBaseline="alphabetic";var c=this.a;var d=c.ga(),e=c.a,f=c.b,h=c.aa();var l=e-.06*(e-d);var k=d+.01*(e-d);switch(this.b){case "VALUE":var m=this.j;m<k?m=k:m>l&&(m=l);l=Ng(b,m);break;case "RIGHT":l=Ng(b,l);break;case "LEFT":l=Ng(b,k);break;default:l=Ng(b,Ac(c))}k=Og(b,h);m=Og(b,f);switch(this.h){case "VALUE":c=Og(b,this.g);c<k+30?c=k+30:c>m-30&&(c=m-30);break;case "TOP":c=k+30;break;case "BOTTOM":c=
m-30;break;default:c=Og(b,Bc(c))}a.beginPath();a.moveTo(Ng(b,d),c);a.lineTo(Ng(b,e),c);a.stroke();d=c;k=this.a;e=d-4;c=e+8;var n=k.ga();k=k.a;m=uh(this,k-n);for(var q=Math.ceil(n/m)*m;q<k;){n=Ng(b,q);a.beginPath();a.moveTo(n,e);a.lineTo(n,c);a.stroke();var t=q+m;if(t>q)q=q.toFixed(this.f),a.fillText(q,n-a.measureText(q).width/2,c+12);else{a.fillText("scale is too small",n,c+12);break}q=t}a.fillText(this.rc,Ng(b,k)-a.measureText(this.rc).width-5,d-8);a.beginPath();a.moveTo(l,Og(b,f));a.lineTo(l,Og(b,
h));a.stroke();f=l;d=this.a;h=f-4;l=h+8;c=d.b;d=d.aa();e=uh(this,d-c);for(m=Math.ceil(c/e)*e;m<d;){c=Og(b,m);a.beginPath();a.moveTo(h,c);a.lineTo(l,c);a.stroke();k=m+e;if(k>m)m=m.toFixed(this.f),n=a.measureText(m).width,"RIGHT"===this.b?a.fillText(m,l-(n+10),c+6):a.fillText(m,l+5,c+6);else{a.fillText("scale is too small",l,c);break}m=k}h=a.measureText(this.Rb).width;"RIGHT"===this.b?a.fillText(this.Rb,f-(h+6),Og(b,d)+13):a.fillText(this.Rb,f+6,Og(b,d)+13);a.restore()};g.Aa=function(){return[]};
function uh(a,b){var c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10));b/=c;c*=8<=b?2:5<=b?1:3<=b?.5:2<=b?.4:.2;b=Math.log(c)/Math.LN10;a.f=0>b?Math.ceil(-b):0;return c}g.Ia=function(){return M};g.ra=function(){return[]};g.$=function(){return this.i};g.Ba=function(){return!1};g.ja=function(a){this.c=a};g.xa=function(){};function vh(a){a.h="BOTTOM";v(void 0)&&(a.g=void 0)}function wh(a){a.b="LEFT";v(void 0)&&(a.j=void 0)}g.ka=function(a){r(a)&&(this.i=a)};function xh(a,b){this.s=a;this.o=b;this.b=v(2)?2:1;this.a=oa(void 0)?void 0:M;this.f="14pt sans-serif";this.v="blue";this.j=this.g=1;this.i="black";this.h="rgba(255, 255, 255, 0.75)";this.c=0}g=xh.prototype;g.toString=function(){return""};g.Ga=function(a){return oc(a,this.a)<=this.b};
g.Ha=function(a,b){var c=Mg(b,this.a),d=this.b*b.a;a.save();a.beginPath();a.arc(c.m(),c.l(),d,0,2*Math.PI,!1);a.closePath();a.lineWidth=this.j;a.strokeStyle=this.i;a.stroke();a.fillStyle=this.h;a.fill();d=this.s();var e=this.o();yh(this,a,b,"blue",d,c);yh(this,a,b,"red",e,c);b=d.toFixed(3);a.fillStyle=this.v;a.font=this.f;a.textAlign="center";a.fillText(b,c.m(),c.l());a.restore()};
function yh(a,b,c,d,e,f){e-=2*Math.floor(e/2);var h=e/2;e=a.b*Math.sin(2*Math.PI*h)*c.a;c=a.b*Math.cos(2*Math.PI*h)*c.b;b.lineWidth=a.g;b.strokeStyle=d;b.beginPath();b.moveTo(f.m(),f.l());b.lineTo(f.m()+e,f.l()-c);b.stroke()}g.Ba=function(){return!0};g.Aa=function(){return[]};g.Ia=function(){return this.a};g.ra=function(){return[]};g.$=function(){return this.c};g.xa=function(a){this.a=a};g.ka=function(a){this.c=r(a)?a:0};var zh={yb:"show clock"};function Ah(a,b){if(this.a=a)a.spellcheck=!1;if(this.f=b)b.spellcheck=!1;this.a&&C(this.a,"keydown",this.u,!1,this);this.a&&C(this.a,"change",this.w,!0,this);this.v=!1;this.g=[];this.b=-1;this.B=[];this.j=!1;this.o=[];this.F="myphysicslab goog length name terminal find".split(" ");this.h=null;this.i=0}Ah.prototype.toString=function(){return""};function Bh(a){return a.replace(/\\(x|u00)([0-9a-fA-F]{2})/g,function(a,c,d){return String.fromCharCode(Number("0x"+d))})}
function Ch(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16)})}
Ah.prototype.eval=function(a,b,c){b="boolean"==typeof b?b:!0;if((c=c||!1)&&!b)throw Error();a=Bh(a).trim();if(!a.match(/^\s*$/)){this.i++;1<this.i&&(b=!1);b?(this.g.unshift(a),this.b=-1):(this.o.push(this.c),this.c=void 0);try{var d=a,e=/^\w\s*\[\s*\d*\s*\]$/,f=d.match(/\w\s*\[[^\]]*?\]/g);if(null!=f)for(var h=0,l=f.length;h<l;h++)if(!e.test(f[h]))throw Error("prohibited usage of square brackets in script: "+d+" Only positive integer is allowed in brackets.  Try using Util.get(array, index) or Util.set(array, index, value).");
for(f=["",a];f=Dh(f[1]),f[0];){var k=f[0].trim();if(0!=k.length)a:{b&&Eh(this,"> "+k);if(null!=this.h){b:{var m=this.h;l=k;";"==l.slice(-1)&&(l=l.slice(0,l.length-1));d=0;for(var n=m.b.length;d<n;d++)if(l.toLowerCase()==m.b[d]){var q=m.j[d]();break b}var t=l.split("="),w=E(t[0].trim()),H=Fh(m,w);if(null==H||2<t.length)q=void 0;else{if(2==t.length)try{var y=t[1].trim();if(2>y.length)var J=y;else{var V=y.charAt(0);if(V!=y.charAt(y.length-1)||'"'!=V&&"'"!=V)J=y;else{l="";d=1;for(var P=y.length-1;d<P;d++){var va=
y[d];if("\\"==va)if(d++,d<P)switch(va=y[d],va){case "0":l+="\x00";break;case "b":l+="\b";break;case "t":l+="\t";break;case "n":l+="\n";break;case "v":l+="\v";break;case "f":l+="\f";break;case "r":l+="\r";break;case '"':l+='"';break;case "'":l+="'";break;case "\\":l+="\\";break;default:l+="\\"+va}else l+=va;else l+=va}J=l}}H.jb(J)}catch(ea){throw ea.message+='\nwhile setting value "'+J+'" on parameter '+w,ea;}q=H.G()}}if(void 0!==q){this.c=q;break a}}var jb=Gh(this,k);console.log("JavaScript is disabled due to advanced compilation; try a simple-compiled version: "+
jb);Eh(this,"JavaScript is disabled due to advanced compilation; try a simple-compiled version");this.c=void 0}}b&&r(this.c)&&";"!=a.slice(-1)&&Eh(this,String(this.c));b&&r(this.s)&&this.s()}catch(ea){if(b?(this.c=void 0,Eh(this,ea)):this.c=this.o.pop(),!c)throw this.i--,ea.message+="\nScript: "+a,ea;}this.i--;if(b)return Hh(this),this.c;a=this.c;this.c=this.o.pop();return a}};
function Gh(a,b){b=Ih(b);for(var c="",d=0;b;){if(1E4<++d)throw Error("Terminal.expand");var e=b.match(/^[^'"/]+/);if(null!==e&&(e=e[0],b=b.slice(e.length),e=Ba(a.B,function(a,b){return a.replace(b.$f,b.replace)},e),Jh(e,a.F),c+=e,0==b.length))break;if(c.match(/.*[=(][ ]*$/)&&(e=b.match(/^\/[^*/](\\\/|[^\\/])*\//),null!==e)){e=e[0];b=b.slice(e.length);c+=e;continue}0<b.length&&"/"==b[0]?(c+="/",b=b.slice(1)):(e=b.match(/^"(\\.|[^\\"])*"/),null!==e?(e=e[0],b=b.slice(e.length),c+=e):0<b.length&&'"'==
b[0]?(c+='"',b=b.slice(1)):(e=b.match(/^'(\\.|[^\\'])*'/),null!==e?(e=e[0],b=b.slice(e.length),c+=e):0<b.length&&"'"==b[0]&&(c+="'",b=b.slice(1))))}return c}
Ah.prototype.u=function(a){this.a&&this.f&&(a.metaKey&&75==a.a?(this.f.value="",a.b()):38==a.a||40==a.a?(-1==this.b&&""!=this.a.value&&(this.g.unshift(this.a.value),this.b=0),38==a.a?this.b<this.g.length-1&&(this.b++,this.a.value=this.g[this.b]):40==a.a&&(0<this.b?(this.b--,this.a.value=this.g[this.b]):(this.b=-1,this.a.value="")),a.b()):13==a.a&&this.eval(this.a.value,!0,!0))};Ah.prototype.w=function(){this.a&&this.eval(this.a.value,!0,!0)};
function Kh(){var a=window.location.href,b=a.indexOf("?");-1<b&&(a=a.slice(0,b));return a}function Eh(a,b){a.f&&(a.f.value+=b+"\n",Hh(a))}function Lh(a){a.j=!0;try{var b=window.localStorage;if(null!=b){var c=b.getItem(Kh());c&&(Eh(a,"//start of stored scripts"),z(c.split("\n"),function(a){this.eval(a)},a),Eh(a,"//end of stored scripts"))}}catch(d){Eh(a,"//cannot access localStorage due to: "+d)}a.j=!1}function Ih(a){var b=a.match(/^\s*var\s+(\w[\w_\d]*)(.*)/);return b?b[1]+b[2]:a}
function Hh(a){a.a&&a.f&&(a.f.scrollTop=a.f.scrollHeight-a.f.offsetHeight,a.a.value="")}function Mh(a,b){a.s=b}
function Dh(a){var b=0,c="",d="",e=!1,f=!1,h=!1,l="",k;var m=0;for(k=a.length;m<k;m++){var n=d;" "!=d&&"\t"!=d&&"\n"!=d&&(c=d);d=a[m];var q=m+1<k?a[m+1]:"\x00";if(e){if("\n"==d&&(e=!1,0==b))break}else if(f)"/"==d&&"\\"!=n&&(f=!1);else if(h)d==l&&"\\"!=n&&(h=!1,l="");else if("/"==d)"/"==q?e=!0:"*"==q||!c||"="!=c&&"("!=c||(f=!0);else if('"'==d||"'"==d)h=!0,l=d;else if(";"==d&&0==b)break;else"{"==d?b++:"}"==d&&b--}return[a.slice(0,m+1),a.slice(m+1)]}
function Jh(a,b){for(var c in window){a:{var d=0;for(var e=b.length;d<e;d++)if(c==b[d]){d=!1;break a}d=(new RegExp("\\b"+c+"\\b","g")).test(a)}if(d)throw Error('prohibited name: "'+c+'" found in script: '+a);}if(/\b(myEval|Function|with|__proto__|call|apply|caller|callee|arguments|addWhiteList|vetCommand|badCommand|whiteList_|addRegex|addRegex2|regexs_|afterEvalFn_|setAfterEval|parentNode|parentElement|innerHTML|outerHTML|offsetParent|insertAdjacentHTML|appendChild|insertBefore|replaceChild|removeChild|ownerDocument|insertBefore|setParser|defineNames|globalEval|window|defineProperty|defineProperties|__defineGetter__|__defineSetter__)\b/g.test(a))throw Error("prohibited name in script: "+
a);};function Ph(a,b){Qh(a);this.c=a;this.h=la(b)?b:[];Ia(this.c,function(a){return A(this.h,a)},this);this.c=Ja(this.c,this.h);this.s=[];this.i=[];this.f=[];this.a=[];this.g=[];this.v=[];this.b=[];this.j=[];this.o=[];Rh(this,"url",x(function(){return Sh(this)},this),"prints URL with script to recreate current state");Rh(this,"script",x(function(){return Th(this)},this),"prints script to recreate current state");Rh(this,"values",x(function(){return Tb(Uh(this,!1,!0,!0)+Uh(this,!0,!0,!0))},this),"shows available parameters and their current values");
Rh(this,"names",x(function(){return Tb(B(this.f).join(";"))},this),"shows available parameter names (format is SUBJECT.PARAMETER)");Rh(this,"help",x(function(){var a='myPhysicsLab version 2.0.0, advanced-compiled on 2020-02-21 12:52:14.\nUse the "values" command to see what can be set and the syntax.\n\ncommand-K            clear Terminal window\narrow up/down        retrieve previous or next command\n';for(var b=0,e=this.b.length;b<e;b++){for(var f=this.b[b];20>f.length;)f+=" ";a+=f+" "+this.o[b]+
"\n"}return a},this),"prints this help text");Vh(this)}Ph.prototype.toString=function(){return""};function Rh(a,b,c,d){a.b.push(b);a.j.push(c);a.o.push(d)}function Qh(a){var b=[];z(a,function(a){a=a.getName();if(A(b,a))throw Error("duplicate Subject name: "+a);b.push(a)})}
function Fh(a,b){b=E(b);var c=b.split(".");if(1==c.length){var d="";var e=c[0]}else if(2==c.length)d=c[0],e=c[1];else return null;if(""==d){if(1<Ca(a.a,function(a){return a==e}))throw Error("multiple Subjects have Parameter "+e);b=xa(a.a,e)}else b=xa(a.f,b);return-1<b?a.g[b].Nb(e):null}Ph.prototype.W=function(){var a=E(void 0);return Da(this.c,function(b){return b.getName()==a})};
function Uh(a,b,c,d){b=1==b;var e=Aa(a.g,function(a,b){return a.Nb(this.a[b])},a),f=e;c||(f=za(f,function(a){return!a.Ya()}));f=za(f,function(a){return A(this.h,a.W())==b},a);var h=/^[a-zA-Z0-9_]+$/;a=Aa(f,function(a){var b=E(a.getName()),c=xa(e,a),f=a.G();u(f)&&!h.test(f)&&(f='"'+f+'"');return!d&&this.v[c]?b+"="+f:E(a.W().getName())+"."+b+"="+f},a);return 0<a.length?a.join(";")+";":""}
function Th(a){var b=Uh(a,!1).split(";");b=Ja(b,Uh(a,!0).split(";"));var c=Ja(a.s,a.i);Ia(b,function(a){return A(c,a)});return b.join(";")+(0<b.length?";":"")}function Sh(a){return window.location.href.replace(/\.html\?.*$/,".html")+"?"+Ch(Th(a))}
function Vh(a){var b=Ba(a.c,function(a,b){b=za(b.getParameters(),function(a){return"DELETED"!=a.getName()});return a.concat(b)},[]);a.g=Aa(b,function(a){return a.W()});a.a=Aa(b,function(a){return E(a.getName())});a.f=Aa(b,function(a){return E(a.W().getName()+"."+a.getName())});a.v=Aa(a.a,function(a){return 1==Ca(this.a,function(b){return b==a})},a);a.i=Uh(a,!0).split(";")}
var Wh={ge:"share",Xd:"Press command-C to copy this URL to the clipboard, it will replicate this simulation with current parameters.",ie:"WARNING: URL is longer than 2048 characters."};function Xh(a){this.qa="10pt sans-serif";this.oa=a;this.a=Dc;this.v=this.f=this.b=0;this.c=10;this.o=2;this.i=!0;this.U="#666";this.ea="#999";this.V="#ccc";this.B=Yb();this.L=this.C=this.M=0;this.ba=1;this.P=fc;this.g=this.F=this.w=this.h=0;this.s=Array(12);this.u=0;this.j=Dc;this.A=!0;this.T=0}g=Xh.prototype;g.toString=function(){return""};g.Ga=function(a){return yc(this.a,a)};
g.Ha=function(a,b){if(!this.j.sa()){a.save();a.font=this.qa;a.textAlign="start";a.textBaseline="alphabetic";var c=jg(this.oa),d=c.c,e=c.b,f=c.a,h=Yh.Xc+",";isNaN(f)&&(h=Yh.tb+",");var l=58/b.b;if(this.A||this.a.sa()||F(l,this.a.K())){var k=this.a.sa()?this.j.aa():this.a.aa(),m=k-l;k>this.j.aa()||l>this.j.K()?(k=this.j.aa(),m=k-l):m<this.j.b&&(m=this.j.b,k=m+l);this.a=new N(this.j.ga(),m,this.j.a,k);this.i=!0;this.A=!1}this.f=Ng(b,this.a.ga())+10;this.v=Ng(b,this.a.a);l=this.v-this.f;b=Og(b,this.a.aa());
a.fillStyle="rgba(255,255,255,0.75)";a.fillRect(this.f-10,b,l+10,58);this.g=d+e+(isNaN(f)?0:f);this.F=0>e?e:0;.3<Yb()-this.P&&(this.P=Yb(),this.L=this.C,this.C=Vf(c));c=this.F;d=Yb();1<d-this.M?(this.M=d,++this.u>=this.s.length&&(this.u=0),this.s[this.u]=c):this.F<this.s[this.u]&&(this.s[this.u]=c);12<d-this.B?(this.B=d,c=!0):c=!1;k=d=0;for(m=this.s.length;k<m;k++)this.s[k]<d&&(d=this.s[k]);this.h=d;-1E-6>this.h?(this.b+Math.floor(.5+this.h*this.c)<this.f-10&&(this.i=!0),c&&-this.h*this.c<.2*(this.b-
this.f)&&(this.i=!0)):1E-6<this.h?this.b>this.f&&(this.i=!0):c&&10<this.b-this.f&&(this.i=!0);this.g>this.w&&(this.w=this.g);1E-12<this.g?(this.b+this.g*this.c>this.v&&(this.i=!0),this.v-this.b>.2*(this.b-this.f)&&this.g*this.c<.2*(this.v-this.b)&&(this.i=!0,this.w=this.g)):-1E-12>this.g&&c&&(0>this.w&&this.b<this.v&&(this.i=!0),this.w=this.g);this.i&&(this.B=Yb(),this.i=!1,c=0<this.g?this.g:0,c-=this.h,1E-16>c&&(c=1),this.c=c*this.c>l?.75*l/c:.95*l/c,this.b=-1E-12>this.h?this.f+Math.floor(.5+this.c*
-this.h):this.f,l=Math.pow(10,Math.floor(Math.log(c)/Math.log(10))),c/=l,this.o=8<=c?2:5<=c?1:3<=c?.5:2<=c?.4:.2,this.o*=l);l=this.b;a.fillStyle=this.U;0>e?(e=Math.floor(.5-e*this.c),a.fillRect(l-e,b,e,10),l-=e):(e=Math.floor(.5+e*this.c),a.fillRect(l,b+10,e,10),l+=e);isNaN(f)||(e=Math.floor(.5+f*this.c),a.fillStyle=this.V,a.fillRect(l,b+10,e,10),l+=e);e=this.b+Math.floor(.5+this.g*this.c)-l;a.fillStyle=this.ea;a.fillRect(l,b+10,e,10);e=this.f;b+=10;l=(this.v-this.b)/this.c;if(1E-18<Math.abs(l)&&
1E-18<this.o){a.fillStyle="#000";a.strokeStyle="#000";c=0;do d=this.b+Math.floor(c*this.c),a.beginPath(),a.moveTo(d,b+5),a.lineTo(d,b+12),a.stroke(),k=Zh(c),m=a.measureText(k).width,a.fillText(k,d-m/2,b+25),c+=this.o;while(c<l+this.o+1E-16);if(-1E-12>this.h){c=-this.o;do d=this.b+Math.floor(c*this.c),a.beginPath(),a.moveTo(d,b+5),a.lineTo(d,b+12),a.stroke(),k=Zh(c),m=a.measureText(k).width,a.fillText(k,d-m/2,b+25),c-=this.o;while(c>this.h&&d>=e)}}e=b+33;b=this.f;b=$h(a,Yh.wb+",",this.U,b,e);isNaN(f)||
(b=$h(a,Yh.Pc+",",this.V,b,e));b=$h(a,h,this.ea,b,e);f=Yh.Vc+" ";h=this.C;l=Math.abs(h-this.L);1E-15<l&&(l=-Math.floor(Math.log(l)/Math.log(10)),l=0<l?l:1,this.ba=20>l?l:20);l=Math.abs(h);h=0>h?"-":"+";f+=1E-6>l?h+l.toExponential(5):h+l.toFixed(this.ba);a.fillStyle="#000";a.fillText(f,b,e+12);a.restore()}};function $h(a,b,c,d,e){a.fillStyle=c;a.fillRect(d,e,10,10);d+=13;c=a.measureText(b).width;a.fillStyle="#000";a.fillText(b,d,e+12);return d+(c+5)}g.ra=function(){return[]};g.Aa=function(){return[]};
g.Ia=function(){return this.a.sa()?new K(0,0):zc(this.a)};g.$=function(){return this.T};g.Ba=function(){return!0};
function Zh(a){var b=Math.abs(a);1E-16>b?b="0":.001>b?(b=b.toExponential(3),b=b.replace(/\.0+([eE])/,"$1"),b=b.replace(/(\.\d*[1-9])0+([eE])/,"$1$2")):10>b?(b=b.toFixed(4),b=b.replace(/\.0+$/,""),b=b.replace(/(\.\d*[1-9])0+$/,"$1")):100>b?(b=b.toFixed(3),b=b.replace(/\.0+$/,""),b=b.replace(/(\.\d*[1-9])0+$/,"$1")):1E3>b?(b=b.toFixed(2),b=b.replace(/\.0+$/,""),b=b.replace(/(\.[1-9])0$/,"$1")):1E4>b?b=b.toFixed(0):(b=b.toExponential(3),b=b.replace(/\.0+([eE])/,"$1"),b=b.replace(/(\.\d*[1-9])0+([eE])/,
"$1$2"));return 0>a?"-"+b:b}g.xa=function(a){if(this.a.sa())this.a=new N(-5,a.l()-.5,5,a.l()+.5);else{var b=this.a.K()/2;this.a=new N(this.a.ga(),a.l()-b,this.a.a,a.l()+b)}};function ai(a,b){a.j=b;a.A=!0}g.ka=function(a){this.T=r(a)?a:0};var bi={Rc:"show energy",wb:"potential",Xc:"translational",tb:"kinetic",Pc:"rotational",Vc:"total"},Yh=bi;function ci(a,b){kc(a,this);this.a=b}ci.prototype.toString=function(){return""};ci.prototype.X=function(a){this.a(a)};function di(a){this.a=a}di.prototype.toString=function(){return""};di.prototype.Z=function(){return this.a};function ei(){this.b=[];this.a=!1}ei.prototype.toString=function(){return""};ei.prototype.fa=function(a){if(this.a)throw Error("addMemo during memorize");A(this.b,a)||this.b.push(a)};ei.prototype.la=function(){try{this.a=!0,z(this.b,function(a){a.la()})}finally{this.a=!1}};ei.prototype.Ta=function(a){if(this.a)throw Error("removeMemo during memorize");Ga(this.b,a)};function fi(a,b){this.a=null!=a?a:null;this.b=null!=b?b:null}g=fi.prototype;g.toString=function(){return""};g.Ga=function(){return!1};
g.Ha=function(a,b){if(null!=this.a){var c=this.a;c=oc(c.ca(),c.R());if(!(1E-6>c||0==this.a.f)){a.save();a.lineWidth=gi(this);a.strokeStyle=c<this.a.a-1E-5?hi(this):ii(this);if(1===ji(this)){b=b.i;var d=this.a.R(),e=this.a.ca();b=b.translate(d.m(),d.l());b=Zc(b,Math.atan2(e.l()-d.l(),e.m()-d.m()));c=b=b.scale(c/6,this.J()/.5);a.beginPath();d=Yc(c,0,0);a.moveTo(d.m(),d.l());Xc(c,.375,0,a);Xc(c,.75,.25,a);for(d=1;3>=d;d++)Xc(c,1.5*d,-.25,a),Xc(c,.375*(4*d+2),.25,a);Xc(c,5.625,0,a);Xc(c,6,0,a)}else d=
Mg(b,this.a.R()),e=Mg(b,this.a.ca()),a.beginPath(),a.moveTo(d.m(),d.l()),a.lineTo(e.m(),e.l());a.stroke();a.restore()}}};function hi(a){return void 0!==a.h?a.h:null!=a.b?hi(a.b):"red"}function ii(a){return void 0!==a.i?a.i:null!=a.b?ii(a.b):"green"}function ji(a){return void 0!==a.j?a.j:null!=a.b?ji(a.b):1}g.Aa=function(){return[]};g.Ia=function(){return null==this.a?M:uc(this.a.R().add(this.a.ca()),.5)};g.ra=function(){return null==this.a?[]:[this.a]};
function gi(a){return void 0!==a.f?a.f:null!=a.b?gi(a.b):4}g.J=function(){return void 0!==this.c?this.c:null!=this.b?this.b.J():.5};g.$=function(){return void 0!==this.g?this.g:null!=this.b?this.b.$():0};g.Ba=function(){return!1};g.xa=function(){};function ki(a){var b=new fi;b.f=a;return b}g.ka=function(a){this.g=a};function li(a){S.call(this,a||"DISPLAY_LIST_"+mi++);this.a=[]}p(li,S);g=li.prototype;g.toString=function(){return""};g.add=function(a){if(!oa(a))throw Error("non-object passed to DisplayList.add");var b=a.$();ni(this);for(var c=0,d=this.a.length;c<d&&!(b<this.a[c].$());c++);Ma(this.a,c,0,a);R(this,new O(this,"OBJECT_ADDED",a))};g.Bd=function(a){if(!oa(a))throw Error("non-object passed to DisplayList.contains");return A(this.a,a)};function oi(a,b,c){ni(a);z(a.a,function(a){a.Ha(b,c)})}
function pi(a,b){if(v(b)){var c=a.a.length;if(0>b||b>=c)return null;ni(a);return a.a[b]}if(u(b)){var d=E(b);return Da(a.a,function(a){a=a.ra();for(var b=0,c=a.length;b<c;b++)if(a[b].getName()==d)return!0;return!1})}return oa(b)?Da(a.a,function(a){return A(a.ra(),b)}):null}g.get=function(a){var b=this.a.length;if(0>a||a>=b)throw Error(a+" is not in range 0 to "+(b-1));ni(this);return this.a[a]};g.length=function(){return this.a.length};
function qi(a,b){if(!oa(b))throw Error("non-object passed to DisplayList.add");var c=b.$();ni(a);for(var d=a.a.length;0<d&&!(c>a.a[d-1].$());d--);Ma(a.a,d,0,b);R(a,new O(a,"OBJECT_ADDED",b))}g.remove=function(a){if(!oa(a))throw Error("non-object passed to DisplayList.remove");var b=xa(this.a,a);-1<b&&(Ha(this.a,b),R(this,new O(this,"OBJECT_REMOVED",a)))};
function ni(a){for(var b=!0,c=fc,d=0,e=a.a.length;d<e;d++){var f=a.a[d].$();if(f<c){b=!1;break}c=f}b||Qa(a.a,function(a,b){a=a.$();b=b.$();return a<b?-1:a>b?1:0})}var mi=1;function ri(a,b){S.call(this,b);this.a=a;a.contentEditable=!1;this.g=[];this.h=new ei;this.f=null;this.c=1;this.b="";this.D(new Q(this,si.ua,ti.ua,x(this.J,this),x(this.lf,this)));this.D(new Q(this,si.ta,ti.ta,x(this.K,this),x(this.kf,this)));this.D(new Q(this,si.ALPHA,ti.ALPHA,x(this.re,this),x(this.Ua,this)));this.D(new Nc(this,si.ab,ti.ab,x(this.ue,this),x(this.Ja,this)))}p(ri,S);g=ri.prototype;g.toString=function(){return""};g.fa=function(a){this.h.fa(a)};
function ui(a,b){if(0<a.J()&&0<a.K()){var c=new Dg(a.J(),a.K());vi(b,c)}a.g.push(b);a.fa(b);R(a,new O(a,"VIEW_ADDED",b));R(a,new O(a,"VIEW_LIST_MODIFIED"));if(null==a.f){if(null!=b&&!A(a.g,b))throw Error("cannot set focus to unknown view "+b);a.f!=b&&(a.f=b,R(a,new O(a,"FOCUS_VIEW_CHANGED",b)))}}g.re=function(){return this.c};g.ue=function(){return this.b};g.K=function(){return this.a.height};function wi(a){return new Dg(a.a.width,a.a.height)}g.J=function(){return this.a.width};g.la=function(){this.h.la()};
function xi(a){var b=wi(a);z(a.g,function(a){vi(a,b)});R(a,new O(a,"SIZE_CHANGED"))}function yi(a){if(null!=a.a.offsetParent){var b=a.a.getContext("2d");b.save();try{""!=a.b?(b.globalAlpha=a.c,b.fillStyle=a.b,b.fillRect(0,0,a.a.width,a.a.height),b.globalAlpha=1):b.clearRect(0,0,a.a.width,a.a.height),z(a.g,function(a){b.save();b.globalAlpha=a.C;oi(a.h,b,a.g);b.restore()})}finally{b.restore()}}}g.Ta=function(a){this.h.Ta(a)};
g.Ua=function(a){F(this.c,a)&&(this.c=a,F(a,1)&&""==this.b&&this.Ja("white"),T(this,si.ALPHA))};g.Ja=function(a){this.b!=a&&(this.b=a,T(this,si.ab))};g.kf=function(a){F(a,this.a.height)&&(this.a.height=a);xi(this);T(this,si.ta)};function zi(a,b,c){if(!v(b)||0>=b||!v(c)||0>=c)throw Error("bad size "+b+", "+c);a.a.width=b;a.a.height=c;xi(a);T(a,si.ua);T(a,si.ta)}g.lf=function(a){F(a,this.a.width)&&(this.a.width=a);xi(this);T(this,si.ua)};
var si={ua:"width",ta:"height",ALPHA:"alpha",ab:"background"},ti=si;function Ai(a){S.call(this,a||"CLOCK");this.j=this.h=Yb();this.b=1;this.f=this.c=0;this.g=this.a=!1;this.i=[];this.D(new Q(this,Bi.Ab,Ci.Ab,x(this.Ne,this),x(this.If,this)))}p(Ai,S);g=Ai.prototype;g.toString=function(){return""};function Di(a){z(a.i,function(a){a.cancel()})}function Ei(a,b,c){z(a.i,function(a){a.a()>=b&&a.a()<=b+c&&a.b(0)})}g.Hb=function(){return this.a?(Yb()-this.j)*this.b:this.f};function Fi(a){return a.a?(Yb()-a.h)*a.b:a.c}g.Ne=function(){return this.b};
function Gi(a){a.g=!1;a.a&&(a.c=Fi(a),a.f=a.Hb(),Di(a),a.a=!1,R(a,new O(a,"CLOCK_PAUSE")))}function Hi(a){a.g=!1;a.a||(a.a=!0,Ii(a,a.c),Ji(a,a.f),R(a,new O(a,"CLOCK_RESUME")))}g.wf=function(a){a.cancel();if(this.a){var b=Fi(this)/this.b+this.h;var c=a.a()/this.b+this.h;F(c,b)?c>b&&a.b(c-b):a.c()}};function Ji(a,b){a.a?a.j=Yb()-b/a.b:a.f=b}function Ki(a,b){var c=Fi(a);F(c,b,.001)&&(Ii(a,b),R(a,new O(a,"CLOCK_SET_TIME")))}function Ii(a,b){a.a?(a.h=Yb()-b/a.b,z(a.i,x(a.wf,a))):a.c=b}
g.If=function(a){if(F(this.b,a)){var b=Fi(this),c=this.Hb();this.b=a;Ii(this,b);Ji(this,c);Fi(this);this.Hb();T(this,Bi.Ab)}};var Bi={Ab:"time rate"},Ci=Bi;function Li(){this.i=!na(requestAnimationFrame);this.c=void 0;this.h=null;this.o=x(this.j,this);this.a=0;this.b=!1;this.g=G;this.f=0}Li.prototype.toString=function(){return""};Li.prototype.j=function(){if(null!=this.h){var a=Yb(),b=a-(this.g-this.f);b>=this.a&&(this.h(),this.g=a,this.f=0<this.a?b%this.a:0);this.c=this.i?setTimeout(this.o,0<this.a?Math.round(1E3*this.a):17):requestAnimationFrame(this.o)}};function Mi(a){a.b||(a.b=!0,a.f=0,a.g=Yb()-a.a-1E-7,a.j())}
function Ni(a){a.b=!1;r(a.c)&&(a.i?clearTimeout(a.c):cancelAnimationFrame(a.c),a.c=void 0);a.g=NaN;a.f=0};function Oi(a,b){S.call(this,b||"SIM_RUNNER");this.c=[a];this.f=a.s;this.i=0;this.g=!1;this.b=new Li;var c=this.i;if(0>c)throw Error();this.b.a=c;c=this.b;var d=x(this.me,this);Ni(c);c.h=d;this.a=new Ai((b?b+"_":"")+"CLOCK");a=a.a.Y();Ki(this.a,a);Ji(this.a,a);kc(this.a,this);this.h=[];this.o=new ei;this.j=[];this.D(Lc(new Q(this,Pi.Bb,Qi.Bb,x(this.Ue,this),x(this.Ve,this)),3));this.D(Lc(new Q(this,Pi.Wb,Qi.Wb,x(this.xe,this),x(this.zf,this)),3));this.D(new Hc(this,Pi.xb,Qi.xb,x(this.Ie,this),x(this.Ff,
this)));this.D(new Hc(this,Pi.Zb,Qi.Zb,x(this.Ae,this),x(this.Af,this)));this.D(new Hc(this,Pi.dc,Qi.dc,x(this.Fe,this),x(this.Df,this)))}p(Oi,S);g=Oi.prototype;g.toString=function(){return""};function Ri(a,b){A(a.h,b)||(a.h.push(b),a.fa(b))}function Si(a,b){A(a.j,b)||a.j.push(b)}g.fa=function(a){this.o.fa(a)};
g.me=function(){try{if(this.a.a||this.a.g){var a=Fi(this.a),b=this.c[0].a.Y();if(a>b+1||a<b-1){var c=b+this.f;Ki(this.a,c);Ji(this.a,c);a=c}c=a;for(var d=0,e=this.c.length;d<e;d++)for(var f=this.c[d],h=c,l=f.a.Y();l<h;){Od(f,this.f,this);var k=l;l=f.a.Y();if(1E-15>=l-k)throw Error("SimRunner: time did not advance");if(h-l<this.f)break}this.a.g?this.a.g=!1:(a=Fi(this.a),b=this.c[0].a.Y(),a-b>20*this.f&&Ki(this.a,b))}Ti(this)}catch(m){Ui(this,m)}};g.xe=function(){return this.i};g.Ae=function(){return this.b.b};
g.Fe=function(){return this.g};g.Ie=function(){return this.a.a};g.Ue=function(){return this.f};function Ui(a,b){Vi(a);Ni(a.b);z(a.j,function(a){a.c&&Wi(a)});alert(Qi.de+(null!=b?" "+b:""))}g.la=function(){this.o.la()};g.X=function(a){a.W()==this.a&&(a.I("CLOCK_RESUME")||a.I("CLOCK_PAUSE")?(a=this.c[0].a.Y(),Ki(this.a,a),Ji(this.a,a),T(this,Pi.xb)):a.I("CLOCK_SET_TIME")&&this.la())};function Ti(a){z(a.h,function(a){yi(a)})}function Vi(a){Gi(a.a);return Fi(a.a)}g.Ta=function(a){this.o.Ta(a)};
g.reset=function(){Mi(this.b);Gi(this.a);z(this.c,function(a){a.reset()});var a=this.c[0].a.Y();Ki(this.a,a);Ji(this.a,a);Ti(this);R(this,new O(this,"RESET"));return Fi(this.a)};function Xi(a){Mi(a.b);Hi(a.a);return Fi(a.a)}function Yi(a){z(a.c,function(a){dg(a.a)});return Fi(a.a)}g.zf=function(a){this.i=a;if(0>a)throw Error();this.b.a=a;T(this,Pi.Wb)};g.Af=function(a){a?Mi(this.b):this.g||Ni(this.b);T(this,Pi.Zb)};g.Df=function(a){this.g=a;T(this,Pi.dc)};g.Ff=function(a){a?Xi(this):Vi(this)};
g.Ve=function(a){this.f=a;T(this,Pi.Bb)};g.td=function(){var a=this.c[0].a.Y()+this.f-Fi(this.a),b=this.a;Gi(b);b.g=!0;var c=b.c;b.c+=a;b.f+=a;R(b,new O(b,"CLOCK_STEP"));Ei(b,c,a);Mi(this.b);return Fi(this.a)};var Pi={Bb:"time step",Wb:"display period",$d:"restart",xb:"running",Zb:"firing",Wf:"pause",Xf:"resume",dc:"non-stop",ce:"step",de:"Simulation is stuck; click reset and play to continue."},Qi=Pi;function Zi(a,b){S.call(this,a);if(!(b instanceof N)||b.sa())throw Error("bad simRect: "+b);this.c=b;this.f=new Dg(800,600);this.B=this.u="MIDDLE";this.s=1;this.h=new li;this.o=!0;this.C=1;this.g=Jg(this.f,this.c,this.u,this.B,this.s);this.b=b.J();this.a=b.K();this.i=Ac(b);this.j=Bc(b);this.w=this.a/this.b;this.A=new ei;this.D(new Q(this,Y.ua,$i.ua,x(this.J,this),x(this.pf,this)));this.D(new Q(this,Y.ta,$i.ta,x(this.K,this),x(this.Ac,this)));this.D(Kc(new Q(this,Y.nb,$i.nb,x(this.mf,this),x(this.Pb,
this)),Number.NEGATIVE_INFINITY));this.D(Kc(new Q(this,Y.ob,$i.ob,x(this.nf,this),x(this.Bc,this)),Number.NEGATIVE_INFINITY));this.D(new Hc(this,Y.hc,$i.hc,x(this.Je,this),x(this.Fd,this)));this.D(new Nc(this,Y.mc,$i.mc,x(this.Pe,this),x(function(a){aj(this,Gg(a))},this),[Hg.fe,Hg.cc,Hg.Kd,Hg.$b,Hg.kc],Fg()));this.D(new Nc(this,Y.bc,$i.bc,x(this.Ce,this),x(function(a){bj(this,Bg(a))},this),[Cg.Pd,Cg.cc,Cg.ae,Cg.$b,Cg.kc],Ag()));this.D(new Q(this,Y.Sb,$i.Sb,x(this.se,this),x(this.xf,this)))}p(Zi,S);
g=Zi.prototype;g.toString=function(){return""};g.fa=function(a){this.A.fa(a)};g.se=function(){return this.s};g.mf=function(){return this.i};g.nf=function(){return this.j};g.K=function(){return this.a};g.Ce=function(){return this.u};g.Je=function(){return this.o};g.Pe=function(){return this.B};g.J=function(){return this.b};g.la=function(){this.A.la()};function cj(a){var b=a.i-a.b/2,c=a.j-a.a/2;b=new N(b,c,b+a.b,c+a.a);dj(a,b)}g.sf=function(){this.Bc(this.j-.05*this.a)};
g.tf=function(){this.Pb(this.i-.05*this.b)};g.uf=function(){this.Pb(this.i+.05*this.b)};g.vf=function(){this.Bc(this.j+.05*this.a)};function ej(a){var b=Jg(a.f,a.c,a.u,a.B,a.s);if(!(b instanceof Ig))throw Error("not a CoordMap: "+b);a.g=b;R(a,new O(a,"COORD_MAP_CHANGED"));a.b=a.c.J();a.a=a.c.K();a.i=Ac(a.c);a.j=Bc(a.c);a.w=a.a/a.b}g.Ta=function(a){this.A.Ta(a)};g.xf=function(a){F(this.s,a)&&(this.s=a,ej(this),T(this,Y.Sb))};g.Pb=function(a){F(this.i,a)&&(this.i=a,cj(this))};
g.Bc=function(a){F(this.j,a)&&(this.j=a,cj(this))};g.Ac=function(a){F(this.a,a)&&(this.a=a,this.o&&(this.b=this.a/this.w),cj(this))};function bj(a,b){a.u=Bg(b);ej(a);T(a,Y.bc)}g.Fd=function(a){if(this.o!=a){if(this.o=a)this.w=this.a/this.b;T(this,Y.hc)}};function vi(a,b){if(!(b instanceof Dg))throw Error("not a ScreenRect: "+b);if(b.sa())throw Error("empty screenrect");a.f.Na(b)||(a.f=b,ej(a),R(a,new O(a,"SCREEN_RECT_CHANGED")))}
function dj(a,b){if(!(b instanceof N))throw Error("not a DoubleRect: "+b);b.Na(a.c)||(a.c=b,ej(a),T(a,Y.ua),T(a,Y.ta),T(a,Y.nb),T(a,Y.ob),R(a,new O(a,"SIM_RECT_CHANGED")))}function aj(a,b){a.B=Gg(b);ej(a);T(a,Y.mc)}g.pf=function(a){F(this.b,a)&&(this.b=a,this.o&&(this.a=this.b*this.w),cj(this))};g.Qf=function(){this.Ac(this.a/1.1)};g.Rf=function(){this.Ac(1.1*this.a)};
var Y={hc:"scale X-Y together",ua:"width",ta:"height",nb:"center-x",ob:"center-y",mc:"vertical-align",bc:"horizontal-align",Sb:"aspect-ratio"},$i=Y;function fj(a,b,c){this.b=a;this.c=this.b.G();this.g=b;this.f=c;this.a=document.createElement("button");this.a.type="button";this.a.className="icon";c.style.display=this.c?"block":"none";b.style.display=this.c?"none":"block";this.a.appendChild(b);this.a.appendChild(c);C(this.a,"click",this.h,!0,this);kc(this.b.W(),this)}fj.prototype.toString=function(){return""};fj.prototype.Z=function(){return this.a};fj.prototype.h=function(){gj(this,!this.c)};fj.prototype.X=function(a){a==this.b&&gj(this,this.b.G())};
function gj(a,b){a.c!=b&&(a.b.$a(b),a.c=b,a.f.style.display=b?"block":"none",a.g.style.display=b?"none":"block")};function hj(a,b){var c=new th(a.c);b&&(vh(c),wh(c));new ci(a,function(b){b.I("COORD_MAP_CHANGED")&&(b=Lg(a.g,a.f),c.a=b)});a.h.add(c);return c}
function ij(a){var b=[jj.Eb,jj.mb,jj.ed,jj.Ic,jj.dd,jj.Hc],c=[kj.Eb,kj.mb,kj.ed,kj.Ic,kj.dd,kj.Hc];c=Aa(c,function(a){return E(a)});b=new gc(b,c,function(){var b=a.b,e=a.c;if(""==b)return c[0];if("black"==b)if(F(e,1)){if(!F(e,.1))return c[3];if(!F(e,.05))return c[5]}else return c[1];else if("white"==b)if(F(e,1)){if(!F(e,.1))return c[2];if(!F(e,.05))return c[4]}else return c[0];return-1},function(b){switch(xa(c,b)){case 0:a.Ja("");a.Ua(1);break;case 1:a.Ja("black");a.Ua(1);break;case 2:a.Ja("white");
a.Ua(.1);break;case 3:a.Ja("black");a.Ua(.1);break;case 4:a.Ja("white");a.Ua(.05);break;case 5:a.Ja("black"),a.Ua(.05)}},jj.ab);kc(a,b);return b}
function lj(a,b){var c=Xb+"/",d=document.createElement("div");d.style.width="96px";var e=Qb(c+"up_gray.png");e=new sh("up",x(a.vf,a),e);e.a=100;d.appendChild(e.Z());var f=document.createElement("div");f.style.width=d.style.width;e=Qb(c+"backward_gray.png");e=new sh("left",x(a.tf,a),e);e.a=100;f.appendChild(e.Z());e=Qb(c+"target_gray.png");e=new sh("reset",b,e);f.appendChild(e.Z());e=Qb(c+"forward_gray.png");e=new sh("right",x(a.uf,a),e);e.a=100;f.appendChild(e.Z());var h=document.createElement("div");
e=Qb(c+"down_gray.png");e=new sh("down",x(a.sf,a),e);e.a=100;h.appendChild(e.Z());h.style.width=d.style.width;b=document.createElement("div");b.appendChild(d);b.appendChild(f);b.appendChild(h);b.style.textAlign="center";d=document.createElement("div");e=Qb(c+"plus_gray.png");e=new sh("zoomIn",x(a.Qf,a),e);e.a=100;d.appendChild(e.Z());d.appendChild(document.createElement("BR"));e=Qb(c+"minus_gray.png");e=new sh("zoomOut",x(a.Rf,a),e);e.a=100;d.appendChild(e.Z());d.style.cssFloat="right";d.style.marginTop=
"18px";a=document.createElement("div");a.style.position="absolute";a.style.right="10%";a.style.bottom="12%";a.style.width="126px";a.appendChild(d);a.appendChild(b);a.style.display="none";return a}
function mj(a){var b=Xb+"/",c=document.createElement("div");c.style.display="block";var d=Qb(b+"rewind.png");d=new sh(Qi.$d,x(a.reset,a),d);c.appendChild(d.Z());d=Qb(b+"forward.png");var e=Qb(b+"pause.png");d=new fj(Qc(a,Pi.xb),d,e);c.appendChild(d.Z());d=Qb(b+"next.png");a=new sh(Qi.ce,x(a.td,a),d);a.a=100;c.appendChild(a.Z());return new di(c)}
function nj(a,b,c,d){a=new Ph(a,b);Rh(a,"reset",function(){return c.reset()},"sets simulation to initial conditions");Rh(a,"save",function(){return Yi(c)},"saves simulation initial conditions");Rh(a,"step",function(){return c.td()},"advance simulation by a small time increment");Rh(a,"pause",function(){return Vi(c)},"pause simulation");Rh(a,"resume",function(){return Xi(c)},"resume simulation");return d.h=a}
function oj(a,b,c){var d=b.h;b=new Hc(c,zh.yb,zh.yb,x(d.Bd,d,a),function(b){b?d.add(a):d.remove(a);T(c,zh.yb)});c.D(b);new ci(d,function(b){b.G()==a&&T(c,zh.yb)});return b}function pj(a,b,c){var d=u(void 0)?void 0:bi.Rc,e=u(void 0)?void 0:Yh.Rc,f=Lg(b.g,b.f);ai(a,f);var h=b.h;b=new Hc(c,d,e,x(h.Bd,h,a),function(b){b?h.add(a):h.remove(a);T(c,d)});c.D(b);new ci(h,function(b){b.G()==a&&T(c,d)});return b}
function qj(a,b){var c=new Hc(b,kj.ec,jj.ec,function(){return"none"!=a.style.display},function(c){a.style.display=c?"block":"none";T(b,kj.ec)});b.D(c);return c}function rj(a,b){if(!r(a))throw Error();return new sh(Wh.ge,function(){var c=Sh(a),d=Wh.Xd;2048<c.length&&(d=d+"  "+Wh.ie);var e=b.b.b;e&&(b.g||Ni(b.b));window.prompt(d,c);e&&Mi(b.b)})}
var kj={ec:"pan-zoom",ab:"background",Eb:"white",mb:"black",ed:"white with trails",Ic:"black with trails",dd:"white with long trails",Hc:"black with long trails"},jj=kj;function sj(a){this.c=a||3E3;if(2>this.c)throw Error();this.b=this.g=this.a=0;this.h=-1;this.f=Array(this.c)}sj.prototype.toString=function(){return""};function tj(a){return 0==a.a?-1:0==a.b?uj(a,a.a-1):uj(a,a.b-1)}function vj(a){var b=tj(a);return-1==b?null:a.f[wj(a,b)]}sj.prototype.G=function(a){return this.f[wj(this,a)]};function wj(a,b){return a.a<a.c?b:b-(a.g-(b%a.c<a.b?0:1))*a.c}
function uj(a,b){if(a.a<a.c)return b;a=b+(a.g-(b<a.b?0:1))*a.c;if(a>=ec)throw Error("exceeded max int");return a}sj.prototype.reset=function(){this.g=this.b=this.a=0;this.h=-1};sj.prototype.store=function(a){this.h=this.b;this.f[this.b]=a;this.b++;this.a<this.c&&this.a++;this.b>=this.c&&(this.g++,this.b=0);return uj(this,this.h)};
function xj(a,b){this.c=0<a.a;this.a=a;if(void 0===b||0>b)b=a.a<a.c?0:uj(a,a.b);if(0<a.a&&(b<(a.a<a.c?0:uj(a,a.b))||b>tj(a)))throw Error("out of range startIndex="+b);this.b=b;this.f=wj(a,b)}function yj(a){if(0==a.a.a)throw Error("no data");return a.b}xj.prototype.G=function(){if(0==this.a.a)throw Error("no data");return this.a.f[this.f]};function zj(a){return a.c||a.b<tj(a.a)}
function Aj(a){if(0===a.a.a)throw Error("no data");if(a.c)a.c=!1;else{if(a.b+1>tj(a.a))throw Error("cannot iterate past end of list");a.b++;a.f=wj(a.a,a.b)}return a.a.f[a.f]};function Bj(a){for(var b=["dots","lines"],c=0,d=b.length;c<d;c++)if(a==b[c])return b[c];throw Error("not found "+a);}var Cj={Ld:"Dots",LINES:"Lines"};function Dj(a,b,c,d){this.a=a;this.b=b;this.c=c;this.f=d}g=Dj.prototype;g.toString=function(){return""};g.Na=function(a){return this.a==a.a&&this.b==a.b&&this.c==a.c&&this.f==a.f};g.m=function(){return this.a};g.l=function(){return this.b};g.da=function(){return 0};function Ej(a,b,c,d){this.f=a;this.c=b;this.a=c;this.b=d}Ej.prototype.toString=function(){return""};function Fj(a,b,c){S.call(this,a);this.b=b;kc(b,this);this.f=this.a=-1;this.s=Kc(new Q(this,Z.va,Gj.va,x(this.Re,this),x(this.ya,this)),-1);this.D(this.s);this.o=Kc(new Q(this,Z.za,Gj.za,x(this.Qe,this),x(this.La,this)),-1);this.D(this.o);Hj(this);this.c=new sj(c||1E5);this.h="lime";this.i="lines";this.g=1;this.j=[];Ij(this);this.u=function(a){return a};this.w=function(a){return a};this.D(new Q(this,Z.LINE_WIDTH,Gj.LINE_WIDTH,x(this.Ee,this),x(this.Cf,this)));this.D(new Nc(this,Z.rb,Gj.rb,x(this.ye,
this),x(function(a){a=Bj(a);a=Bj(a);this.i!=a&&(this.i=a,Ij(this));T(this,Z.rb)},this),[Cj.Ld,Cj.LINES],["dots","lines"]));this.D(new Nc(this,Z.sb,Gj.sb,x(this.af,this),x(this.ja,this)))}p(Fj,S);g=Fj.prototype;g.toString=function(){return""};function Ij(a){a.j.push(new Ej(tj(a.c)+1,a.i,a.h,a.g))}function Hj(a){for(var b=[Gj.NONE],c=[-1],d=0,e=a.b.a.length;d<e;d++)b.push(Ad(a.b,d).getName(!0)),c.push(d);Ic(a.s,b,c);Ic(a.o,b,c)}function Jj(a){return a instanceof Fj?!0:!1}g.af=function(){return this.h};
g.ye=function(){return this.i};function Kj(a,b){a=a.j;if(0==a.length)throw Error("graph styles list is empty");for(var c=a[0],d=1,e=a.length;d<e;d++){var f=a[d];if(f.f>b)break;c=f}return c}g.Ee=function(){return this.g};g.S=function(){return this.b};g.Qe=function(){return this.a};g.Re=function(){return this.f};g.la=function(){if(-1<this.a&&-1<this.f){var a=Ad(this.b,this.a),b=Ad(this.b,this.f),c=a.G(),d=b.G();a=new Dj(this.u(c),this.w(d),a.b,b.b);b=vj(this.c);null!=b&&b.Na(a)||this.c.store(a)}};
g.X=function(a){a.W()==this.b&&a.I("VARS_MODIFIED")&&Hj(this)};g.reset=function(){this.c.reset();this.j=[];Ij(this);R(this,new O(this,"RESET"))};g.ja=function(a){this.h!=a&&(this.h=a,Ij(this),T(this,Z.sb))};g.Cf=function(a){F(a,this.g)&&(this.g=a,Ij(this),T(this,Z.LINE_WIDTH))};g.La=function(a){if(-1>a||a>this.b.a.length-1)throw Error("setXVariable bad index "+a);a!=this.a&&(this.a=a,this.reset(),T(this,Z.za))};
g.ya=function(a){if(-1>a||a>this.b.a.length-1)throw Error("setYVariable bad index "+a);a!=this.f&&(this.f=a,this.reset(),T(this,Z.va))};var Z={rb:"draw mode",sb:"graph color",Uf:"graph draw mode",Vf:"graph points",LINE_WIDTH:"draw width",za:"X variable",va:"Y variable",Jc:"clear graph",NONE:"-none-"},Gj=Z;function Lj(a,b,c){S.call(this,a);if(r(b)&&!Jj(b))throw Error("not a GraphLine "+b);this.i=[];Jj(b)&&(this.i.push(b),kc(b,this));this.s=c;c.fa(this);kc(c,this);this.j=this.w=!0;this.B=!1;this.u="BOTH_AXES";this.o=Ta(this.i.length);this.C=this.A=!1;this.g=this.b=this.f=this.a=0;this.c=10;this.h=.01;this.D(Lc(new Q(this,Mj.Cb,Nj.Cb,x(this.Oe,this),x(this.Jf,this)),3));a=["VERTICAL","HORIZONTAL","BOTH_AXES"];this.D(new Nc(this,Mj.Tb,Nj.Tb,x(this.te,this),x(this.yf,this),a,a));this.D(new Hc(this,Mj.lb,
Nj.lb,x(this.qe,this),x(this.Fa,this)));this.D(new Hc(this,Mj.Yb,Nj.Yb,x(this.ze,this),x(this.$e,this)));Oj(this,this.j)}p(Lj,S);g=Lj.prototype;g.toString=function(){return""};function Pj(a,b){if(Jj(b))A(a.i,b)||(a.i.push(b),a.o.push(-1));else throw Error("not a GraphLine "+b);}g.qe=function(){return this.j};g.te=function(){return this.u};g.ze=function(){return this.w};g.Oe=function(){return this.c};
g.la=function(){for(var a=0,b=this.i.length;a<b;a++){var c=this.i[a].c;this.o[a]>tj(c)&&this.reset()}a=0;for(b=this.i.length;a<b;a++)for(c=this.i[a].c,c=new xj(c,this.o[a]);zj(c);){var d=Aj(c),e=this.i[a],f=d.a;d=d.b;isFinite(f)||(f==Number.POSITIVE_INFINITY?f=1E308:f==Number.NEGATIVE_INFINITY&&(f=-1E308));isFinite(d)||(d==Number.POSITIVE_INFINITY?d=1E308:d==Number.NEGATIVE_INFINITY&&(d=-1E308));var h=e.S().b,l=e.a==h;e=e.f==h;this.A?(f<this.f&&(l?(this.f=f,this.a=f+this.c):this.f=f-this.h*(this.a-
this.f)),l?f>this.a-this.h*this.c&&(this.a=f+this.h*this.c,this.f=this.a-this.c):f>this.a&&(this.a=f+this.h*(this.a-this.f))):(this.f=f,this.a=f+(l?this.c:0),this.A=!0);this.C?(d<this.g&&(e?(this.g=d,this.b=d+this.c):this.g=d-this.h*(this.b-this.g)),e?d>this.b-this.h*this.c&&(this.b=d+this.h*this.c,this.g=this.b-this.c):d>this.b&&(this.b=d+this.h*(this.b-this.g))):(this.g=d,this.b=d+(e?this.c:0),this.C=!0);this.o[a]=yj(c)}1E-14>this.a-this.f&&(a=(this.a+this.f)/2,b=Math.max(1E-14*a,1E-14),this.a=
a+b,this.f=a-b);1E-14>this.b-this.g&&(a=(this.b+this.g)/2,b=Math.max(1E-14*a,1E-14),this.b=a+b,this.g=a-b);a=new N(this.f,this.g,this.a,this.b);b=this.s.c;"VERTICAL"==this.u?a=new N(b.ga(),a.b,b.a,a.aa()):"HORIZONTAL"==this.u&&(a=new N(a.ga(),b.b,a.a,b.aa()));this.j&&!a.na(b)&&(this.B=!0,dj(this.s,a),this.B=!1,R(this,new O(this,"AUTO_SCALE",a)))};g.X=function(a){a.W()==this.s?a.I("SIM_RECT_CHANGED")&&(this.B||this.Fa(!1)):A(this.i,a.W())&&(a.I(Z.za)||a.I(Z.va)?this.reset():a.I("RESET")&&this.Fa(!0))};
g.reset=function(){this.a=this.f=0;this.A=!1;this.b=this.g=0;this.C=!1;for(var a=0,b=this.o.length;a<b;a++)this.o[a]=-1};g.Fa=function(a){this.j!=a&&(a?this.w&&(this.reset(),this.s.fa(this),Oj(this,!0),this.j=!0,T(this,Mj.lb)):(this.s.Ta(this),Oj(this,!1),this.j=!1,T(this,Mj.lb)))};g.yf=function(a){if("VERTICAL"==a||"HORIZONTAL"==a||"BOTH_AXES"==a)this.u=a,T(this,Mj.Tb);else throw Error("unknown "+a);};function Oj(a,b){z([Y.ua,Y.ta,Y.nb,Y.ob],x(function(a){this.s.Nb(a).hb(b)},a))}
g.$e=function(a){this.w!=a&&(this.w=a,this.Fa(a),T(this,Mj.Yb))};g.Jf=function(a){F(a,this.c)&&(this.c=a,this.reset(),this.Fa(!0),T(this,Mj.Cb))};var Mj={Tb:"axis",Cb:"time window",lb:"active",Yb:"enabled"},Nj=Mj;var Qj=cb||bb||fb;function Rj(a,b){this.width=a;this.height=b}g=Rj.prototype;g.le=function(){return this.width*this.height};g.aspectRatio=function(){return this.width/this.height};g.sa=function(){return!this.le()};g.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};g.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
g.scale=function(a,b){b=v(b)?b:a;this.width*=a;this.height*=b;return this};function Sj(){var a=window.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Rj(a.clientWidth,a.clientHeight)}function Tj(a){var b;if(Qj&&!(cb&&mb("9")&&!mb("10")&&ia.SVGElement&&a instanceof ia.SVGElement)&&(b=a.parentElement))return b;b=a.parentNode;return oa(b)&&1==b.nodeType?b:null};function Uj(a,b,c,d){this.g=a;this.a=b;this.h=c;this.c=b();a=null;oa(d)?(b=Tj(d),null!=b&&"LABEL"==b.tagName&&(a=b)):(d=document.createElement("input"),d.type="checkbox",a=document.createElement("LABEL"),a.appendChild(d),a.appendChild(document.createTextNode(this.g)));this.b=d;this.b.checked=this.c;this.i=null!==a?a:this.b;C(this.b,"change",this.j,!0,this)}Uj.prototype.toString=function(){return""};Uj.prototype.Z=function(){return this.i};Uj.prototype.j=function(){Vj(this,!this.a())};
Uj.prototype.X=function(){Vj(this,this.a())};function Vj(a,b){a.a()!=b&&a.h(b);a.c!=a.a()&&(a.c=a.a(),a.b.checked=a.c)};function Wj(a,b){Uj.call(this,a.getName(!0),x(a.G,a),x(a.$a,a),b);this.f=a;kc(this.f.W(),this)}p(Wj,Uj);Wj.prototype.toString=function(){return""};Wj.prototype.X=function(a){a==this.f&&Uj.prototype.X.call(this,a)};function Xj(a,b,c){this.a=a;this.c=b;this.f=c}Xj.prototype.toString=function(){return""};Xj.prototype.getName=function(a){return a?Yj.pa+"-"+this.f.getName(!0):E(Zj.pa)+"_"+this.f.getName(!1)};Xj.prototype.I=function(a){return this.getName()==E(a)};
Xj.prototype.b=function(a){Ud(this.a);var b=this.a.Y(),c=a,d;this.a.ha();var e=Vf(jg(this.c)),f=I,h=I,l=!0;if(1E-15>a)return null;do{var k=b;if(!l&&(Xd(this.a),this.a.ha(),jg(this.c),c/=5,1E-15>c))throw Error("time step too small "+c);for(d=0;k<b+a;){var m=c;k+m>b+a-1E-10&&(m=b+a-k);d++;var n=this.f.b(m);this.a.ha();if(null!=n)return n;k+=m}d=Vf(jg(this.c));d=Math.abs(e-d);l||(h=Math.abs(d-f));f=d;l=!1}while(1E-6<h);return null};var Zj={pa:"Adaptive Step"},Yj=Zj;function ak(a){this.f=a;this.a=[];this.c=[]}ak.prototype.toString=function(){return""};ak.prototype.getName=function(a){return a?bk.pa:E(ck.pa)};ak.prototype.I=function(a){return this.getName()==E(a)};ak.prototype.b=function(a){var b,c=this.f.S(),d=zd(c),e=d.length;this.a.length!=e&&(this.a=Array(e),this.c=Array(e));var f=this.a,h=this.c;for(b=0;b<e;b++)f[b]=d[b];dc(h);b=Md(this.f,f,h);if(null!==b)return b;for(b=0;b<e;b++)d[b]+=h[b]*a;Cd(c,d,!0);return null};var ck={pa:"Eulers Method"},bk=ck;function dk(a){this.c=a;this.a=[];this.f=[];this.g=[]}dk.prototype.toString=function(){return""};dk.prototype.getName=function(a){return a?ek.pa:E(fk.pa)};dk.prototype.I=function(a){return this.getName()==E(a)};
dk.prototype.b=function(a){var b,c=this.c.S(),d=zd(c),e=d.length;this.a.length!=e&&(this.a=Array(e),this.f=Array(e),this.g=Array(e));var f=this.a,h=this.f,l=this.g;for(b=0;b<e;b++)f[b]=d[b];dc(h);b=Md(this.c,f,h);if(null!==b)return b;for(b=0;b<e;b++)f[b]=d[b]+h[b]*a;dc(l);b=Md(this.c,f,l);if(null!==b)return b;for(b=0;b<e;b++)d[b]+=(h[b]+l[b])*a/2;Cd(c,d,!0);return null};var fk={pa:"Modified Euler"},ek=fk;function gk(a,b,c,d){S.call(this,d||"DIFF_EQ_SUBJECT");this.b=a;this.f=b;this.c=c;this.a=[];this.a.push(new ak(this.b));this.a.push(new dk(this.b));this.a.push(new Jd(this.b));null!=this.f&&(a=new Xj(this.b,this.f,new dk(this.b)),this.a.push(a),a=new Xj(this.b,this.f,new Jd(this.b)),this.a.push(a));a=Aa(this.a,function(a){return a.getName(!0)});b=Aa(this.a,function(a){return a.getName()});this.D(new Nc(this,hk.qb,ik.qb,x(this.g,this),x(this.h,this),a,b))}p(gk,S);gk.prototype.toString=function(){return""};
gk.prototype.g=function(){return this.c.o.getName()};gk.prototype.h=function(a){if(!this.c.o.I(a)){var b=Da(this.a,function(b){return b.I(a)});if(null!=b)this.c.o=b,T(this,hk.qb);else throw Error("unknown solver: "+a);}};var hk={qb:"Diff Eq Solver"},ik=hk;function jk(a){S.call(this,"ELASTICITY_SETTER");this.b=a;this.a=0;kc(a,this);this.D(Mc(Lc(new Q(this,kk.bb,lk.bb,x(this.c,this),x(this.f,this)),3)))}p(jk,S);jk.prototype.toString=function(){return""};jk.prototype.c=function(){return this.a=mk(this)};function mk(a){var b=B(a.b.a);return 0==b.length?a.a:Ba(b,function(a,b){return Math.min(a,b.g)},1)}jk.prototype.f=function(a){z(B(this.b.a),function(b){b.g=a});this.a=a;T(this,kk.bb)};
jk.prototype.X=function(a){a.W()==this.b&&a.I("ELASTICITY_SET")&&(a=mk(this),this.a!=a&&(this.a=a,T(this,kk.bb)))};var kk={bb:"elasticity"},lk=kk;function nk(a,b,c,d){this.s=a;this.o=b;this.v=c;this.a=b();if(!v(this.a))throw Error("not a number "+this.a);this.c=3;this.f=-1;this.g=Math.max(8,1+this.c);a=null;oa(d)?(b=Tj(d),null!=b&&"LABEL"==b.tagName&&(a=b)):(d=document.createElement("input"),d.type="text",d.size=this.g,a=document.createElement("LABEL"),a.appendChild(document.createTextNode(this.s)),a.appendChild(d));this.b=d;this.u=null!==a?a:this.b;this.j="";this.b.b="right";C(this.b,"change",this.Pf,!0,this);C(this.b,"focus",this.Xe,!1,this);
C(this.b,"click",this.pe,!1,this);this.i=!1;ok(this)}g=nk.prototype;g.toString=function(){return""};function pk(a,b,c){if(-1<a.f)return a.f;a=c-1-qk(b);16<a&&(a=16);return 0<a?a:0}g.pe=function(){this.i&&(this.b.select(),this.i=!1)};function ok(a){var b=a.a;var c=qk(b);b=2+pk(a,b,a.c)+(0<c?c:0);a.j=a.a.toFixed(pk(a,a.a,a.c));a.b.value=a.j;b!=a.g&&(a.g=b,a.b.size=a.g)}g.Xe=function(){this.i=!0};g.Z=function(){return this.u};g.G=function(){return this.a};
function qk(a){return 1E-15>Math.abs(a)?0:Math.floor(Math.LOG10E*Math.log(Math.abs(a)))}g.X=function(){rk(this,this.o())};function rk(a,b){if(b!=a.a){try{if(isNaN(b))throw Error("not a number "+b);a.a=b;a.v(b)}catch(c){alert(c),a.a=a.o()}ok(a)}}g.Pf=function(){var a=this.b.value.replace(/^\s*|\s*$/g,"");if(a!=this.j){var b=parseFloat(a);isNaN(b)?(alert("not a number: "+a),ok(this)):rk(this,b)}};function sk(a,b){nk.call(this,a.getName(!0),x(a.G,a),x(a.Ad,a),b);this.h=a;b=a.g;this.c!=b&&(this.c=b,ok(this));a=a.f;this.f!=a&&(this.f=-1<a?a:-1,ok(this));kc(this.h.W(),this)}p(sk,nk);sk.prototype.toString=function(){return""};sk.prototype.X=function(a){a==this.h&&(nk.prototype.X.call(this,a),a=this.h.g,this.c!=a&&(this.c=a,ok(this)),a=this.h.f,this.f!=a&&(this.f=-1<a?a:-1,ok(this)))};function tk(a,b){this.a=a;this.g=b;this.c=null;this.h=pd(1,"mouse position").Va(I);this.b=-1;this.f=!1;this.i=this.j=0}tk.prototype.toString=function(){return""};function uk(a,b,c){if(!a.g.a&&-1<a.b){var d=fg(a.a,a.b);a.f?d.H(d.b,a.i+Math.atan2(b.l()-d.b.l(),b.m()-d.b.m())-a.j):d.H(L(b,c));eg(a.a,d)}else a.h.H(b)}function vk(a){var b=a.c;null!=b&&(a.a.Dd(b),a.a.b.remove(b),a.c=null);a.b=-1}var wk={Sf:"click",Kc:"drag"};function xk(){}g=xk.prototype;g.toString=function(){return""};g.Ga=function(){return!1};g.Ha=function(){};g.Ba=function(){return!1};g.Aa=function(){return[]};g.Ia=function(){return M};g.ra=function(){return[]};g.$=function(){return void 0!==this.a?this.a:10};g.ja=function(){return this};g.xa=function(){};function yk(a){var b=new xk;b.b=a;return b}g.ka=function(a){this.a=a};function zk(a,b){this.b=null!=a?a:new Gc("proto");this.a=null!=b?b:null}g=zk.prototype;g.toString=function(){return""};g.Ga=function(){return!1};g.Ha=function(a,b){if(0<Bk(this)){var c=Mg(b,this.b.R());b=Mg(b,this.b.ca());if(!(1E-6>oc(c,b))){a.save();var d=Ck(this);0<d.length&&a.setLineDash&&a.setLineDash(d);a.lineWidth=Bk(this);a.strokeStyle=Dk(this);a.beginPath();a.moveTo(c.m(),c.l());a.lineTo(b.m(),b.l());a.stroke();a.restore()}}};
function Dk(a){return void 0!==a.c?a.c:null!=a.a?Dk(a.a):"gray"}function Ck(a){return void 0!==a.h?a.h:null!=a.a?Ck(a.a):[]}g.Aa=function(){return[]};g.Ia=function(){return uc(this.b.R().add(this.b.ca()),.5)};g.ra=function(){return[this.b]};function Bk(a){return void 0!==a.f?a.f:null!=a.a?Bk(a.a):4}g.$=function(){return void 0!==this.g?this.g:null!=this.a?this.a.$():0};g.Ba=function(){return!1};g.ja=function(a){this.c=a;return this};g.xa=function(){};function Ek(a){var b=new zk;b.f=a;return b}
g.ka=function(a){this.g=a};function Fk(a,b){this.a=b;this.j=a;b=B(a.a);z(b,x(this.c,this));kc(a,this);this.b=[];this.i=Ek(1).ja("blue");this.i.ka(10);this.g=Ek(1).ja("red");this.g.ka(10);this.A=Ek(2).ja("magenta");this.o=Ek(8);a=ki(3);a.c=.75;this.F=a;a=ki(2);a.c=.5;this.s=a;this.B=new Pg;a=dh(new Pg,"");a.i="red";this.f=a;this.f.ka(10);this.w=new Pg;this.h=dh(dh(new Pg,""),"lightGray");this.h.ka(-1);this.v=yk(2).ja("blue");this.v.ka(10);this.u=yk(3).ja("red");this.u.ka(10)}Fk.prototype.toString=function(){return""};
function Gk(a,b,c){"over"==Hk?a.a.add(b):qi(a.a,b);a.b.push({Lf:c,oe:b})}
Fk.prototype.c=function(a){if(null==pi(this.a,a))if(a instanceof rf){var b=a;isFinite(b.a)?Gk(this,new Pg(b,this.B),a):Gk(this,new Pg(b,this.h),a)}else a instanceof He?null==a.getName().match(/^IMPULSE2/)&&null!=a.getName().match(/^IMPULSE1/)&&(b=pd(Math.max(.02,Math.abs(2*Math.sqrt(Math.abs(5*a.a)/Math.PI))),a.getName()).Va(0),b.H(a.R()),Gk(this,new Pg(b,this.f),a)):a instanceof qd?null==a.getName().match(/^CONTACT_FORCE2/)&&(null!=a.getName().match(/^CONTACT_FORCE1/)?Gk(this,new zk(a,this.g),a):
null!=a.getName().match(/^THRUSTER/)?Gk(this,new zk(a,this.A),a):Gk(this,new zk(a,this.i),a)):a instanceof ld?Gk(this,new Pg(a,this.w),a):a instanceof rd?(b=a,b.I(wk.Kc)?Gk(this,new fi(b,this.s),a):Gk(this,new fi(b,this.F),a)):a instanceof Gc&&Gk(this,new zk(a,this.o),a)};function Ik(a,b){var c=Da(a.b,function(a){return a.Lf==b});null!=c&&(a.a.remove(c.oe),Ga(a.b,c))}Fk.prototype.X=function(a){if(a.W()==this.j){var b=a.G();a.I("OBJECT_ADDED")?this.c(b):a.I("OBJECT_REMOVED")&&Ik(this,b)}};var Hk="over";function Jk(a,b,c,d,e){if(null==a&&null==e)throw Error();this.h=a;this.j=b;this.a=e;this.g=!1;this.f=null;null!=a&&(b=a.ra(),0<b.length&&(this.f=b[0]));this.c=c;this.i=d;this.b=M;null!=a&&(this.b=L(c,a.Ia()))};function Kk(a,b){this.a=a;this.b=a.g;this.c=Mg(this.b,zc(a.c));this.f=b}function Lk(a,b){b=L(a.f,b);var c=Kg(a.b,a.c.add(b)),d=a.a.c;b=d.J();d=d.K();var e=c.m();c=c.l();b=new N(e-b/2,c-d/2,e+b/2,c+d/2);dj(a.a,b)};function Mk(a,b,c){this.a=a;this.h=b||null;this.g=null!==c;this.j=null!=c?1==c.control:!1;this.o=null!=c?1==c.sd:!1;this.s=null!=c?1==c.shift:!1;this.i=null!=c?1==c.alt:!0;this.c=!1;this.f=this.b=null;C(a.a,"mousedown",this.qf,!1,this);C(document,"mousemove",this.rf,!1,this);C(document,"mouseup",this.Cd,!1,this);C(document,"keydown",this.Se,!1,this);C(document,"keyup",this.Te,!1,this);C(document,"touchstart",this.Of,!1,this);C(document,"touchmove",this.Nf,!1,this);C(document,"touchend",this.Mf,!1,
this)}g=Mk.prototype;g.toString=function(){return""};g.qf=function(a){Nk(this,a,a.clientX,a.clientY)};
function Nk(a,b,c,d){if(b.target==a.a.a)if(a.a.a.focus(),a.c=!0,c=Ok(a,c,d),a.g&&a.j==b.ctrlKey&&a.o==b.metaKey&&a.s==b.shiftKey&&a.i==b.altKey)b=a.a.f,null!=b&&(a.f=new Kk(b,c),Lk(a.f,c));else{a:{var e=a.a;d=a.h;var f=null,h=null,l=I,k=B(e.g),m=k.length-1;b:for(;0<=m;m--){var n=k[m],q=n.g,t=Kg(q,c);var w=n.h;ni(w);w=B(w.a);var H=w.length-1;c:for(;0<=H;H--){var y=w[H];if(!y.Ba())continue c;var J=y.Aa();if(!(1<J.length))if(0==J.length){if(y.Ga(t)){f=y;var V=n;var P=t;h=M;break b}}else{J=J[0];for(var va=
B(J.L),jb=va.length-1;0<=jb;jb--){var ea=U(J,va[jb]);ea=oc(c,Mg(q,ea));ea<=l&&(l=ea,f=y,V=n,h=va[jb],P=t)}}}}if(null==f){V=e.f;if(null!=V)P=Kg(V.g,c);else{c=null;break a}if(null==d){c=null;break a}}c=r(V)&&r(P)?new Jk(f,V,P,h,d):null}a.b=c;if(null!=a.b){a=a.b;if(null!=a.a){c=a.a;f=a.f;V=a.c;P=a.b;d=a.i;c.f=b.altKey||b.metaKey||b.ctrlKey;vk(c);b=B(c.a.a).length;for(h=0;h<b;h++)f===fg(c.a,h)&&(c.b=h);-1<c.b&&((b=fg(c.a,c.b),c.g.a)?null!=d&&(c.c=new rd(wk.Kc,b,d,c.h,M,0,3),uk(c,V,P),ig(c.a,c.c),c.a.b.add(c.c)):
c.f&&(c.i=b.A,c.j=Math.atan2(P.l(),P.m())));b=-1<c.b}else b=!1;a.g=b}}}function Ok(a,b,c){var d=a.a.a,e=d.getBoundingClientRect();return pc(new K(b-e.left,c-e.top),d.offsetWidth/a.a.J())}g.rf=function(a){Pk(this,a,a.clientX,a.clientY)};function Pk(a,b,c,d){var e=a.a.a;null!=e.offsetParent&&(c=Ok(a,c,d),(b.target==e||b.target==document.body)&&a.c&&b.b(),null!=a.f?Lk(a.f,c):null!=a.b&&(a=a.b,a.c=Kg(a.j.g,c),null==a.h||null!=a.f&&a.g?null!=a.a&&a.g&&uk(a.a,a.c,a.b):a.h.xa(L(a.c,a.b))))}
g.Cd=function(a){var b=this.a.a;null!=b.offsetParent&&((a.target==b||a.target==document.body)&&this.c&&a.b(),Wi(this))};function Wi(a){if(null==a.f&&null!=a.b){var b=a.b;null!=b.a&&vk(b.a)}a.b=null;a.f=null;a.c=!1}g.Se=function(){};g.Te=function(){};g.Of=function(a){if(a.target==this.a.a){var b=a.f;null!=b&&((b=b.touches)&&1==b.length?Nk(this,a,b[0].clientX,b[0].clientY):Wi(this))}};g.Nf=function(a){var b=a.f;b=null!=b?b.touches:[];this.c&&b&&1==b.length?Pk(this,a,b[0].clientX,b[0].clientY):Wi(this)};
g.Mf=function(a){this.c&&this.Cd(a)};function Qk(a){if(r(a)&&!Jj(a))throw Error("not a GraphLine "+a);this.a=r(a)?[a]:[];this.f=Ta(this.a.length);this.h=this.c=null;this.g=Eg;this.b=!1;this.i=!0;this.j=0}g=Qk.prototype;g.toString=function(){return""};function Rk(a,b){if(Jj(b))A(a.a,b)||(a.a.push(b),a.f.push(-1));else throw Error("not a GraphLine "+b);}g.Ga=function(){return!1};
g.Ha=function(a,b){if(!this.g.sa()){a.save();if(null==this.h||this.h!=b)this.h=b,this.b=!0;for(var c=0,d=this.a.length;c<d;c++)if(this.f[c]>tj(this.a[c].c)){this.reset();break}if(this.i){c=this.g.J();d=this.g.K();null==this.c&&(this.c=document.createElement("canvas"),this.c.width=c,this.c.height=d,this.b=!0);var e=this.c.getContext("2d");this.b?(e.clearRect(0,0,c,d),this.f=Ta(this.a.length),Sk(this,e,b),this.b=!1):Sk(this,e,b);a.drawImage(this.c,0,0,c,d)}else this.b=!0,this.f=Ta(this.a.length),Sk(this,
a,b),this.b=!1;c=0;for(d=this.a.length;c<d;c++){e=a;var f=b,h=vj(this.a[c].c);if(null!=h){var l=Ng(f,h.m());f=Og(f,h.l());e.fillStyle="red";e.fillRect(l-2,f-2,5,5)}}a.restore()}};g.Aa=function(){return[]};g.Ia=function(){return M};g.ra=function(){return[]};g.$=function(){return this.j};
function Sk(a,b,c){for(var d=0,e=a.a.length;d<e;d++){var f=a.f,h=d;var l=b;var k=c,m=a.f[d],n=a.a[d],q=Lg(k,a.g),t=new xj(n.c,m);if(zj(t)){m=Aj(t);var w=Kj(n,yj(t));if("dots"==w.c){var H=Ng(k,m.a),y=Og(k,m.b),J=w.b;l.fillStyle=w.a;l.fillRect(H,y,J,J)}for(;zj(t);)if(y=m,m=Aj(t),m.a!=y.a||m.b!=y.b)if(w=Kj(n,yj(t)),H=m.c==y.c&&m.f==y.f,"dots"!=w.c&&H){if(Cc(q,y,m)){H=Ng(k,y.a);y=Og(k,y.b);J=Ng(k,m.a);var V=Og(k,m.b);l.strokeStyle=w.a;l.lineWidth=w.b;l.beginPath();l.moveTo(H,y);l.lineTo(J,V);l.stroke()}}else yc(q,
m)&&(H=Ng(k,m.a),y=Og(k,m.b),J=w.b,l.fillStyle=w.a,l.fillRect(H,y,J,J));l=yj(t)}else l=m;f[h]=l}}g.Ba=function(){return!1};g.reset=function(){this.f=Ta(this.a.length);this.b=!0};g.xa=function(){};function Tk(a,b){a.g=b;a.c=null}function Uk(a,b){a.i=b;a.i||(a.c=null)}g.ka=function(a){this.j=r(a)?a:0};var Vk={Id:"aqua",mb:"black",Jd:"blue",Md:"fuchsia",Nd:"gray",Od:"green",Qd:"lime",Ud:"maroon",Vd:"navy",Wd:"olive",Yd:"purple",Zd:"red",be:"silver",ee:"teal",Eb:"white",ke:"yellow"};function Wk(a,b,c,d,e,f){S.call(this,"GRAPH_LAYOUT");this.g=f||"block";Ri(e,b);this.view=new Zi("X_Y_GRAPH_VIEW",new N(0,0,1,1));bj(this.view,"FULL");aj(this.view,"FULL");ui(b,this.view);this.i=this.view.h;this.a=new Fj("X_Y_GRAPH_LINE",a);this.a.La(0);this.a.ya(1);this.a.ja("lime");this.view.fa(this.a);this.f=hj(this.view);a=x(function(a){if(a.I(Z.za)){var b=this.f;var c=this.a;c=-1<c.a?Ad(c.b,c.a).getName(!0):"";b.rc=c}a.I(Z.va)&&(a=this.f,b=this.a,b=-1<b.f?Ad(b.b,b.f).getName(!0):"",a.Rb=b)},this);
new ci(this.a,a);a(new O(this.a,Gj.za));this.c=new Lj("X_Y_AUTO_SCALE",this.a,this.view);this.c.h=.05;this.b=new Qk(this.a);Tk(this.b,this.view.f);Uk(this.b,!0);qi(this.i,this.b);new ci(this.view,x(function(a){a.I("SCREEN_RECT_CHANGED")&&Tk(this.b,this.view.f)},this));this.h=[];this.j=c;Xk(this,mj(e));c=Rc(this.a,Z.va);Xk(this,new jc(c,"Y:"));c=Rc(this.a,Z.za);Xk(this,new jc(c,"X:"));Xk(this,new sh(Gj.Jc,x(this.a.reset,this.a)));c=Sc(this.a,Z.sb);Xk(this,new jc(c,void 0,[Vk.Id,Vk.mb,Vk.Jd,Vk.Md,Vk.Nd,
Vk.Od,Vk.Qd,Vk.Ud,Vk.Vd,Vk.Wd,Vk.Yd,Vk.Zd,Vk.be,Vk.ee,Vk.Eb,Vk.ke],"aqua black blue fuchsia gray green lime maroon navy olive purple red silver teal white yellow".split(" ")));c=Rc(this.a,Z.LINE_WIDTH);Xk(this,new sk(c));c=Sc(this.a,Z.rb);Xk(this,new jc(c));new Mk(b,null,{alt:!1,control:!1,sd:!1,shift:!1});b=lj(this.view,x(function(){this.c.Fa(!0)},this));d.appendChild(b);d=qj(b,this);Xk(this,new Wj(d))}p(Wk,S);Wk.prototype.toString=function(){return""};
Wk.prototype.Ra=function(){return[this,this.a,this.view,this.c]};function Xk(a,b){var c=b.Z();c.style.display=a.g;a.j.appendChild(c);a.h.push(b)};function Yk(a){a.style[cb?"styleFloat":"cssFloat"]="left"};function Zk(a,b,c){S.call(this,"TAB_LAYOUT");b=b||800;c=c||800;this.w=this.u=this.C=1;Wb(a.images_dir);this.T=$k(a,"tab_list");this.f=al(this);""==this.f&&(this.f=bl,cl(this,this.f));C(this.T,"click",x(function(a){a=a.target;if(void 0===a)throw Error("event target is undefined ");if(null!=a&&"LI"==a.tagName&&!(-1<a.className.indexOf("selected"))){a=a.className;a=a.toLowerCase().trim();switch(a){case dl:a=el;break;case fl:a=gl;break;case hl:a=il}this.Ka(a)}},this));C(window,"resize",x(this.Sa,this));
C(window,"orientationchange",x(this.Sa,this));var d=jl(a,"term_output");this.U=jl(a,"term_input");this.ea=new Ah(this.U,d);this.B=$k(a,"container");this.c=$k(a,"sim_applet");this.c.style.position="relative";d=document.createElement("canvas");d.tabIndex=0;this.s=new ri(d,"SIM_CANVAS");zi(this.s,b,c);this.c.appendChild(this.s.a);this.g=$k(a,"show_sim");d=Tj(this.g);if(null==d||"LABEL"!=d.tagName)throw Error();this.o=d;C(this.g,"click",x(function(){var a=this.g.checked;switch(this.f){case "":case bl:break;
case dl:a&&this.Ka(el);break;case el:a||this.Ka(dl);break;case fl:a&&this.Ka(gl);break;case gl:a||this.Ka(fl);break;case hl:a&&this.Ka(il);break;case il:a||this.Ka(hl);break;default:throw Error('showSim: no such layout "'+this.f+'"');}},this));this.a=$k(a,"div_graph");this.a.style.position="relative";d=document.createElement("canvas");this.L=new ri(d,"GRAPH_CANVAS");b=Math.max(b,c);zi(this.L,b,b);this.a.appendChild(d);this.i=$k(a,"graph_controls");this.oa=[];this.h=$k(a,"sim_controls");this.h.style.marginLeft=
"10px";this.ba=$k(a,"div_terminal");this.ba.style.display="none";$k(a,"label_terminal").style.display="inline";this.A=$k(a,"show_terminal");C(this.A,"click",x(function(){this.Gd(this.A.checked)},this));this.b=$k(a,"div_time_graph");this.b.style.position="relative";c=document.createElement("canvas");this.V=new ri(c,"TIME_GRAPH_CANVAS");zi(this.V,b,b);this.b.appendChild(c);this.j=$k(a,"time_graph_controls");this.Sa();this.D(new Q(this,kl.ic,ll.ic,x(this.Le,this),x(this.Gf,this)));this.D(new Q(this,
kl.ac,ll.ac,x(this.Be,this),x(this.Bf,this)));this.D(new Q(this,kl.jc,ll.jc,x(this.Me,this),x(this.Hf,this)));this.D(new Nc(this,kl.Lc,ll.Lc,x(this.De,this),x(this.Ka,this),[bl,dl,el,fl,gl,hl,il],[bl,dl,el,fl,gl,hl,il]));this.D(new Hc(this,kl.Sc,ll.Sc,x(function(){return this.A.checked},this),x(this.Gd,this)))}p(Zk,S);g=Zk.prototype;g.toString=function(){return""};
function $k(a,b){a=a[b];if(!u(a))throw Error("unknown elementId: "+b);b=document.getElementById(a);if(!oa(b))throw Error("not found: element with id="+a);return b}function jl(a,b){a=a[b];if(!u(a))throw Error("unknown elementId: "+b);return document.getElementById(a)}
function ml(a,b,c,d){b.style.display="block";c.style.display="inline-block";c.style.a="1";c.style.MozColumnCount="1";c.style.webkitColumnCount="1";c.style.width="auto";var e=c.getBoundingClientRect().width;e=150<e?e:300;b=b.offsetWidth||b.getBoundingClientRect().width;null!=d&&(d.style.display="block",b+=d.offsetWidth||d.getBoundingClientRect().width);a=a.B.offsetWidth||a.B.getBoundingClientRect().width;a-b-2<e&&a>2*e&&(c.style.width="100%",c.style.a="2",c.style.MozColumnCount="2",c.style.webkitColumnCount=
"2")}g.Be=function(){return this.u};g.De=function(){return this.f};function al(a){a=Da(a.T.childNodes,function(a){return a.nodeType!=Node.ELEMENT_NODE||"LI"!=a.tagName?!1:null!=a.className.match(/.*selected/)});return null==a?"":a.className.replace(/[ ]*selected/,"")}g.Le=function(){return this.C};g.Ra=function(){return[this,this.s,this.L,this.V]};g.Me=function(){return this.w};
g.Sa=function(){var a=Sj();Yk(this.c);Yk(this.a);Yk(this.b);switch(this.f){case "":case bl:this.a.style.display="none";this.i.style.display="none";this.b.style.display="none";this.j.style.display="none";nl(this,.95*this.C,this.a);ml(this,this.c,this.h);this.o.style.display="none";break;case dl:this.c.style.display="none";this.h.style.display="none";this.b.style.display="none";this.j.style.display="none";nl(this,.95*this.u,this.a);ml(this,this.a,this.i);this.g.checked=!1;this.o.style.display="inline";
break;case el:this.b.style.display="none";this.h.style.display="none";this.j.style.display="none";600<a.width?nl(this,.49,this.a):nl(this,.95*this.u,this.a);ml(this,this.a,this.i,this.c);this.g.checked=!0;this.o.style.display="inline";break;case fl:this.a.style.display="none";this.i.style.display="none";this.c.style.display="none";this.h.style.display="none";nl(this,.95*this.w,this.b);ml(this,this.b,this.j);this.g.checked=!1;this.o.style.display="inline";break;case gl:this.a.style.display="none";
this.h.style.display="none";this.i.style.display="none";600<a.width?nl(this,.49,this.b):nl(this,.95*this.w,this.b);ml(this,this.b,this.j,this.c);this.g.checked=!0;this.o.style.display="inline";break;case hl:this.a.style.display="block";this.b.style.display="block";this.c.style.display="none";this.h.style.display="none";this.i.style.display="none";this.j.style.display="none";nl(this,.49,this.a);nl(this,.49,this.b);this.g.checked=!1;this.o.style.display="inline";break;case il:this.a.style.display="block";
this.b.style.display="block";this.c.style.display="block";this.h.style.display="none";this.i.style.display="none";this.j.style.display="none";nl(this,.49,this.a);nl(this,.49,this.b);this.g.checked=!0;this.o.style.display="inline";break;default:throw Error('redoLayout: no such layout "'+this.f+'"');}};
function nl(a,b,c){var d=Sj().height-80,e=a.B.offsetWidth||a.B.getBoundingClientRect().width,f=wi(a.s);b=Math.min(b,d/e*(f.J()/f.K()));b=Math.floor(100*b)+"%";a.c.style.width=b;a.c.style.height="auto";c.style.width=b;c.style.height="auto"}g.Bf=function(a){F(a,this.u)&&(this.u=a);this.Sa();T(this,kl.ac)};g.Ka=function(a){a=a.toLowerCase().trim();if(this.f!=a){a=this.f=a;switch(a){case el:a=dl;break;case gl:a=fl;break;case il:a=hl}cl(this,a);this.Sa()}};
function cl(a,b){al(a)!=b&&z(a.T.childNodes,function(a){a.nodeType==Node.ELEMENT_NODE&&"LI"==a.tagName&&(a.className.trim()==b?a.className+=" selected":-1<a.className.indexOf("selected")&&(a.className=a.className.replace(/[ ]*selected/,"")))},a)}g.Gf=function(a){F(a,this.C)&&(this.C=a);this.Sa();T(this,kl.ic)};g.Hf=function(a){F(a,this.w)&&(this.w=a);this.Sa();T(this,kl.jc)};g.Gd=function(a){this.ba.style.display=a?"block":"none";(this.A.checked=a)&&this.U&&!this.ea.j&&this.U.focus()};
var bl="sim",dl="graph",el="sim+graph",fl="time_graph",gl="sim+time_graph",hl="multi_graph",il="sim+multi_graph",kl={ic:"sim-width",ac:"graph-width",jc:"time-graph-width",Lc:"layout",Sc:"show terminal"},ll=kl;function ol(a,b,c,d,e){S.call(this,"TIME_GRAPH_LAYOUT");Ri(e,b);this.view=new Zi("TIME_GRAPH_VIEW",new N(0,0,1,1));bj(this.view,"FULL");aj(this.view,"FULL");ui(b,this.view);hj(this.view);this.a=new Fj("TIME_GRAPH_LINE_1",a);this.a.ja("lime");this.view.fa(this.a);this.f=new Lj("TIME_GRAPH_AUTO_SCALE",this.a,this.view);this.f.h=.05;this.g=new Qk(this.a);Tk(this.g,this.view.f);qi(this.view.h,this.g);new ci(this.view,x(function(a){a.I("SCREEN_RECT_CHANGED")&&Tk(this.g,this.view.f)},this));var f=this.a.S().b;
this.a.La(f);this.a.ya(0);Uk(this.g,this.a.a!=f);this.b=new Fj("TIME_GRAPH_LINE_2",a);Pj(this.f,this.b);this.view.fa(this.b);this.b.La(f);this.b.ya(1);this.b.ja("red");Rk(this.g,this.b);this.c=new Fj("TIME_GRAPH_LINE_3",a);Pj(this.f,this.c);this.view.fa(this.c);this.c.La(f);this.c.ya(-1);this.c.ja("blue");Rk(this.g,this.c);this.h=[];this.i=c;pl(this,mj(e));a=Rc(this.a,Z.va);pl(this,new jc(a,ql.Rd));a=Rc(this.b,Z.va);pl(this,new jc(a,ql.Sd));a=Rc(this.c,Z.va);pl(this,new jc(a,ql.Td));a=Rc(this.a,Z.za);
pl(this,new jc(a,"X:"));a=Rc(this.f,Mj.Cb);pl(this,new sk(a));a=new sh(Gj.Jc,x(function(){this.a.reset();this.b.reset();this.c.reset()},this));pl(this,a);new ci(this.a,x(function(){Uk(this.g,this.a.a!=f);this.b.La(this.a.a);this.c.La(this.a.a)},this));new Mk(b,null,{alt:!1,control:!1,sd:!1,shift:!1});this.view.Fd(!1);new ci(e,x(function(a){a.I("RESET")&&(this.view.Pb(this.view.J()/2),this.f.Fa(!0))},this));b=lj(this.view,x(function(){this.f.Fa(!0)},this));d.appendChild(b);d=qj(b,this);pl(this,new Wj(d))}
p(ol,S);ol.prototype.toString=function(){return""};function pl(a,b){var c=b.Z();c.style.display="block";a.i.appendChild(c);a.h.push(b)}ol.prototype.Ra=function(){return[this,this.a,this.b,this.c,this.view,this.f]};var ql={Rd:"line 1",Sd:"line 2",Td:"line 3"};function rl(a,b,c,d,e){Ub();S.call(this,e||"APP");this.o=b;this.b=new Zk(a,800,Math.round(800*this.o.K()/this.o.J()));this.h=this.b.ea;a=this.b.s;this.i=c;Mh(this.h,x(c.ha,c));new ci(c,x(function(){c.ha()},this));c.Qb(!1);this.ub=c.b;this.V=c.S();this.f=new Zi("SIM_VIEW",this.o);this.ea=this.f.h;ui(a,this.f);this.s=new Zi("STATUS_VIEW",new N(-10,-10,10,10));ui(a,this.s);hj(this.f,!0);this.a=new Oi(d);Ri(this.a,a);this.g=this.a.a;this.oa=new tk(c,this.g);this.cb=new Mk(a,this.oa);Si(this.a,this.cb);
new Fk(this.ub,this.ea);this.A=new jk(c);this.ba=new Xh(c);this.U=pj(this.ba,this.s,this);this.B=new xh(x(c.Y,c),x(this.g.Hb,this.g));this.B.xa(new K(8,4));this.T=oj(this.B,this.s,this);a=lj(this.f,x(function(){dj(this.f,this.o)},this));this.b.c.appendChild(a);this.L=qj(a,this);this.L.$a(!1);this.w=new gk(c,c,d);this.c=new Wk(c.S(),this.b.L,this.b.i,this.b.a,this.a);this.j=new ol(c.S(),this.b.V,this.b.j,this.b.b,this.a)}p(rl,S);rl.prototype.toString=function(){return""};rl.prototype.ne=function(){};
rl.prototype.defineNames=rl.prototype.ne;rl.prototype.Ra=function(){return Ja([this,this.i,this.A,this.w,this.a,this.g,this.f,this.s,this.V],this.b.Ra(),this.c.Ra(),this.j.Ra())};rl.prototype.od=function(a){null!=a||(a=Da(B(this.i.a),function(a){return isFinite(a.a)}));null!=a&&(0>this.c.a.a&&this.c.a.La(a.B),0>this.c.a.f&&this.c.a.ya(a.B+2));this.j.a.ya(1);this.j.b.ya(2);this.j.c.ya(3)};rl.prototype.graphSetup=rl.prototype.od;
function sl(a,b){a=a.b;var c=b.Z();c.style.display="block";a.h.appendChild(c);a.oa.push(b)}rl.prototype.eval=function(a,b){try{return this.h.eval(a,b)}catch(c){a=this.h,b=c,a.v?console.log(b):(a.v=!0,alert(b))}};rl.prototype.eval=rl.prototype.eval;
rl.prototype.Kf=function(){Hi(this.g);var a=this.h;if(null!=a.h){var b=a.h;b.s=Uh(b,!1).split(";");b.i=Uh(b,!0).split(";")}b=window.location.href;var c=b.indexOf("?");-1<c?(b=b.slice(c+1),b=decodeURIComponent(b),a.eval(b),b=!0):b=!1;b||Lh(a);dg(this.i);this.i.ha();this.a.la()};rl.prototype.setup=rl.prototype.Kf;rl.prototype.start=function(){Mi(this.a.b)};rl.prototype.start=rl.prototype.start;function tl(a){var b=new N(-6,-6,6,6),c=new lg,d=new Nd(c);rl.call(this,a,b,c,d);this.C=c;this.T.$a(!0);this.U.$a(!0);rh(this.C,d);sl(this,mj(this.a));a=Rc(this.A,kk.bb);sl(this,new sk(a));a=Qc(this.i,bg.zb);sl(this,new Wj(a));sl(this,new Wj(this.U));sl(this,new Wj(this.T));sl(this,new Wj(this.L));a=Rc(this.a,Pi.Bb);sl(this,new sk(a));a=Rc(this.a.a,Bi.Ab);sl(this,new sk(a));a=Sc(this.w,hk.qb);sl(this,new jc(a));a=ij(this.b.s);sl(this,a);a=Sc(this.C,bg.pb);sl(this,new jc(a));a=[this.V];la(void 0)&&
(a=Ja(a,void 0));this.u=nj(this.Ra(),a,this.a,this.h);sl(this,rj(this.u,this.a));Xk(this.c,rj(this.u,this.a));pl(this.j,rj(this.u,this.a));this.od()}p(tl,rl);tl.prototype.toString=function(){return""};ua("makeStuckTestApp",function(a){return new tl(a)});}).call(window)
